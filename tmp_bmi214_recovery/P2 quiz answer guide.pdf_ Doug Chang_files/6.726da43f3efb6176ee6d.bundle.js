(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=h(n(46)),a=h(n(948)),s=n(581),l=h(n(932)),u=f(n(829)),c=f(n(824)),p=h(n(790)),d=h(n(789));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,s.connect)(function(e){return e},r({},u,c))(d.default);t.default=function(e){var t=(0,a.default)({node:document.querySelector("#App"),onToggle:function(){return document.querySelector(".full-screen-button").focus()}}),n=o(t,2),u=n[0],c=n[1];return i.default.createElement(s.Provider,{store:l.default},i.default.createElement(m,r({isFullscreen:u,localStorage:p.default,toggleFullscreen:c},e)))}},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTouchEvent=t.isPenEvent=t.getGroupDivsWithPageData=t.splitRootAnnotationsAndReplies=t.isBelowOriginalTop=t.isOriginalTopAbove=t.hasReplyIn=t.sortBy=t.isNot=t.pipe=void 0;var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.compareRectY=c,t.compareRectYInverse=function(e,t){return 1===c(e,t)?-1:1},t.getMostVisiblePage=function(e){var t="0",n=0;for(var o in e)e.hasOwnProperty(o)&&e[o]>n&&(t=o,n=e[o]);return parseInt(t,10)},t.getPageWidthAfterScaling=function(e,t){return Math.trunc(t)+(e?r.COMMENT_REGION_WIDTH:0)},t.getStringValues=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];t.push(o)}return t},t.positionActiveComment=function(e,t){if(null!=e){e.div.style.top=e.div.dataset.originalTop+"px";var n=e?parseFloat(e.div.dataset.originalTop)+e.pageTop:0,o=p(n),r=t.filter(o),i=d(n),a=parseFloat(e.div.clientHeight);return{heightOfActiveComment:a,isAboveActiveComment:o,isBelowActiveComment:i,previousComments:r,topOfActiveComment:n}}return{heightOfActiveComment:0,isAboveActiveComment:p(0),isBelowActiveComment:d(0),previousComments:[],topOfActiveComment:0}},t.positionCommentGroupsBelowActiveCommentGroup=function(e,t,n,o){var i=t.filter(n),a=o+e,s=!0,l=!1,u=void 0;try{for(var c,p=i[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value,f=d.pageTop,h=d.div,m=f+parseFloat(h.dataset.originalTop)<=a+r.MARGIN_BETWEEN_COMMENT_GROUPS,g=m?a+r.MARGIN_BETWEEN_COMMENT_GROUPS:f+parseFloat(h.dataset.originalTop);h.style.top=g-f+"px",a=g+h.clientHeight}}catch(e){l=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw u}}},t.positionCommentGroupsAboveActiveCommentGroup__first_pass=function(e){var t=0,n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=l.pageTop,c=l.div,p=u+parseFloat(c.dataset.originalTop)<t+r.MARGIN_BETWEEN_COMMENT_GROUPS,d=p?t+r.MARGIN_BETWEEN_COMMENT_GROUPS:u+parseFloat(c.dataset.originalTop);c.dataset.tentativeTop=d,c.style.top=d-u+"px",t=d+c.clientHeight}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}},t.positionCommentGroupsAboveActiveCommentGroup__second_pass=function(e,t){var n=null,o=t,i=e.slice().reverse(),a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,d=p.pageTop,f=p.div,h=parseFloat(f.dataset.tentativeTop),m=f.clientHeight,g=h+m+r.MARGIN_BETWEEN_COMMENT_GROUPS>=o,v=g?o-m-r.MARGIN_BETWEEN_COMMENT_GROUPS:h;v<e[0].pageTop+6&&(!0,n=n||f.dataset.annotationId),f.style.top=v-d+"px",o=v}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}},t.getCachedClientHeight=function(e){if(null==e.dataset.clientHeight||Math.random()>.9){var t=e.clientHeight;return e.dataset.clientHeight=t,t}return parseFloat(e.dataset.clientHeight)},t.isElementFreetextAnnotation=function(e){if(e instanceof HTMLElement==!1)return!1;return null!=e.querySelector(".Freetext-content")};var r=n(134),i=l(n(780)),a=l(n(760)),s=l(n(513));l(n(512));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.pipe=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(0,a.default)([].concat(n))(e)},t.isNot=function(e){return function(t){return t!==e}},t.sortBy=(0,i.default)(function(e,t){return(0,s.default)(t,e)});function c(e,t){return e.rect[0][1]>t.rect[0][1]?-1:1}t.hasReplyIn=function(e){return function(t){return e.some(function(e){return e.inreplyto===t.id})}};var p=t.isOriginalTopAbove=function(e){return function(t){var n=t.pageTop,o=t.div;return n+parseFloat(o.dataset.originalTop)<e}},d=t.isBelowOriginalTop=function(e){return function(t){var n=t.pageTop,o=t.div;return n+parseFloat(o.dataset.originalTop)>e}};t.splitRootAnnotationsAndReplies=function(e,t){var n=o(e,2),r=n[0],i=n[1];return t.inreplyto?[r.concat(t),i]:[r,i.concat(t)]};t.getGroupDivsWithPageData=function(e){var t=[].concat(u(e.querySelectorAll(".PageComponent"))).reduce(function(e,t){var n=[].concat(u(t.querySelectorAll(".CommentGroup")));if(0===n.length)return e;var o=t.offsetTop;return e.concat(n.map(function(e){return{pageTop:o,div:e}}))},[]),n=e.querySelector(".Annotation--selected .CommentGroup"),o=t.filter(function(e){return e.div!==n}),r=(0,s.default)(o,[function(e){var t=e.pageTop,n=e.div;return t+parseFloat(n.dataset.originalTop)}]);return{activeCommentGroupDivWithPageData:t.find(function(e){return e.div===n})||null,inactiveCommentGroupDivsWithPageData:r}};t.isPenEvent=function(e){return!!e&&(e.persist&&e.persist(),e.pointerType?e.pointerType===r.PEN_POINTER_TYPE:!(!e.target||!e.target.pointerType)&&e.target.pointerType===r.PEN_POINTER_TYPE)},t.isTouchEvent=function(e){return e.pointerType===r.TOUCH_POINTER_TYPE||e.type.includes(r.TOUCH_POINTER_TYPE)}},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxOffset=t.transformAnnotationView=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getRectFromCoords=function(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return{left:(0,s.default)(t),top:(0,s.default)(n),right:(0,l.default)(t),bottom:(0,l.default)(n)}},t.floatCoordinatesToStringPoint=function(e){return e.join(",")},t.roundCoordinatePoint=f,t.pickX=function(e){return e[0]},t.pickY=function(e){return e[1]},t.concat=function(e,t){return e.concat(t)},t.applyScale=function(e){return function(t){return t*e}},t.applyTranslate=function(e,t){return function(n){return[n[0]+e,n[1]+t]}},t.applyTranslatePoint=function(e,t){return function(n){return{x:n.x+e,y:n.y+t,width:n.width,opacity:n.opacity}}},t.translateYAxis=h,t.stringPointToFloatCoordinates=function(e){return e.split(",").map(function(e){return parseFloat(e)})},t.translateAnnotation=function(e,t,n){var o=(0,a.default)(e);if(e.rect){var s=i(e.rect,2),l=i(s[0],2),u=l[0],c=l[1],p=i(s[1],2),d=p[0],f=p[1],h=[[u+t,c+n],[d+t,f+n]];o.rect=h}e.coords&&(o.coords=o.coords.map(function(e){return e.map(function(e){return[e[0]+t,e[1]+n]})}));e.inklist&&e.inklist.gestures&&(o.inklist.gestures=e.inklist.gestures.map(function(e){return e.map(function(e){return r({},e,{x:e.x+t,y:e.y+n})})}));return o},t.transformAnnotationSave=function(e,t,n){var o=(0,a.default)(n);n.rect&&(o.rect=o.rect.map(function(n){return[f(n[0]/t),f(h(e,1,n[1])/t)]}));n.coords&&(o.coords=o.coords.map(function(n){return n.map(function(n){return[f(n[0]/t),f(h(e,1,n[1])/t)]})}));n.inklist&&n.inklist.gestures&&(o.inklist.gestures=o.inklist.gestures.map(function(n){return n.map(function(n){return r({},n,{x:f(n.x/t),y:f(h(e,1,n.y)/t)})})}));return o},t.getDimensions=function(e){var t=e.inklist&&e.inklist.gestures||d,n=null,o=null,r=null,i=null,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value,f=!0,h=!1,m=void 0;try{for(var g,v=(p||d)[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;(null===n||y[0]<n)&&(n=y[0]),(null===o||y[1]<o)&&(o=y[1]),(null===r||y[0]>r)&&(r=y[0]),(null===i||y[1]>i)&&(i=y[1])}}catch(e){h=!0,m=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw m}}}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}return{left:n,top:o,right:r,bottom:i}},t.multiplyPath=function(e){for(var t=[],n=0;n<e.length;n+=1)if(t[2*n]=e[n],e.length>n+1){var o=Object.assign({},e[n+1]);o.x=(e[n].x+e[n+1].x)/2,o.y=(e[n].y+e[n+1].y)/2,"number"==typeof e[n].opacity&&"number"==typeof e[n+1].opacity&&(o.opacity=(e[n].opacity+e[n+1].opacity)/2),"number"==typeof e[n].width&&"number"==typeof e[n+1].width&&(o.width=(e[n].width+e[n+1].width)/2),t[2*n+1]=o}return t},t.horizontallyConnectRects=function(e,t){var n=!1;return e.forEach(function(e){var o=e.right>=t.left-10&&e.left<t.left&&e.right<t.right,r=t.right>=e.left-10&&t.left<e.left&&t.right<e.right,i=e.top<=t.top&&e.bottom>=t.bottom;i&&o?(e.right=t.right,n=!0):i&&r&&(e.left=t.left,n=!0)}),n?e:e.concat(t)},t.areRectanglesIntersecting=m,t.intersectsWith=g,t.intersectsWithSome=function(e){return function(t){return e.some(function(e){return m(e,t)})}},t.isInsideRectangle=v,t.removeNeedlessRectOverlapping=function(e,t){if(!e.length)return[t];var n=Object.assign({},t),o=void 0,r=0;do{o=!1,r++;var i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(m(c,t)){if(v(t,c))return e;var p=c.right>t.right&&c.left<t.left,d=c.right<t.right&&c.left>t.left,f=t.top<c.top&&t.bottom>c.top&&t.bottom<c.bottom,h=t.top>c.top&&t.top<c.bottom&&t.bottom>c.bottom;f?p?(o=!0,n.bottom=c.top):d&&(o=!0,c.top=n.bottom):h&&(p?(o=!0,n.top=c.bottom):d&&(o=!0,c.bottom=n.top))}}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}}while(o&&r<100);100===r&&console.warn("removeNeedlessClientRectOverlapping had too many iterations");return e.concat(n)},t.mergeRectangles=y,t.getRectangleIntersection=b,t.getRectangleIntersections=function(e){return function(t,n){return t.concat(e.filter(g(n)).map(function(e){return b(e,n)}))}},t.mergeManyRectangles=function(e,t){if(!e.length)return e.concat(t);var n=[];return e.forEach(function(e){n.push.apply(n,p(y(t,e)))}),e.concat(n)},t.withoutEmptyRects=function(e){return e.top!==e.bottom&&e.left!==e.right},t.getRelatedTargetOrEquivalent=function(e){return e.explicitOriginalTarget||e.relatedTarget||e.rangeParent||e.srcElement||document.activeElement},t.getTranslatedCordinates=function(e){var t=e.pageX,n=e.pageY,o=e.originalPageX,r=e.originalPageY,i=e.viewportHeight,a=e.viewportWidth,s=e.x,l=e.y,u=e.height,c=e.width,p=s+(t-o),d=l+(n-r);return{translateY:d<0?-l:d>i-u?i-u-l:n-r,translateX:p<0?-s:p>a-c?a-c-s:t-o}},t.annotationHasComment=function(e){return!!e&&"object"==(void 0===e?"undefined":o(e))&&e.length>0},t.getCommentCreateButtonVisibility=function(e,t,n,o,r,i){return"freetext"!==r&&!1===e&&t&&!1===n&&o&&!i},t.getCommentLineVisibility=function(e,t,n,o,r,i){return!1===e&&(n||t||o&&(r||i))},t.scrollIntoView=function(e){(0,u.default)(e,!0,{easing:"easeIn"})},t.focusOnNextAnnotation=function(e,t){var n=e.findIndex(function(e){return t===e.id})+1;if(n<e.length){var o=e[n].id,r=document.querySelector("#Annotation-"+o),i=r.classList.contains("FreetextGroup");i?r.querySelector("textarea").focus():r.querySelector(".Annotation-svg-container").focus()}},t.supportsMixBlendMode=function(){var e="CSS"in window&&"supports"in window.CSS;return"mix-blend-mode"in document.body.style&&"string"==typeof window.getComputedStyle(document.body).mixBlendMode&&(!e||window.CSS.supports("mix-blend-mode","multiply"))};var a=c(n(827)),s=c(n(543)),l=c(n(541)),u=c(n(580));function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=[];function f(e){return Math.round(100*e)/100}function h(e,t,n){return e-t*n}t.transformAnnotationView=function(e){var t=e.height,n=e.scale;return function(e){var o=(0,a.default)(e);return e.rect&&(o.rect=o.rect.map(function(e){return[e[0]*n,h(t,n,e[1])]})),e.coords&&(o.coords=o.coords.map(function(e){return e.map(function(e){return[e[0]*n,h(t,n,e[1])]})})),e.inklist&&e.inklist.gestures&&(o.inklist.gestures=o.inklist.gestures.map(function(e){return e.map(function(e){return r({},e,{x:e.x*n,y:h(t,n,e.y)})})})),o}};function m(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function g(e){return function(t){return m(e,t)}}function v(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}function y(e,t){var n=[],o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,l=void 0,u=Math.min(e.top,t.top),c=Math.max(e.bottom,t.bottom);return e.left<t.left?(o=e.left,r=t.left,l=e):(o=t.left,r=e.left,l=t),e.right<t.right?(i=e.right,a=t.right,s=t):(i=t.right,a=e.right,s=e),o!==r&&n.push({left:o,right:r,top:l.top,bottom:l.bottom}),r!==i&&n.push({left:r,right:i,top:u,bottom:c}),i!==a&&n.push({left:i,right:a,top:s.top,bottom:s.bottom}),n}function b(e,t){return{left:Math.max(e.left,t.left),top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom)}}t.getMaxOffset=function(e,t){return Math.max.apply(Math,[0].concat(p(t.map(function(t){return e[t.id]-t.rect[1][1]}))))}},398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(729);var r=p(n(50)),i=p(n(46)),a=p(n(396)),s=p(n(727)),l=p(n(725)),u=p(n(723)),c=n(134);function p(e){return e&&e.__esModule?e:{default:e}}var d={point:c.POINT_COLORS,area:c.AREA_COLORS,ink:c.INK_COLORS,strikeout:c.STRIKEOUT_COLORS,highlight:c.HIGHLIGHT_COLORS,freetext:c.FREETEXT_COLORS},f={freetext:c.FREETEXT_BACKGROUND_COLORS},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t="freetext"===this.props.controlMode,n="ink"===this.props.controlMode,o=(0,r.default)("Background"),a=(0,r.default)("Size"),p=(0,r.default)("Line"),h=(document.querySelector(".Pages"),d[this.props.controlMode]&&Object.values(d[this.props.controlMode]).map(function(t){return i.default.createElement(s.default,{key:t,colorValue:t,isSelected:e.props.currentColor===t,onCurrentColorChange:e.props.onCurrentColorChange,isBackground:!1})})),m=f[this.props.controlMode]&&Object.values(f[this.props.controlMode]).map(function(t){return i.default.createElement(s.default,{key:t,colorValue:t,isSelected:e.props.currentBgColor===t,onCurrentColorChange:e.props.onCurrentBgColorChange,isBackground:!0})}),g=Object.keys(c.FONTS_BY_SIZE).map(function(t){var n=c.FONTS_BY_SIZE[t];return i.default.createElement(l.default,{key:t,sizeValue:t,font:n,isSelected:n===e.props.currentFont,onCurrentTextSizeChange:e.props.onCurrentTextSizeChange})}),v=Object.keys(c.INK_STROKE_WIDTH_OPTIONS).map(function(t){var n=c.INK_STROKE_WIDTH_OPTIONS[t];return i.default.createElement(u.default,{key:t,sizeValue:t,width:n,isSelected:n===e.props.currentInkWidth,onCurrentInkStrokeWidthChange:e.props.onCurrentInkStrokeWidthChange})});return c.ANNOTATION_TYPES.includes(this.props.controlMode)&&h&&h.length&&i.default.createElement("div",{className:"SecondaryControls",tabIndex:-1},i.default.createElement("div",{className:"SecondaryControls-buttons"},h),t&&i.default.createElement("div",{className:"SecondaryControls-annotation"},i.default.createElement("div",{className:"SecondaryControls-label"},o),i.default.createElement("div",{className:"SecondaryControls-buttons"},m),i.default.createElement("div",{className:"SecondaryControls-label"},a),i.default.createElement("div",{className:"SecondaryControls-buttons",style:{display:"flex"}},g)),n&&i.default.createElement("div",{className:"SecondaryControls-annotation"},i.default.createElement("div",{className:"SecondaryControls-label"},p),i.default.createElement("div",{className:"SecondaryControls-buttons",style:{display:"flex"}},v)))}}]),t}();t.default=h,h.propTypes={controlMode:a.default.string,currentBgColor:a.default.string,currentColor:a.default.string,currentFont:a.default.string,onCurrentBgColorChange:a.default.func,onCurrentColorChange:a.default.func,onCurrentInkStrokeWidthChange:a.default.func,onCurrentTextSizeChange:a.default.func}},409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(648);var i=v(n(46)),a=v(n(387)),s=v(n(50)),l=v(n(413)),u=v(n(646)),c=v(n(486)),p=v(n(485)),d=v(n(483)),f=v(n(423)),h=n(394),m=n(391),g=n(134);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.moveDebounced=(0,l.default)(function(){!n.props.onMoveAnnotation||0===n.state.translateX&&0===n.state.translateY||n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY)},500),n.setSvg=function(e){e instanceof SVGElement&&(n.svg=e)},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.setSvgContainer=function(e){e instanceof HTMLElement&&(n.svgContainer=e)},n.setCommentState=function(e){n.props.onIsCommentingChange({isCommenting:e}),n.setState({isCommenting:e})},n.move=function(e,t){if(!1!==n.props.isMovable){var o=n.props.x+n.state.translateX+e,r=n.props.y+n.state.translateY+t,i=o>=0&&o+n.props.width<n.props.viewportWidth,a=r>=0&&r+n.props.height<n.props.viewportHeight;n.setState({translateX:i?n.state.translateX+e:n.state.translateX,translateY:a?n.state.translateY+t:n.state.translateY}),n.moveDebounced()}},n.handleMouseEnter=function(e){n.props.onHoverAnnotation(n.props.id)},n.handlePointerLeave=function(e){n.props.onHoverAnnotation(null),(0,m.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!1)},n.handleFocusOut=function(e){e.persist&&e.persist();var t=(0,h.getRelatedTargetOrEquivalent)(e),o=n.state.isTabPressed,r=o&&n.props.isShiftPressed;n.setState({isTabPressed:!1});var i=n.div.contains(t)||n.props.commentsContainerRef&&n.props.commentsContainerRef.current&&n.props.commentsContainerRef.current.contains(t);if(o&&!1===r&&!1===i&&n.props.annotation.deleted)return n.setState({isAnnotationFocused:!1,isCommenting:!1}),n.props.onDeselectAnnotation(n.props.id),void(0,h.focusOnNextAnnotation)(n.props.ySortedStagedRootAnnotations,n.props.id);var a=(n.props.commentsContainerRef&&n.props.commentsContainerRef.current&&n.props.commentsContainerRef.current.querySelector(".Acknowledge-remove-deleted-comment-button"))===e.target;if(r&&!1===i&&a)return e.preventDefault(),e.stopPropagation(),void n.div.querySelector(".Annotation-svg-container").focus();var s=n.shouldShowSecondaryControls(),l=s&&n.div.querySelector(".SecondaryControls").contains(e.target)&&o,u=e.target.className.includes("Comment-create"),c=e.target.className.includes("Comment-reply-button"),p=t&&t.className&&t.className.includes("AnnotationControlButton");if(!1!==l||!1!==i||!1!==u&&!0!==p||!1!==c||(n.setState({isAnnotationFocused:!1,isCommenting:!1}),n.props.onDeselectAnnotation(n.props.id),!1!==r)){var d=s&&n.div.querySelector(".SecondaryControls").contains(e.target)&&!1===n.div.querySelector(".SecondaryControls").contains(t);if(d&&r){e.preventDefault(),e.stopPropagation();var f=n.props.commentsContainerRef.current.querySelectorAll(".Comment-reply-button"),m=f[f.length-1];m&&m.focus()}else{if(!1===i&&r){var g=n.props.ySortedStagedRootAnnotations.findIndex(function(e){return n.props.id===e.id});if(g>0){var v=n.props.ySortedStagedRootAnnotations[g-1],y=document.querySelector("#CommentGroup-"+v.id);if(null!=y){if("freetext"===v.type&&v.deleted)return void y.querySelector(".Acknowledge-remove-deleted-comment-button").focus();var b=y.querySelectorAll("textarea");return void b[b.length-1].focus()}return e.preventDefault(),void("freetext"===v.type?document.querySelector("#Annotation-"+v.id+" textarea").focus():document.querySelector("#Annotation-"+v.id+" .Annotation-svg-container").focus())}}var w=n.props.ySortedStagedRootAnnotations[n.props.ySortedStagedRootAnnotations.length-1].id===n.props.id,C=u&&!1===n.props.canEdit,E=w&&(d||C)&&!1===n.props.isShiftPressed&&o,_=n.props.ySortedStagedRootAnnotations[0].id===n.props.id&&r&&e.target.className.includes("Annotation-svg-container");if(E)return e.preventDefault(),e.stopPropagation(),n.setState({isAnnotationFocused:!1,isCommenting:!1}),n.props.onDeselectAnnotation(n.props.id),void n.props.handleNextPageFocus();_&&(e.preventDefault(),e.stopPropagation(),n.setState({isAnnotationFocused:!1,isCommenting:!1}),n.props.onDeselectAnnotation(n.props.id),n.props.handlePreviousPageFocus())}}},n.handleClick=function(e){n.setState({isAnnotationFocused:!0}),n.props.onSelectAnnotation(n.props.id)},n.handleAnnotationFocus=function(e){e.preventDefault(),n.setState({isAnnotationFocused:!0}),n.props.onSelectAnnotation(n.props.id),setTimeout(function(){if(n.div instanceof HTMLElement){var e=n.div,t=function(){var t=e.querySelector(".CommentGroup--active");t instanceof HTMLElement&&(t.getBoundingClientRect().top<90&&(0,h.scrollIntoView)(t))};setTimeout(t,500),setTimeout(t,750)}},5)},n.handleSvgContainerFocus=function(e){e.preventDefault(),n.setState({isSvgContainerFocused:!0}),n.props.onSelectAnnotation(n.props.id)},n.handleSvgContainerBlur=function(e){n.setState({isSvgContainerFocused:!1}),n.props.onTextSelectionEnable()},n.handleCommentsContainerFocus=function(e){n.setState({isCommentsContainerFocused:!0})},n.handleCommentsContainerBlur=function(e){n.setState({isCommentsContainerFocused:!1})},n.handleCheckmarkClick=function(e){n.svgContainer instanceof HTMLElement&&n.svgContainer.focus(),n.handleAnnotationSave(e)},n.handleAnnotationSave=function(e){e instanceof Event&&e.stopPropagation(),"function"==typeof n.props.onMultiStrokeAnnotation&&n.props.onMultiStrokeAnnotation(null),n.props.onCreateAnnotation(n.props.viewportHeight,n.props.viewportScale,n.props.annotation)},n.handleAnnotationDelete=function(){n.props.canDelete&&n.setState({isDeletePopupVisible:!0})},n.handleDeletePopupConfirm=function(e){n.setState({isDeletePopupVisible:!1}),n.props.onIsPenAnnotatingChange(!1),e.preventDefault(),e.stopPropagation(),n.props.canDelete&&(n.props.onMultiStrokeAnnotation&&n.props.onMultiStrokeAnnotation(null),n.props.onTextSelectionEnable(),n.props.onDeleteAnnotation(n.props.pageNumber,n.props.id))},n.handleDeletePopupCancel=function(e){n.setState({isDeletePopupVisible:!1}),n.props.onIsPenAnnotatingChange(!1),n.svgContainer instanceof HTMLElement&&(n.svgContainer.focus(),n.props.onHoverAnnotation(null))},n.handleCommentDelete=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.setState(function(e){return{isCommenting:!1}}),n.props.onIsPenAnnotatingChange(!1),n.props.onDeleteAnnotation(n.props.pageNumber,e,t),n.svgContainer.focus(),n.props.onHoverAnnotation(null)},n.handleCommentEscape=function(){n.svgContainer.focus(),n.setState({isSelected:!0,isCommenting:!1})},n.handleMouseDown=function(e){if((0,m.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!0),!(0,m.isTouchEvent)(e)){var t=(0,h.getRelatedTargetOrEquivalent)(e),o=n.div instanceof HTMLElement&&n.div.contains(t),r=n.buttonDiv&&n.buttonDiv.contains(t);!1===n.props.isMovable||o&&r||(n.props.onTextSelectionDisable(),n.originalPageX=e.pageX,n.originalPageY=e.pageY,n.setState({isAnnotationFocused:!0,isMouseDown:!0,isSelected:!0}),document.addEventListener("pointerup",n.handleDocumentMouseUp),document.addEventListener("pointermove",n.handleDocumentMouseMove))}},n.handleDocumentMouseMove=function(e){window.cancelAnimationFrame(n.moveRequest),n.moveRequest=window.requestAnimationFrame(n.__handleDocumentMouseMove.bind(n,e))},n.__handleDocumentMouseMove=function(e){if(!1!==n.state.isMouseDown&&!1!==n.props.canEdit&&!(0,m.isTouchEvent)(e)){var t=(0,h.getTranslatedCordinates)({pageX:e.pageX,pageY:e.pageY,originalPageX:n.originalPageX,originalPageY:n.originalPageY,viewportHeight:n.props.viewportHeight,viewportWidth:n.props.viewportWidth,x:n.props.x,y:n.props.y,height:n.props.height,width:n.props.width}),o=t.translateX,r=t.translateY;!1===n.state.isDragging&&n.props.onDraggingStart(n.props.id),n.setState({translateX:o,translateY:r,isDragging:!0})}},n.handleDocumentMouseUp=function(){if(document.removeEventListener("pointerup",n.handleDocumentMouseUp),document.removeEventListener("pointermove",n.handleDocumentMouseMove),!1===n.state.isDragging)return n.setState({isMouseDown:!1}),void n.props.onDraggingEnd();n.props.onTextSelectionEnable(),n.state.isDragging&&(n.setState({isDragging:!1,isMouseDown:!1},function(){!n.props.onMoveAnnotation||0===n.state.translateX&&0===n.state.translateY||(!1===(Math.abs(n.state.translateX)<=g.ANNOTATION_TAP_THRESHOLD&&Math.abs(n.state.translateY)<=g.ANNOTATION_TAP_THRESHOLD)&&n.props.onBlockContextMenu(!0),n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY))}),n.props.onDraggingEnd())},n.handleKeyDown=function(e){if(n.svg instanceof SVGElement){var t=n.svg;if(n.props.isMovable&&n.props.canEdit)switch(e.key){case"ArrowRight":return n.move(e.shiftKey?1:5,0),void e.preventDefault();case"ArrowLeft":return n.move(e.shiftKey?-1:-5,0),void e.preventDefault();case"ArrowUp":return n.move(0,e.shiftKey?-1:-5),void e.preventDefault();case"ArrowDown":return n.move(0,e.shiftKey?1:5),void e.preventDefault()}switch(e.key){case"Delete":case"Backspace":return void n.handleAnnotationDelete();case"Escape":t.blur()}}},n.stopPropagation=function(e){e.stopPropagation()},n.handleCreateComment=function(){n.props.multiStrokeAnnotationId&&n.handleAnnotationSave(),n.setCommentState(!0)},n.handleTabPressed=function(e){"Tab"===e.key&&(e.persist&&e.persist(),n.setState({isTabPressed:!0},function(){if(n.props.isShiftPressed){var t=n.props.commentsContainerRef.current.querySelector(".Delete-comment-entry-button"),o=document.querySelector("#CommentGroup-"+n.props.id),r=t===document.activeElement,i=o===document.activeElement;if(document.activeElement.classList.contains("CommentGroup-textarea")&&o&&!1===n.props.canDelete&&null==n.props.annotation.deleted){var a=Array.from(o.querySelectorAll("textarea")),l=a.findIndex(function(e){return document.activeElement===e})-1;if(l>=0)return a[l].focus(),e.preventDefault(),void e.stopPropagation()}var u=o&&o.querySelector("textarea")===document.activeElement&&!1===n.props.canDelete;(r||i||u&&null==n.props.annotation.deleted)&&(e.preventDefault(),e.stopPropagation(),n.div.querySelector(".Annotation-svg-container").focus())}else{var c=document.activeElement.getAttribute("aria-label")===(0,s.default)("delete annotation"),p=n.props.commentsContainerRef.current.querySelectorAll(".Comment-reply-button"),d=p[p.length-1]===document.activeElement,f=(0,h.annotationHasComment)(n.props.commentReplies),m=n.props.isAnnotatable||n.props.canEdit,g=(0,h.getCommentCreateButtonVisibility)(f,m,n.state.isCommenting,n.props.isSelected,n.props.annotation.type,n.props.annotation.deleted),v=document.activeElement.classList.contains("Annotation-svg-container")&&!1===n.props.canDelete,y=(c||v)&&!1===g,b=n.props.ySortedStagedRootAnnotations[n.props.ySortedStagedRootAnnotations.length-1].id!==n.props.id;y?n.props.commentsContainerRef.current.querySelector(".CommentGroup").focus():d&&n.props.canEdit?n.div.querySelector(".SecondaryControls").focus():d&&b&&!1===n.props.canEdit&&(e.preventDefault(),e.stopPropagation(),(0,h.focusOnNextAnnotation)(n.props.ySortedStagedRootAnnotations,n.props.id))}}))},n.handleTabReleased=function(e){"Tab"===e.key&&n.setState({isTabPressed:!1})},n.handleCommentGroupBlur=function(e){n.props.onIsPenAnnotatingChange(!1);var t=(0,h.getRelatedTargetOrEquivalent)(e);!1===(n.div&&(n.div.contains(t)||n.props.commentsContainerRef&&n.props.commentsContainerRef.current&&n.props.commentsContainerRef.current.contains(t)))&&(n.setState({isAnnotationFocused:!1,isCommenting:!1,isCommentsContainerFocused:!1}),n.props.onDeselectAnnotation(n.props.id))},n.handlePointerMove=function(e){(0,m.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!0)},n.handlePointerUp=function(e){(0,m.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!1)},n.state={hasError:!1,isAnnotationFocused:!1,isCommenting:n.props.isSelected&&g.ANNOTATION_TYPES_WITH_AUTO_EXPANDED_COMMENT.includes(n.props.annotation.type),isCommentsContainerFocused:n.props.isSelected&&g.ANNOTATION_TYPES_WITH_AUTO_EXPANDED_COMMENT.includes(n.props.annotation.type),isDeletePopupVisible:!1,isDragging:!1,isMouseDown:!1,isSelected:!1,isSvgContainerFocused:!1,isTabPressed:!1,translateX:0,translateY:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0},function(){console.error("Error caught in Annotation",{error:e,info:t})})}},{key:"componentDidMount",value:function(){this.div.addEventListener("focusout",this.handleFocusOut,!0),this.state.isCommenting&&this.props.onIsCommentingChange({isCommenting:!0})}},{key:"componentWillUnmount",value:function(){this.div instanceof HTMLElement&&this.div.removeEventListener("focusout",this.handleFocusOut,!0)}},{key:"componentWillReceiveProps",value:function(e){this.props.x===e.x&&this.props.y===e.y||this.setState({translateX:0,translateY:0})}},{key:"componentDidUpdate",value:function(e,t){t.isCommenting!==this.state.isCommenting&&!1===this.state.isCommenting&&this.props.onHoverAnnotation(null),!0===e.isSelected&&!1===this.props.isSelected&&(this.props.onIsCommentingChange({isCommenting:!1}),this.setState({isAnnotationFocused:!1,isCommenting:!1,isCommentsContainerFocused:!1}))}},{key:"shouldShowSecondaryControls",value:function(){return this.props.isSelected&&this.props.canEdit&&this.props.secondaryControls}},{key:"render",value:function(){var e=this,t=this.props.annotation,n=(0,a.default)("Annotation-svg-container",this.props.containerClassName),r=(0,a.default)("Annotation-svg",this.props.className,{"Annotation-svg--focused":this.state.isAnnotationFocused,"is-dragging":this.state.isDragging});if(!(t.rect instanceof Array))throw new Error("Annotation is missing rect property");var l=t.rect.map(function(t){var n=o(t,2),r=n[0],i=n[1];return[r+e.state.translateX,i+e.state.translateY]}),m=this.props.x+this.state.translateX-this.props.selectionBoxPadding,g=this.props.y+this.state.translateY-this.props.selectionBoxPadding,v=this.props.width+2*this.props.selectionBoxPadding,y=this.props.height+2*this.props.selectionBoxPadding,b=this.props.commentReplies&&this.props.commentReplies.length>0,w=b&&t.user_id!==this.props.commentReplies[0].user_id,C=!1===this.state.isCommentsContainerFocused&&(!b||this.props.canEdit||this.props.canDelete||w)&&!t.deleted,E=(0,a.default)("Annotation",{"Annotation--selected":this.props.isSelected,"Annotation--error":this.state.hasError,"Annotation--is-dragging":this.state.isDragging});if(this.state.hasError)return i.default.createElement("div",{className:"Annotation--internal",style:{backgroundColor:"red",color:"white",fontSize:"0.7rem",height:y,left:m,position:"absolute",top:g,width:v}},(0,s.default)("Error rendering annotation"));var _=(0,h.annotationHasComment)(this.props.commentReplies),A=this.props.isAnnotatable||this.props.canEdit,x=(0,h.getCommentCreateButtonVisibility)(_,A,this.state.isCommenting,this.props.isSelected,t.type,t.deleted),O=(0,h.getCommentLineVisibility)(this.state.isDragging,x,this.state.isCommenting,_||t.deleted,this.props.isHovered,this.props.isSelected),S=this.shouldShowSecondaryControls(),P=!1===x&&"freetext"!==t.type||t.deleted,T=this.props.annotation.contents?(0,s.default)("Are you sure you want to delete this annotation and all its related comments and replies?"):(0,s.default)("Are you sure you want to delete this annotation?");return i.default.createElement("div",{className:E,id:"Annotation-"+this.props.id,onClick:this.handleClick,onFocus:this.handleAnnotationFocus,onBlur:this.handleFocusOut,onKeyDown:this.handleTabPressed,onKeyUp:this.handleTabReleased,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handlePointerLeave,onPointerLeave:this.handlePointerLeave,onPointerMove:this.handlePointerMove,ref:this.setDivRef,tabIndex:-1},this.state.isDeletePopupVisible&&i.default.createElement(f.default,{message:T,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}),i.default.createElement("div",{className:"Annotation--internal",style:{left:m,top:g,width:v,height:y,position:"absolute"}},i.default.createElement("div",{className:n,onBlur:this.handleSvgContainerBlur,onFocus:this.handleSvgContainerFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleDocumentMouseUp,onPointerDown:this.handleMouseDown,onPointerUp:this.handlePointerUp,onPointerLeave:this.handlePointerLeave,ref:this.setSvgContainer,tabIndex:"0"},i.default.createElement("svg",{"aria-selected":this.props.isSelected,"aria-label":this.props.title,className:r,ref:this.setSvg,style:{width:v,height:y}},this.props.render(this.state.isSvgContainerFocused))),this.props.isSelected&&C&&i.default.createElement("div",{className:"AnnotationToolbar-container"},i.default.createElement(d.default,{authorName:t.user_name,canEdit:this.props.canEdit,canDelete:this.props.canDelete,displayAuthorName:!1===_&&t.user_id!==this.props.sessionUserObject.user_id||w,displayCreateAnnotation:this.props.multiStrokeAnnotationId===t.id,onCreateAnnotation:this.handleCheckmarkClick,onDeleteAnnotation:this.handleAnnotationDelete}))),O&&i.default.createElement(c.default,{annotationId:t.id,currentScrollTop:this.props.currentScrollTop,isAutomaticallyScrollingComments:this.props.isAutomaticallyScrollingComments,isSelected:this.props.isSelected,key:t.id,managedTop:this.props.managedTop,onSelectAnnotation:this.props.onSelectAnnotation,pageHeight:this.props.pageHeight,rect:t.rect,viewportWidth:this.props.viewportWidth,widthExtension:x?16:24}),i.default.createElement(u.default,{annotationId:t.id,isVisible:x,left:this.props.viewportWidth,top:t.rect[1][1]+this.state.translateY,onCreateComment:this.handleCreateComment}),P&&this.props.commentsContainerRef&&this.props.commentsContainerRef.current&&i.default.createElement(p.default,{annotation:t,annotationId:this.props.id||t.id,canDelete:this.props.canDelete,canEdit:this.props.canEdit,commentReplies:this.props.commentReplies,commentsContainerRef:this.props.commentsContainerRef,shouldCommentGroupStack:this.props.shouldCommentGroupStack,iconColor:this.props.iconColor,isAnnotatable:this.props.isAnnotatable,isCommenting:this.state.isCommenting,isSelected:this.props.isSelected,isVisible:this.props.isVisible,managedTop:this.props.managedTop,onCommentBlur:this.handleCommentsContainerBlur,onCommentEscape:this.handleCommentEscape,onCommentFocus:this.handleCommentsContainerFocus,onCommentGroupBlur:this.handleCommentGroupBlur,onCommentGroupHeightChange:this.props.onCommentGroupHeightChange,onCommentGroupUnmount:this.props.onCommentGroupUnmount,onCommentSave:this.props.onCommentSave,onDeleteAnnotation:this.handleCommentDelete,onDeletePopupCancel:this.handleDeletePopupCancel,onDeletePopupConfirm:this.handleDeletePopupCancel,onHoverAnnotation:this.props.onHoverAnnotation,onSelectComment:this.setCommentState,rect:l,sessionUserObject:this.props.sessionUserObject}),i.default.createElement("div",{className:"SecondaryControlsContainer",style:{width:S?"auto":"0px"}},this.props.secondaryControls))}}]),t}();t.default=y},410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.saveComment=function(e){var t=e.annotationId,n=e.annotationPayload,r=e.inreplyto,i=(e.rect,this.props.annotation),a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.props.commentReplies),[i]).find(function(e){return e.id===t}),s=n.contents;return a?this.props.onUpdateAnnotation(this.props.viewportHeight,this.props.viewportScale,o({},a,n)):this.props.onCreateAnnotation(this.props.viewportHeight,this.props.viewportScale,{id:t,subject:"Comment",type:"commentReply",page:i.page,context:i.context,ctx_and_id:i.ctx_and_id,document_id:i.document_id,user_id:this.props.sessionUserObject.user_id,user_name:this.props.sessionUserObject.user_name,inreplyto:r,contents:s})}},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(46)),i=c(n(135)),a=c(n(50)),s=c(n(387)),l=(n(394),c(n(627))),u=c(n(626));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(625);var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleKeyDown=function(e){"Escape"===e.key&&o.props.onCancel()},o.handleCancelKeyDown=function(e){"Tab"===e.key&&(e.preventDefault(),o.okButton&&o.okButton.focus())},o.handleOkKeyDown=function(e){"Tab"===e.key&&(e.preventDefault(),o.cancelButton&&o.cancelButton.focus())},o.setCancelButtonRef=function(e){o.cancelButton=e},o.setOkButtonRef=function(e){o.okButton=e},o.setDivRef=function(e){o.div=e},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.cancelButton?this.cancelButton.focus():this.okButton&&this.okButton.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=(0,s.default)("GenericPopup","GenericPopup-"+this.props.severity),t=document.querySelector("#App"),n={alert:r.default.createElement(u.default,null),warning:r.default.createElement(l.default,null)},o=this.props.onConfirm&&r.default.createElement("button",{id:"GenericPopup-confirm-button",key:"confirmButton",className:"inst-button GenericPopup-button GenericPopup-confirm-button",onClick:this.props.onConfirm,ref:this.setOkButtonRef,"aria-label":(0,a.default)("Ok"),"aria-describedby":"GenericModal-message",onKeyDown:this.handleOkKeyDown},(0,a.default)("Ok")),c=[this.props.onCancel&&r.default.createElement("button",{id:"GenericPopup-cancel-button",key:"cancelButton",className:"inst-button GenericPopup-button",onClick:this.props.onCancel,ref:this.setCancelButtonRef,"aria-label":(0,a.default)("Cancel"),"aria-describedby":"GenericModal-message",onKeyDown:this.handleCancelKeyDown},(0,a.default)("Cancel")),o].filter(function(e){return!!e});return i.default.createPortal(r.default.createElement("div",null,r.default.createElement("div",{style:{position:"fixed",height:"100%",width:"100%",top:"0"}}),r.default.createElement("div",{className:e,tabIndex:-1,ref:this.setDivRef},n[this.props.severity],r.default.createElement("div",{style:{padding:"5px"}},r.default.createElement("p",{id:"GenericModal-message"},this.props.message),"function"==typeof this.props.onConfirm&&r.default.createElement("div",{style:{display:"flex"}},c)))),t)}}]),t}();t.default=d},442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.rect.right-this.props.rect.left,t=this.props.rect.bottom-this.props.rect.top;return a.default.createElement("rect",{x:this.props.rect.left,y:this.props.rect.top,width:e,height:t})}}]),t}();t.default=s},443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};n(616);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.isVisible?"#888":"none",t=window.location.hash.includes("resize")&&this.props.width>20&&this.props.height>20;return a.default.createElement("svg",{"aria-selected":this.props.isSelected,"aria-hidden":!0,className:"SelectionBox",style:{position:"absolute",width:this.props.width,height:this.props.height,zIndex:1}},a.default.createElement("g",null,a.default.createElement("rect",{className:"SelectionBox-rect",x:2,y:2,width:this.props.width-4,height:this.props.height-4,fillOpacity:"0",stroke:this.props.isVisible?"#bbb":"none",strokeDasharray:"3, 3",strokeWidth:1,strokeOpacity:"1"}),t&&a.default.createElement("g",null,a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-top-left",style:{cursor:"nwse-resize"},x:0,y:0,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-top-right",style:{cursor:"nesw-resize"},x:this.props.width-4,y:0,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-bottom-right",style:{cursor:"nwse-resize"},x:this.props.width-4,y:this.props.height-4,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-bottom-left",style:{cursor:"nesw-resize"},x:0,y:this.props.height-4,fill:e,width:4,height:4}))))}}]),t}();t.default=s},450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(504);var i=s(n(46)),a=s(n(396));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=function(e){n.setState(function(e){return o({},e,{isFocused:!0})})},n.handleBlur=function(){n.setState(function(e){return o({},e,{isFocused:!1})})},n.handleMouseEnter=function(e){n.setState(function(e){return o({},e,{isHovered:!0})})},n.handleMouseLeave=function(){n.setState(function(e){return o({},e,{isHovered:!1})})},n.handleClick=function(e){n.props.onClick(),n.button instanceof HTMLElement&&n.button.focus()},n.setButtonRef=function(e){e instanceof HTMLElement&&(n.button=e)},n.state={isHovered:!1,isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){return i.default.createElement("button",{className:this.props.className,onClick:this.handleClick,onTouchStart:this.handleMouseEnter,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":this.props.ariaLabel,title:this.props.title,ref:this.setButtonRef},this.props.children(this.state))}}]),t}();t.default=l,l.propTypes={title:a.default.string,ariaLabel:a.default.string,onClick:a.default.func,className:a.default.string}},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"Point",height:this.props.height,style:{color:"string"==typeof this.props.color?this.props.color:"#EE0612"},viewBox:"0 0 17 24",width:this.props.width,x:this.props.x,xmlns:"http://www.w3.org/2000/svg",y:this.props.y},a.default.createElement("path",{d:"M8.21 0C3.684 0 0 3.683 0 8.21c0 2.258 1.004 4.35 3.068 6.395 2.997 2.975 4.393 5.72 4.393 8.645V24h1.5v-.75c0-2.91 1.38-5.577 4.47-8.643 2.067-2.047 3.07-4.138 3.07-6.396C16.5 3.683 12.816 0 8.21 0",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(46),s=(o=a)&&o.__esModule?o:{default:o};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.rect[0]!==e.rect[0]||this.props.rect[1]!==e.rect[1]||this.props.rect[2]!==e.rect[2]||this.props.rect[3]!==e.rect[3]}},{key:"render",value:function(){var e=r(this.props.rect,4),t=r(e[0],2),n=t[0],o=t[1],i=r(e[1],2),a=i[0],l=i[1],u=r(e[2],2),c=(u[0],u[1]),p=r(e[3],2),d=(p[0],p[1]);return s.default.createElement("line",{x1:n,y1:(o+c)/2,x2:a,y2:(l+d)/2})}}]),t}();t.default=l},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(46)),i=s(n(50)),a=n(484);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.stopPropagation=function(e){e.stopPropagation()},o.handleAnnotationSave=function(e){e.stopPropagation(),"function"==typeof o.props.onCreateAnnotation&&o.props.onCreateAnnotation(e)},o.handleAnnotationDelete=function(e){o.props.onDeleteAnnotation(e)},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){return r.default.createElement("div",{onTouchStart:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onMouseUp:this.stopPropagation},r.default.createElement("div",{className:"AnnotationToolbar"},this.props.displayAuthorName&&r.default.createElement("div",{role:"tooltip",className:"AnnotationTooltip"},this.props.authorName),(this.props.canEdit||this.props.canDelete)&&r.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",boxSizing:"border-box"}},this.props.canEdit&&!0===this.props.displayCreateAnnotation&&this.props.onCreateAnnotation&&r.default.createElement("button",{className:"Annotation-button inst-button--flat","aria-label":(0,i.default)("create annotation"),onClick:this.handleAnnotationSave},r.default.createElement(a.CheckSVG,null)),r.default.createElement("button",{className:"Annotation-button inst-button--flat Delete-annotation-button","aria-label":(0,i.default)("delete annotation"),onClick:this.handleAnnotationDelete},r.default.createElement(a.DeleteSVG,{color:"white"})))))}}]),t}();t.default=u},484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSVG=t.DeleteSVG=t.EditSVG=void 0;var o=i(n(46)),r=i(n(50));function i(e){return e&&e.__esModule?e:{default:e}}t.EditSVG=function(){return o.default.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},o.default.createElement("title",null,(0,r.default)("Edit icon")),o.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{transform:"translate(-933.000000, -534.000000)",fillRule:"nonzero",fill:"#384A58"},o.default.createElement("path",{d:"M936.896694,535.1463 C936.701984,534.951091 936.385916,534.951091 936.190253,535.146753 L934.146253,537.190753 C933.951516,537.385491 933.951516,537.702909 934.146151,537.897544 L935.513597,539.264196 L938.264491,536.513303 L936.896694,535.1463 Z M947.076593,545.3252 L938.9717,537.220307 L935.513803,540.678204 L935.160249,540.324856 L933.439147,538.604753 C932.853884,538.019491 932.853884,537.068909 933.439147,536.483647 L935.483147,534.439647 C936.069484,533.853309 937.019416,533.853309 937.604151,534.439544 L938.443397,535.278303 L938.443653,535.278047 L939.325202,536.159595 L939.67891,536.513097 L949.108684,545.943077 L950.150563,551.150063 L944.943593,550.108187 L936.456568,541.622174 L937.163632,540.915026 L944.325627,548.076166 L947.076593,545.3252 Z M947.7837,546.032307 L945.032776,548.78323 L945.436607,549.187013 L948.875637,549.875137 L948.187516,546.436123 L947.7837,546.032307 Z M938.326647,540.033753 L939.033753,539.326647 L945.217753,545.510647 L944.510647,546.217753 L938.326647,540.033753 Z",id:"edit"}))))},t.DeleteSVG=function(e){var t=e.color,n=o.default.createElement("img",{alt:(0,r.default)("Delete icon"),src:"/images/icons/delete-icon.svg",style:{width:"16px",height:"16px"}}),i=o.default.createElement("img",{alt:(0,r.default)("Delete icon (white)"),src:"/images/icons/delete-icon-white.svg",style:{width:"16px",height:"16px"}});return t?i:n},t.CheckSVG=function(){return o.default.createElement("img",{alt:(0,r.default)("Check icon"),src:"/images/icons/check.svg",style:{width:"16px",height:"16px"}})}},485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(638);var r=s(n(135)),i=s(n(46)),a=s(n(636));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleCreateComment=function(){o.props.onSelectComment(!0)},o.setDivRef=function(e){e instanceof HTMLElement&&(o.div=e)},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"componentWillUnmount",value:function(){this.props.onCommentBlur&&this.props.onCommentBlur()}},{key:"render",value:function(){var e=this.props.commentReplies&&this.props.commentReplies.length>0,t=this.props.canEdit&&this.props.isSelected,n=e||this.props.isCommenting||t||this.props.annotation.deleted,o=i.default.createElement("div",{className:"CommentsContainer",onBlur:this.props.onCommentBlur,onFocus:this.props.onCommentFocus,ref:this.setDivRef},i.default.createElement("div",{className:"CommentsContainer-inside",style:{}},n&&i.default.createElement(a.default,{annotation:this.props.annotation,annotationId:this.props.annotationId,canDelete:this.props.canDelete,canEdit:this.props.canEdit,shouldCommentGroupStack:this.props.shouldCommentGroupStack,commentReplies:this.props.commentReplies,iconColor:this.props.iconColor,isAnnotatable:this.props.isAnnotatable,isCommenting:this.props.isCommenting,isSelected:this.props.isSelected,isVisible:this.props.isVisible,key:this.props.annotationId,managedTop:this.props.managedTop,onCommentEscape:this.props.onCommentEscape,onCommentGroupBlur:this.props.onCommentGroupBlur,onCommentGroupHeightChange:this.props.onCommentGroupHeightChange,onCommentGroupUnmount:this.props.onCommentGroupUnmount,onCommentSave:this.props.onCommentSave,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeletePopupCancel:this.props.onDeletePopupCancel,onDeletePopupConfirm:this.props.onDeletePopupConfirm,onHoverAnnotation:this.props.onHoverAnnotation,onSelectComment:this.props.onSelectComment,sessionUserObject:this.props.sessionUserObject,top:this.props.rect[1][1]})));return r.default.createPortal(o,this.props.commentsContainerRef.current)}}]),t}();t.default=u},486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(643);var r=u(n(46)),i=u(n(641)),a=u(n(640)),s=u(n(639)),l=n(134);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.managedTop-this.props.rect[1][1]-this.props.currentScrollTop;if(e>=l.DEFAULT_LINE_WIDTH){var t=this.props.pageHeight-this.props.rect[1][1],n=t<e?t-l.COMMENT_LINE_TOP_OFFSET/2:e;return!1===this.props.isAutomaticallyScrollingComments&&r.default.createElement(i.default,{annotationId:this.props.annotationId,height:n,isSelected:this.props.isSelected,rect:this.props.rect,viewportWidth:this.props.viewportWidth,widthExtension:this.props.widthExtension})}if(e<-l.DEFAULT_LINE_WIDTH){var o=this.props.rect[1][1]-this.props.managedTop+this.props.currentScrollTop,u=this.props.rect[1][1]<o?this.props.rect[1][1]:o,c=this.props.managedTop-this.props.currentScrollTop;return!1===this.props.isAutomaticallyScrollingComments&&r.default.createElement(a.default,{annotationId:this.props.annotationId,managedTop:c<-l.COMMENT_LINE_TOP_OFFSET?-l.COMMENT_LINE_TOP_OFFSET:c,height:u,isSelected:this.props.isSelected,rect:this.props.rect,viewportWidth:this.props.viewportWidth,widthExtension:this.props.widthExtension})}return r.default.createElement(s.default,{annotationId:this.props.annotationId,height:e,isSelected:this.props.isSelected,rect:this.props.rect,viewportWidth:this.props.viewportWidth,widthExtension:this.props.widthExtension})}}]),t}();t.default=c},487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(46)),i=s(n(649)),a=n(394);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.points,t=this.props.strokeColor||"#000000",n=void 0;return n=e.length>=6?function(e,t,n){for(var o=[],s=(0,a.multiplyPath)((0,a.multiplyPath)(e)),l=0;l<s.length-3;l+=3){var u=s.slice(l,l+4);4===u.length&&o.push(s.slice(l,l+4))}return o.map(function(e,o){var a=e[0].x+" "+e[0].y,s=e[1].x+" "+e[1].y+" "+e[2].x+" "+e[2].y+" "+e[3].x+" "+e[3].y,l="M "+a+" C "+s,u="number"==typeof e[1].width?e[1].width:n,c="number"==typeof e[1].opacity?e[1].opacity:1;return r.default.createElement("g",{key:o},r.default.createElement(i.default,{d:l,strokeColor:t,strokeWidth:u,strokeOpacity:c}),r.default.createElement("path",{className:"hitpath",fill:"none",stroke:t,d:l,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.001}))})}(e,t,this.props.strokeWidth):function(e,t,n){return e.reduce(function(e,t){return e.length?e.concat([[e[e.length-1][1],t]]):[[null,t]]},[]).slice(1).map(function(e,o){var a="M "+e[0].x+" "+e[0].y+" L "+e[1].x+" "+e[1].y;return r.default.createElement("g",{key:"g-"+o},r.default.createElement(i.default,{key:"path-"+o,d:a,strokeColor:t,strokeOpacity:"number"==typeof e[1].opacity?e[1].opacity:1,strokeWidth:"number"==typeof e[1].width?e[1].width:n}),r.default.createElement("path",{className:"hitpath",d:a,fill:"none",opacity:.001,stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12}))})}(e,t,this.props.strokeWidth),r.default.createElement("g",{className:"Shape"},n)}}]),t}();t.default=l},504:function(e,t,n){var o=n(726);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"13px",height:"17px",viewBox:"0 0 13 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{color:this.props.color}},a.default.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.default.createElement("g",{transform:"translate(-18.000000, -16.000000)",fill:"currentColor"},a.default.createElement("polygon",{points:"18 16 30.6285714 16 30.6285714 20.4442857 28.8314286 20.4442857 28.8314286 17.7971429 25.31 17.7971429 25.31 31.2028571 27.9814286 31.2028571 27.9814286 33 20.6228571 33 20.6228571 31.2028571 23.2942857 31.2028571 23.2942857 17.7971429 19.7971429 17.7971429 19.7971429 20.4442857 18 20.4442857"}))))}}]),t}();t.default=s},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M15.294 0v1.176H4.706V0H0v4.707h1.176v10.588H0V20h4.706v-1.176h10.588V20H20v-4.705h-1.175V4.707H20V0h-4.706zM2.354 4.707h2.352V2.353h10.588v2.354h2.354v10.588h-2.354v2.352H4.706v-2.352H2.353V4.707z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"19",height:"18",viewBox:"0 0 19 18",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M17.907.476c.39.39.56.844.54 1.35-.107 2.512-4.772 7.114-8.33 10.26-.23-.624-.61-1.31-1.203-2.05l-.083-.094c-.77-.77-1.624-1.298-2.522-1.55C9.178 5.14 14.034.104 16.608 0c.53-.012.962.145 1.3.474zM7.86 10.912l.043.047c1.12 1.405 1.436 2.68.94 3.786-1.238 2.76-7.116 3.16-7.783 3.195L0 18l.594-.882c.01-.015 1.01-1.525 1.01-4.105 0-1.362.89-2.686 2.164-3.218C5.09 9.24 6.583 9.65 7.86 10.912z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"18",height:"17",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M11.5 11.266c.133.394.127.857-.028 1.42-.286 1.02-.832 1.624-1.67 1.846-1.43.375-3.35-.414-4.276-1.332l-.46-.496-1.648 1.534.49.525c1.144 1.136 3.167 2.11 5.128 2.11.455 0 .906-.05 1.34-.166 1.607-.424 2.765-1.638 3.264-3.42.2-.72.24-1.39.152-2.02h-2.29zM18 7.89v2.25H0V7.89h5.266c-1.27-.907-2.125-2.283-1.47-4.49C4.427 1.28 5.867.48 6.965.18c2.323-.625 5.096.454 6.53 1.792l-1.536 1.644c-.986-.92-2.993-1.65-4.405-1.263-.804.218-1.327.77-1.6 1.685-.51 1.718.626 2.362 3.542 3.24.666.2 1.252.38 1.725.61H18z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"18",height:"20",viewBox:"0 0 18 20",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M0 20h17.708v-1.18H0V20zm3.83-5.508l1.493.996-.628.97H2.26l1.57-1.966zM2.11 17.64H5.34l1.284-1.988.622-.93c.17-.257.47-.393.757-.337.8.15 1.607-.23 2.007-.92L16 4.052c.42-.726.215-1.652-.47-2.11L13.003.256c-.684-.453-1.618-.29-2.12.37l-6.94 8.766c-.496.654-.534 1.55-.092 2.224.16.247.152.573-.018.83l-.607.91-1.98 2.483c-.27.335-.32.785-.134 1.172.188.386.57.627 1 .627z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"PointIcon",height:"24",viewBox:"0 0 17 24",width:"17",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M8.21 0C3.684 0 0 3.683 0 8.21c0 2.258 1.004 4.35 3.068 6.395 2.997 2.975 4.393 5.72 4.393 8.645V24h1.5v-.75c0-2.91 1.38-5.577 4.47-8.643 2.067-2.047 3.07-4.138 3.07-6.396C16.5 3.683 12.816 0 8.21 0",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=Object.assign({},this.props.style||{},{width:"2px",height:"26px",color:"#ABB3BA"});return a.default.createElement("svg",{viewBox:"0 0 2 26",style:e},a.default.createElement("line",{stroke:"currentColor",strokeDasharray:"2, 1",strokeWidth:"1",x1:"1",y1:"0",x2:"1",y2:"26"}))}}]),t}();t.default=s},544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_DOCUMENT_PENDING="GET_DOCUMENT_PENDING",t.GET_DOCUMENT_SUCCESS="GET_DOCUMENT_SUCCESS",t.GET_DOCUMENT_ERROR="GET_DOCUMENT_ERROR",t.GET_PAGE_PENDING="GET_PAGE_PENDING",t.GET_PAGE_SUCCESS="GET_PAGE_SUCCESS",t.GET_PAGE_ERROR="GET_PAGE_ERROR",t.GET_TEXT_CONTENT_PENDING="GET_TEXT_CONTENT_PENDING",t.GET_TEXT_CONTENT_SUCCESS="GET_TEXT_CONTENT_SUCCESS",t.GET_TEXT_CONTENT_ERROR="GET_TEXT_CONTENT_ERROR",t.UPDATE_PAGE_NUMBER="UPDATE_PAGE_NUMBER",t.SCALE_PAGE="SCALE_PAGE",t.SET_SCALE="SET_SCALE",t.SET_PAGE_ROTATION="SET_PAGE_ROTATION",t.SET_ALL_PAGE_ROTATIONS="SET_ALL_PAGE_ROTATIONS"},545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_ANNOTATIONS_PENDING="GET_ANNOTATIONS_PENDING",t.GET_ANNOTATIONS_SUCCESSFUL="GET_ANNOTATIONS_SUCCESSFUL",t.GET_ANNOTATIONS_ERROR="GET_ANNOTATIONS_ERROR",t.START_ANNOTATION="START_ANNOTATION",t.STAGE_ANNOTATION="STAGE_ANNOTATION",t.SELECT_ANNOTATION="SELECT_ANNOTATION",t.DESELECT_ANNOTATION="DESELECT_ANNOTATION",t.CREATE_ANNOTATION_PENDING="CREATE_ANNOTATION_PENDING",t.CREATE_ANNOTATION_SUCCESS="CREATE_ANNOTATION_SUCCESS",t.CREATE_ANNOTATION_ERROR="CREATE_ANNOTATION_ERROR",t.CREATE_ANNOTATION_FORBIDDEN="CREATE_ANNOTATION_FORBIDDEN",t.UPDATE_ANNOTATION_PENDING="UPDATE_ANNOTATION_PENDING",t.UPDATE_ANNOTATION_SUCCESS="UPDATE_ANNOTATION_SUCCESS",t.UPDATE_ANNOTATION_ERROR="UPDATE_ANNOTATION_ERROR",t.DELETE_ANNOTATION_PENDING="DELETE_ANNOTATION_PENDING",t.DELETE_ANNOTATION_SUCCESS="DELETE_ANNOTATION_SUCCESS",t.DELETE_ANNOTATION_ERROR="DELETE_ANNOTATION_ERROR",t.DELETE_ROOT_COMMENT_SUCCESS="DELETE_ROOT_COMMENT_SUCCESS",t.HOVER_ANNOTATION="HOVER_ANNOTATION",t.GENERATE_MERGED_PDF_PENDING="GENERATE_MERGED_PDF_PENDING",t.GENERATE_MERGED_PDF_SUCCESSFUL="GENERATE_MERGED_PDF_SUCCESSFUL",t.GENERATE_MERGED_PDF_DONE="GENERATE_MERGED_PDF_DONE",t.GENERATE_MERGED_PDF_ERROR="GENERATE_MERGED_PDF_ERROR",t.MERGED_PDF_READY="MERGED_PDF_READY",t.MERGED_PDF_TIMED_OUT="MERGED_PDF_TIMED_OUT"},586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"ArrowUp--svg",width:11,height:17},a.default.createElement("path",{d:"M4.854 16.707V1.915L.708 6.061 0 5.353 5.353 0l5.355 5.353-.708.708-4.146-4.146v14.792z",fill:"#2D3B45",fillRule:"evenodd"}))}}]),t}();t.default=s},587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"ArrowDown--svg",width:11,height:17},a.default.createElement("path",{d:"M4.854 0v14.792L.708 10.646 0 11.354l5.353 5.353 5.355-5.353-.708-.708-4.146 4.146V0z",fill:"#2D3B45",fillRule:"evenodd"}))}}]),t}();t.default=s},588:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".CommentIndicator{position:absolute;z-index:1;-webkit-transform:translate(50%,70%);transform:translate(50%,70%);width:200px;color:#484848;font-weight:300}.ArrowIconContainer{float:left;margin-right:10px}",""])},589:function(e,t,n){var o=n(588);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(46)),i=a(n(50));function a(e){return e&&e.__esModule?e:{default:e}}n(589);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return this.props.numberOfCommentsOutOfView>0&&r.default.createElement("div",{className:"CommentIndicator"},r.default.createElement("div",{className:"ArrowIconContainer"},this.props.children),r.default.createElement("div",{className:"CommentIndicator--text"},this.props.numberOfCommentsOutOfView>1?(0,i.default)("{numberOfComments} More Comments",{numberOfComments:this.props.numberOfCommentsOutOfView}):(0,i.default)("1 More Comment")))}}]),t}();t.default=s},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(46)),i=l(n(528)),a=l(n(414)),s=n(391);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleScroll=function(){if(o.pagesContainer instanceof HTMLElement!=!1){var e=o.pagesContainer.getBoundingClientRect(),t=o.props.pageDiv.getBoundingClientRect(),n=t.top-e.top,r=e.bottom-t.bottom,i=n>=0&&n<=(0,s.getCachedClientHeight)(o.pagesContainer),a=r>=0&&r<=e.height,l=n<0&&r<0,u=0;i&&a?u=1:i?u=((0,s.getCachedClientHeight)(o.pagesContainer)-n)/t.height:a?u=((0,s.getCachedClientHeight)(o.pagesContainer)-r)/t.height:l&&(u=(0,s.getCachedClientHeight)(o.pagesContainer)/t.height),o.props.onVisibilityChange(u)}},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){this.handleScrollThrottled=(0,a.default)(this.handleScroll,200,{leading:!0})}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".Pages");this.pagesContainer=t;var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(window.IntersectionObserver&&!1===n){var o=(0,i.default)(0,1.1,.1).map(function(e){return Math.round(10*e)/10});this.observer=new window.IntersectionObserver(function(t){t.forEach(function(t){e.props.onVisibilityChange(t.intersectionRatio)})},{root:this.pagesContainer,threshold:o}),this.observer.observe(this.props.pageDiv)}else window.addEventListener("resize",this.handleScrollThrottled),t instanceof HTMLElement&&this.pagesContainer.addEventListener("scroll",this.handleScrollThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleScrollThrottled),this.pagesContainer instanceof HTMLElement&&this.pagesContainer.removeEventListener("scroll",this.handleScrollThrottled),delete this.pagesContainer}},{key:"render",value:function(){return null}}]),t}();t.default=c},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getCursorXOffset=d,t.getCursorYOffset=f,t.getPosition=h,t.flatten=m,t.getPressure=g,t.getTextSelectionRectangles=v,t.returnRectangleRange=w,t.createPointPlacement=C,t.createFreetextPlacement=E,t.isTooSmall=_,t.createAreaAnnotation=function(e,t,n,o){var r=t[0],s=r[r.length-1],u=(0,i.default)([r[0].x,s.x]),c=(0,a.default)([r[0].x,s.x]),p=(0,i.default)([r[0].y,s.y]),d=(0,a.default)([r[0].y,s.y]);return _(u,c,p,d,5)?null:{id:e,type:"square",color:"string"==typeof n?n:l.DEFAULT_AREA_ANNOTATION_COLOR,opacity:1,rect:[[u,d],[c,p]],subject:"Rectangle",width:o}},t.createPointAnnotation=function(e,t,n,o){var r=t[0],i=r[r.length-1];return{id:e,type:"text",rect:C(i,n),subject:"Comment",icon:"Comment",color:"string"==typeof o?o:l.DEFAULT_POINT_ANNOTATION_COLOR}},t.createHighlightAnnotation=function(e,t,n,o,i,a,u){var c=v().map(b(a)).filter(y(t,n)),d=(u||[]).map(b(a)).filter((0,s.intersectsWithSome)(c)),f=c.sort(function(e,t){return e.left<t.left?-1:1}).sort(function(e,t){return e.bottom<t.bottom?-1:1}).reduce((0,s.getRectangleIntersections)(d),p).reduce(s.horizontallyConnectRects,[]).reduce(s.removeNeedlessRectOverlapping,[]).filter(s.withoutEmptyRects);if(!f.length)return null;var h=w(f),m=r(h,4),g=m[0],C=m[1],E=m[2],A=m[3];return _(g,C,E,A,5)?null:{id:e,type:"highlight",rect:[[g,A],[C,E]],coords:f.map(function(e){return[[e.left,e.bottom],[e.right,e.bottom],[e.left,e.top],[e.right,e.top]]}),color:"string"==typeof i?i:l.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,subject:"Highlight"}},t.createStrikeoutAnnotation=function(e,t,n,o,i,a,u){var c=v().map(b(a)).filter(y(t,n)),d=u.map(b(a)).filter((0,s.intersectsWithSome)(c)),f=c.sort(function(e,t){return e.left<t.left?-1:1}).sort(function(e,t){return e.bottom<t.bottom?-1:1}).reduce((0,s.getRectangleIntersections)(d),p).reduce(s.horizontallyConnectRects,[]).reduce(s.removeNeedlessRectOverlapping,[]).filter(s.withoutEmptyRects);if(!f.length)return null;var h=w(f),m=r(h,4),g=m[0],C=m[1],E=m[2],A=m[3];return _(g,C,E,A,5)?null:{id:e,type:"strikeout",rect:[[g,A],[C,E]],coords:f.map(function(e){return[[e.left,e.bottom],[e.right,e.bottom],[e.left,e.top],[e.right,e.top]]}),color:"string"==typeof i?i:l.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,subject:"Strikeout"}},t.createInkAnnotation=function(e,t,n,o){var r=t.map(function(e){return e.map(function(e){var t={x:e.x,y:e.y};return"number"==typeof e.width&&(t.width=e.width),t})}),s=m(t.map(function(e){return e.map(function(e){return e.x})})),u=m(t.map(function(e){return e.map(function(e){return e.y})})),c=(0,i.default)(s),p=(0,a.default)(s),d=(0,i.default)(u),f=(0,a.default)(u);return _(c,p,d,f,2)?null:{id:e,type:"ink",color:"string"==typeof n?n:l.DEFAULT_INK_ANNOTATION_COLOR,rect:[[c,f],[p,d]],inklist:{gestures:r},subject:"Free Hand",width:o||2}},t.createFreetextAnnotation=function(e){var t=e.id,n=e.paths,o=(e.viewportHeight,e.viewportWidth,e.viewportScale),r=e.color,i=e.bgColor,a=e.font,s=(e.strokeWidth,e.divPosition,e.textLayerDivRects,n[0]),u=s[s.length-1];return{id:t,type:"freetext",color:"string"==typeof r?r:l.DEFAULT_FREETEXT_ANNOTATION_COLOR,bgColor:"string"==typeof i?i:l.DEFAULT_FREETEXT_BACKGROUND_COLOR,rect:E(u,o),subject:"FreeText",font:a||l.DEFAULT_FONT,"text-align":"left"}},t.getPointFromEvent=function(e,t,n,r){var i=h(e),a=void 0,s=void 0;if(null!==t.targetTouches&&"object"===o(t.targetTouches)&&"function"==typeof t.targetTouches.item){var l=t.targetTouches.item(0);if(s=g(l),"number"!=typeof l.clientX||"number"!=typeof l.clientY)return console.warn("clientX or clientY missing from touch"),{x:0,y:0};a={x:l.clientX-i.x,y:l.clientY-i.y}}else{if(s=g(t),"number"!=typeof t.clientX||"number"!=typeof t.clientY)return console.warn("clientX or clientY missing from event"),{x:0,y:0};var c=t.clientX,p=t.clientY,m=(0,u.isPenEvent)(t);a={x:c-i.x+d(n,m),y:p-i.y+f(n,m)}}.5!==s&&(a.width=s*r*2,"number"==typeof t.tiltX&&t.tiltX>0&&(a.width*=1+Math.abs(t.tiltX)/90),"number"==typeof t.tiltY&&t.tiltY>0&&(a.width*=1+Math.abs(t.tiltY)/90));return a};var i=c(n(543)),a=c(n(541)),s=n(394),l=n(134),u=n(391);function c(e){return e&&e.__esModule?e:{default:e}}var p=[];function d(e,t){return 0}function f(e,t){switch(e){case"ink":return t?0:15;default:return 0}}function h(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function m(e){return e.reduce(function(e,t){return e.concat(t)},p)}function g(e){if("number"==typeof e.pressure)return 0===e.pressure?.5:e.pressure;if("number"==typeof e.force)return 0===e.pressure?.5:e.force;var t=e.nativeEvent instanceof Event?e.nativeEvent:e;if("number"==typeof t.webkitForce){var n=t.webkitForce>1?Math.sqrt(t.webkitForce-1):t.webkitForce;return 0===n?.5:n}return.5}function v(){var e=window.getSelection();if(!e.rangeCount)return p;var t=e.getRangeAt(0);return Array.from(t.getClientRects())}function y(e,t){return function(n){return n.left>1&&n.right<t-1&&n.bottom-n.top<e&&n.right-n.left<t}}function b(e){return function(t){return{left:t.left-e.x,top:t.top-e.y,right:t.right-e.x,bottom:t.bottom-e.y}}}function w(e){return[(0,i.default)(e.map(function(e){return e.left})),(0,a.default)(e.map(function(e){return e.right})),(0,i.default)(e.map(function(e){return e.top})),(0,a.default)(e.map(function(e){return e.bottom}))]}function C(e,t){var n=4.66666*t,o=6.66666*t;return[[e.x-n,e.y+o],[e.x+n,e.y-o]]}function E(e,t){var n=4.66666*t,o=10.33333*t;return[[e.x-n,e.y+o],[e.x+n,e.y-o]]}function _(e,t,n,o,r){return Math.abs(e-t)<r&&Math.abs(n-o)<r}},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){if(this.props.path.length<2)return null;var e=this.props.path[0],t=this.props.path[this.props.path.length-1],n="M "+e.x+" "+e.y+" L "+t.x+" "+e.y+" L "+t.x+" "+t.y+" L "+e.x+" "+t.y+" z";return a.default.createElement("path",{d:n,fill:"transparent",stroke:this.props.strokeColor||"red",strokeWidth:this.props.strokeWidth||2})}}]),t}();t.default=s},594:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".Draw{position:absolute;background-color:transparent;left:0;top:0}.Draw--area .Annotation,.Draw--freetext .Annotation,.Draw--ink .Annotation,.Draw--point .Annotation{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.Draw--area .textLayer,.Draw--freetext .textLayer,.Draw--ink .textLayer,.Draw--point .textLayer{pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.Draw--area .PageAnnotations,.Draw--area .TextLayer-container{cursor:crosshair}.Draw--freetext .TextLayer-container{cursor:text}.Draw--point .TextLayer-container{cursor:none}.Draw--ink .TextLayer-container,.Draw--is-drawing.Draw--ink .Draw-svg{cursor:url(/images/draw-cursor.svg),auto}.Draw--ink.Draw--is-drawing .Draw-svg{z-index:2}.Draw--highlight .Draw--svg-container{mix-blend-mode:multiply}.Draw--highlight .textLayer>div::selection,.Draw--strikeout .textLayer>div::selection{background-color:transparent}.Draw--highlight .textLayer>div::-moz-selection,.Draw--strikeout .textLayer>div::-moz-selection{background-color:transparent}.Draw--not-drawing .Draw--highlight-group,.Draw--not-drawing .Draw--strikeout-group{display:none}",""])},595:function(e,t,n){var o=n(594);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(595);var s=b(n(46)),l=b(n(487)),u=b(n(593)),c=b(n(482)),p=b(n(442)),d=b(n(481)),f=n(394),h=b(n(449)),m=n(592),g=n(391),v=n(134),y=b(n(387));function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=["area","freetext","highlight","ink","point","strikeout"],E=["highlight","strikeout"],_={drawings:[],isDrawing:!1,isPointerDown:!1,paths:[],temporaryAnnotationId:""},A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleContextMenu=function(e){0===e.buttons&&n.props.shouldBlockContextMenu&&(e.preventDefault(),"selection"===n.props.type&&n.props.onBlockContextMenu(!1))},n.componentDidMount=function(){var e=n.div;if(e instanceof HTMLElement!=!1){e.addEventListener("contextmenu",n.handleContextMenu),e.addEventListener("pointerdown",n.handlePointerDown),e.addEventListener("pointermove",n.handlePointerMove),e.addEventListener("pointerleave",n.handlePointerLeave),document.addEventListener("pointerup",n.handlePointerUp),document.addEventListener("pointercancel",n.handlePointerLeave),document.addEventListener("mouseup",n.handleMouseUp),document.addEventListener("keydown",n.handleKeyDown),document.addEventListener("selectionchange",n.handleSelectionChange);var t=document.querySelector(".Pages");t instanceof HTMLElement&&t.addEventListener("scroll",n.handleScroll)}},n.componentWillUnmount=function(){if(n.div instanceof HTMLElement!=!1){var e=n.div;e.removeEventListener("contextmenu",n.handleContextMenu),e.removeEventListener("pointerdown",n.handlePointerDown),e.removeEventListener("pointermove",n.handlePointerMove),e.removeEventListener("pointerleave",n.handlePointerLeave),document.removeEventListener("pointercancel",n.handlePointerLeave),document.removeEventListener("pointerup",n.handlePointerUp),document.removeEventListener("mouseup",n.handleMouseUp),document.removeEventListener("keydown",n.handleKeyDown),document.removeEventListener("selectionchange",n.handleSelectionChange);var t=document.querySelector(".Pages");t instanceof HTMLElement&&t.removeEventListener("scroll",n.handleScroll)}},n.handleScroll=function(){if(!1===["highlight","strikeout"].includes(n.props.type))return!1;n.ensureTextLayerDivRects(),n.handleSelectionChange()},n.handleSelectionChange=function(){var e=window.getSelection();if(e instanceof Selection&&e.rangeCount>0&&!1===e.isCollapsed){var t=e.getRangeAt(0);e.rangeCount&&n.div instanceof HTMLElement&&n.div.contains(t.commonAncestorContainer)&&n.forceUpdate()}},n.handleKeyDown=function(e){"Escape"===e.key&&n.state.isDrawing&&(n.props.onMultiStrokeAnnotation(null),n.props.onDrawingEnd(),n.textLayerDivRects=[],n.setState(_))},n.handleMouseDown=function(e){window.PointerEvent||(e.stopPropagation(),n.handlePointerDown(e))},n.ensureTextLayerDivRects=function(){if(n.div instanceof HTMLElement!=!1){var e=n.div.querySelectorAll(".textLayer > div");n.textLayerDivRects=[].concat(w(e)).map(function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top+parseFloat(e.style.paddingTop||0),right:t.right,bottom:t.bottom-parseFloat(e.style.paddingBottom||0)}})}},n.handlePointerDown=function(e){if(!(0,g.isTouchEvent)(e)){if((0,g.isPenEvent)(e)&&"selection"!==n.props.type&&n.props.onIsPenAnnotatingChange(!0),n.state.isDrawing||!1===C.includes(n.props.type)||n.props.isHoveringOverAnnotation||e.target instanceof HTMLElement&&e.target.closest(".AnnotationToolbar")instanceof HTMLElement)return n.setState({isPointerDown:!0}),!1;if(E.includes(n.props.type)&&n.ensureTextLayerDivRects(),n.div instanceof HTMLElement==!1)throw new Error("div missing in <Draw>");var t=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);if(t.x<0||t.x>n.props.viewportWidth||t.y<0||t.y>n.props.viewportHeight)return console.warn("point out of bounds"),!1;var o="string"==typeof n.props.multiStrokeAnnotationId&&n.state.drawings.length>0?n.state.temporaryAnnotationId:h.default.v4();n.props.onDrawingStart(),n.setState(function(e){return i({},e,{temporaryAnnotationId:o,isDrawing:!0,isPointerDown:!0,paths:[[t]]})},function(){"ink"===n.props.type&&n.props.onMultiStrokeAnnotation(o)})}},n.handleMouseMove=function(e){if(window.PointerEvent)return!1;n.handlePointerMove(e)},n.handlePointerMove=function(e){if(["highlight","strikeout"].includes(n.props.type))return!1;var t="selection"!==n.props.type;if(!t||!(0,g.isTouchEvent)(e))if(t&&!1===n.isPenActive&&(0,g.isPenEvent)(e)&&(n.isPenActive=!0,n.props.onIsPenAnnotatingChange(!0)),"point"!==n.props.type){if(!1===n.state.isDrawing)return!1;e.preventDefault();var o=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);n.setState(function(e){return i({},e,{paths:[(n.state.paths&&n.state.paths[0]||[]).concat([o])]})})}else{if(n.div instanceof HTMLElement==!1)return void console.warn("<div> unexpectedly missing in <Draw>");e.preventDefault();var r=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);n.setState(function(e){return i({},e,{paths:[[r]]})})}},n.handleMouseUp=function(e){return!1===C.includes(n.props.type)?n.setState({isPointerDown:!1}):!window.PointerEvent&&void n.handlePointerUp(e)},n.handlePointerUp=function(e){if((0,g.isPenEvent)(e)&&(n.isPenActive=!1),!1===n.state.isDrawing)return n.setState({isPointerDown:!1});if("ink"!==n.props.type){if(!1===C.includes(n.props.type))return!1;n.handleCreateAnnotation(),n.props.onDrawingEnd(),n.setState({isDrawing:!1})}else n.addStrokeToInkAnnotation()},n.addStrokeToInkAnnotation=function(){1===n.state.paths.length&&n.state.paths[0].length>=1&&n.setState(function(e){return i({},e,{drawings:[].concat(w(n.state.drawings),[n.state.paths[0]]),isDrawing:!1,paths:[]})},function(){n.handleCreateAnnotation()})},n.handleCreateAnnotation=function(){if(n.div instanceof HTMLElement!=!1){var e="ink"===n.props.type,t=n.state.paths,o=n.props.currentColor,r=n.props.currentBgColor,a=n.props.currentFont,s=n.props.strokeWidth,l=n.props.viewportHeight,u=n.props.viewportWidth,c=n.props.viewportScale,p=(0,m.getPosition)(n.div),d=n.textLayerDivRects,f=void 0;switch(n.props.type){case"ink":f=(0,m.createInkAnnotation)(h.default.v4(),n.state.drawings,o,s);break;case"point":f=(0,m.createPointAnnotation)(h.default.v4(),t,c,o);break;case"area":f=(0,m.createAreaAnnotation)(h.default.v4(),t,o,s);break;case"strikeout":f=(0,m.createStrikeoutAnnotation)(h.default.v4(),l,u,c,o,p,d);break;case"highlight":f=(0,m.createHighlightAnnotation)(h.default.v4(),l,u,c,o,p,d);break;case"freetext":f=(0,m.createFreetextAnnotation)({id:h.default.v4(),paths:t,viewportHeight:l,viewportWidth:u,viewportScale:c,color:o,bgColor:r,font:a,strokeWidth:s,divPosition:p,textLayerDivRects:d});break;default:throw new Error("invalid annotation type")}null!=f&&(n.props.onChange(i({},f,{id:e&&n.state.temporaryAnnotationId})),n.props.onDrawingEnd()),setTimeout(function(){!1===e&&n.setState(_)},0)}},n.handlePointerLeave=function(e){n.isPenActive=!1,(0,g.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!1),"point"===n.props.type?n.setState(_):E.includes(n.props.type)&&(n.forceUpdate(),setTimeout(function(){n.forceUpdate()},0))},n.handleMouseOut=function(e){window.Pointer||n.handlePointerLeave()},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)},n.isPenActive=!1,n.textLayerDivRects=[],n.state={drawings:[],isDrawing:!1,isPointerDown:!1,paths:[],strokeWidth:e.strokeWidth,temporaryAnnotationId:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldBeRendered}},{key:"componentWillReceiveProps",value:function(e){this.props.currentColor!==e.currentColor?this.setState(function(t){return i({},t,{color:e.currentColor})}):"string"==typeof this.props.multiStrokeAnnotationId&&this.props.multiStrokeAnnotationId!==e.multiStrokeAnnotationId&&this.setState(_)}},{key:"componentDidUpdate",value:function(e){if("selection"===e.type&&E.includes(this.props.type)){var t=window.getSelection();if(t instanceof Selection&&t.rangeCount&&!1===t.isCollapsed){var n=t.getRangeAt(0),o=this.div.contains(n.commonAncestorContainer)||this.div.contains(n.commonAncestorContainer.parentNode);this.div instanceof HTMLElement&&o&&(this.ensureTextLayerDivRects(),this.handleCreateAnnotation())}}"selection"!==e.type&&"selection"===this.props.type&&this.props.onBlockContextMenu(!1),"selection"===e.type&&"selection"!==this.props.type&&this.props.onBlockContextMenu(!0)}},{key:"render",value:function(){var e=this,t=[];if("point"===this.props.type&&this.state.paths.length>0){var n=(0,m.createPointAnnotation)(h.default.v4(),this.state.paths,this.props.viewportScale,this.props.currentColor);if(null!==n&&n.rect instanceof Array){var i=r(n.rect,2),a=r(i[0],2),g=a[0],b=a[1],w=r(i[1],2),C=w[0],E=w[1],_=C-g,A=b-E;t=[s.default.createElement("g",{key:"point",role:"presentation",width:_,height:A},s.default.createElement(d.default,{x:g+2,y:E+2,width:_,height:A,color:"string"==typeof this.props.currentColor?this.props.currentColor:n.color}))]}}if("ink"===this.props.type&&this.state.paths.length>0&&(t=this.state.paths.map(function(t,n){return s.default.createElement(l.default,{key:e.state.temporaryAnnotationId+"-"+n,strokeColor:"string"==typeof e.props.currentColor?e.props.currentColor:v.DEFAULT_INK_ANNOTATION_COLOR,strokeWidth:e.props.strokeWidth,points:t})})),"area"===this.props.type&&(t=this.state.paths.map(function(t,n){return s.default.createElement(u.default,{key:e.state.temporaryAnnotationId+"-"+n,strokeColor:"string"==typeof e.props.currentColor?e.props.currentColor:v.DEFAULT_AREA_ANNOTATION_COLOR,strokeWidth:e.props.strokeWidth,path:t})})),"strikeout"===this.props.type&&this.textLayerDivRects.length>0){var x=(0,m.createStrikeoutAnnotation)(h.default.v4(),this.props.viewportHeight,this.props.viewportWidth,this.props.viewportScale,this.props.currentColor,(0,m.getPosition)(this.div),this.textLayerDivRects);null!==x&&(t=x.coords.map(function(t,n){return s.default.createElement("g",{className:"Draw--strikeout-group",key:e.state.temporaryAnnotationId+"-"+n,role:"presentation",fillOpacity:1,stroke:"string"==typeof e.props.currentColor?e.props.currentColor:v.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,strokeWidth:"1.5"},s.default.createElement(c.default,{strokeColor:e.props.currentColor,strokeWidth:e.props.strokeWidth,rect:t}))}))}if("highlight"===this.props.type&&this.textLayerDivRects.length>0){var O=(0,m.createHighlightAnnotation)(h.default.v4(),this.props.viewportHeight,this.props.viewportWidth,this.props.viewportScale,this.props.currentColor,(0,m.getPosition)(this.div),this.textLayerDivRects),S=(0,f.supportsMixBlendMode)()?1:.25;null!==O&&(t=O.coords.map(f.getRectFromCoords).map(function(t,n){return s.default.createElement("g",{className:"Draw--highlight-group",key:n,role:"presentation",fill:"string"==typeof e.props.currentColor?e.props.currentColor:v.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,fillOpacity:S},s.default.createElement(p.default,{rect:t}))}))}var P=(0,y.default)("Draw",{"Draw--not-drawing":!1===this.state.isDrawing,"Draw--is-drawing":this.state.isDrawing,"Draw--is-pointer-down":this.state.isPointerDown,"Draw--selection":"selection"===this.props.type,"Draw--freetext":"freetext"===this.props.type,"Draw--highlight":"highlight"===this.props.type,"Draw--strikeout":"strikeout"===this.props.type,"Draw--area":"area"===this.props.type,"Draw--ink":"ink"===this.props.type,"Draw--point":"point"===this.props.type}),T=t.length>0;return s.default.createElement("div",{className:P,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut,onTouchEnd:this.handlePointerUp,onTouchMove:this.handlePointerMove,onTouchStart:this.handlePointerDown,ref:this.setDiv,style:"object"===o(this.props.style)?this.props.style:{}},T&&s.default.createElement("div",{className:"Draw--svg-container"},s.default.createElement("svg",{className:"Draw-svg",style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",left:0,top:0}},t)),this.props.children)}}]),t}();t.default=A},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=l(n(46)),a=l(n(414)),s=l(n(396));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.setTextAreaRef=function(e){e instanceof HTMLElement&&(n.textArea=e)},n.componentDidMount=function(){n.setTextareaWidth(),n.updateTextareaHeight(),n.updateAnnotationDimensionsThrottled=(0,a.default)(n.updateAnnotationDimensions,15),n.div.addEventListener("focusout",n.handleAnnotationSave,!0),n.props.annotationContents||setTimeout(function(){n.setState(function(e){return o({},e,{isFocused:!0})},n.textArea.focus())},0)},n.componentWillUnmount=function(){n.div.removeEventListener("focusout",n.handleAnnotationSave,!0)},n.updateAnnotationDimensions=function(){n.setTextareaWidth(),n.updateTextareaHeight()},n.handleAnnotationSave=function(e){if(e&&n.props.onParentBlur(e)&&e.relatedTarget)n.setState(function(e){return o({},e,{isFocused:!1})});else{var t=n.textArea.value;(n.state.isEditing||n.state.isNewAnnotation)&&n.setState(function(e){return o({},e,{isEditing:!1,isFocused:!1})},function(){n.state.isNewAnnotation&&!t.length?n.props.onDeleteAnnotation(n.props.annotationPage,n.props.annotationID):n.props.canEdit&&n.props.annotationContents!==t&&t?n.props.onAnnotationSave(t,{clientHeight:n.textArea.clientHeight,clientWidth:n.textArea.clientWidth}):n.textArea.value=n.props.annotationContents})}},n.handleMouseDown=function(e){n.props.canEdit&&n.setState(function(e){return o({},e,{isEditing:!0})}),setTimeout(function(){n.textArea.focus(),n.setState(function(e){return o({},e,{isFocused:!0})})},0)},n.handleKeyDown=function(e){if(!e.shiftKey&&"Enter"===e.key){e.preventDefault(),n.handleAnnotationSave();var t=n.div.closest(".FreetextGroup");t instanceof HTMLElement&&t&&t.focus()}},n.handleChange=function(){n.setState(function(e){return o({},e,{isEditing:!0})})},n.handleMouseEnter=function(){n.props.onTextareaMouseEnter(!0)},n.handleMouseLeave=function(){n.props.onTextareaMouseEnter(!1)},n.setTextareaWidth=function(){var e=n.props.x,t=n.props.viewportWidth-e-15;n.textArea instanceof HTMLElement&&(n.textArea.style.width="",n.textArea.style.whiteSpace="",n.textArea.style.wordWrap="normal",n.textArea.style.width=Math.min(t,n.textArea.scrollWidth)+"px",n.textArea.style.wordWrap="break-word",n.textArea.style.whiteSpace=n.textArea.scrollWidth>t?"pre-line":"pre")},n.updateTextareaHeight=function(){var e=n.props.y,t=n.props.viewportHeight-e-15;n.textArea.style.height="",n.textArea.style.height=Math.min(t,n.textArea.scrollHeight+1),n.textArea.style["overflow-y"]="auto"},n.updateTextareaDimension=function(e){e.preventDefault(),n.setTextareaWidth(),n.updateTextareaHeight()},n.state={isNewAnnotation:"string"!=typeof e.annotationContents||e.annotationContents.length<1,isEditing:!1,isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"componentWillReceiveProps",value:function(e){this.updateAnnotationDimensionsThrottled(),e.annotationContents&&this.state.isNewAnnotation?this.setState(function(e){return o({},e,{isNewAnnotation:!1})}):!e.isSelected&&this.props.isSelected&&this.handleAnnotationSave()}},{key:"render",value:function(){var e=this.props.annotationFontSize*this.props.scaleModifier+"pt";return i.default.createElement("div",{className:"Freetext-content",ref:this.setDivRef},i.default.createElement("textarea",{rows:"1",cols:"1","aria-label":this.props.annotationUserName,readOnly:!this.props.canEdit||this.props.isDragging,spellCheck:this.state.isEditing,className:"Freetext-textarea",style:{fontSize:e,color:this.props.annotationColor,backgroundColor:this.props.annotationFillColor,border:!this.state.isFocused&&this.props.isSelected&&"1px solid rgba(0, 0, 0, 0.25)"},ref:this.setTextAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onInput:this.updateTextareaDimension,defaultValue:this.props.annotationContents}))}}]),t}();t.default=u,u.propTypes={annotationColor:s.default.string,annotationContents:s.default.string,annotationFillColor:s.default.string,annotationFont:s.default.string,annotationID:s.default.string,annotationPage:s.default.number,annotationUserName:s.default.string,canEdit:s.default.bool,isDragging:s.default.bool,isSelected:s.default.bool,onAnnotationSave:s.default.func,onDeleteAnnotation:s.default.func,onParentBlur:s.default.func,onSelectAnnotation:s.default.func,onTextareaMouseEnter:s.default.func,viewportHeight:s.default.number,viewportWidth:s.default.number,x:s.default.number,y:s.default.number}},598:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".FreetextGroup{pointer-events:all;border:1px solid transparent;font-size:.9rem;position:absolute;will-change:auto;display:inline-block;-webkit-box-sizing:content-box;box-sizing:content-box;padding:6px}.FreetextGroup:focus{border:1px solid #31a4e7}.FreetextGroup--active,.FreetextGroup:focus,.FreetextGroup:hover{outline:1px dashed #bbb}.Page.is-multistroke-drawing .FreetextGroup{pointer-events:none}.FreetextTooltip-container{position:absolute;cursor:default;bottom:calc(100% + 2px)}.FreetextTooltip{position:relative;left:-2px}.Freetext-title{font-weight:700;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:5px}.Freetext-content{-webkit-box-sizing:content-box;box-sizing:content-box;cursor:text}.Freetext-entry{padding:10px;display:inline-block}.Freetext-textarea:focus{border:1px solid #38a7e8}.Freetext-textarea,.Freetext-textarea[disabled]{-webkit-opacity:1;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:text;border:1px solid transparent;font-family:Lato,Helvetica,Arial;white-space:pre;overflow:hidden;resize:none;padding:0 2px;word-wrap:break-word}.TextSizeButton{outline:none;color:#556572;border:2px solid #fff;border-radius:5px;background-color:#fff}.TextSizeButton.selected{background-color:#556572;color:#fff}.TextSizeButton:hover{border-color:#dbdbdb}.TextSizeButton:focus{border-color:#38a7e8}.TextSizeButton-outer{display:-webkit-box;display:-ms-flexbox;display:flex;width:18px;height:19px;padding:2px 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""])},599:function(e,t,n){var o=n(598);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(599);var a=y(n(46)),s=y(n(387)),l=y(n(50)),u=y(n(597)),c=y(n(398)),p=y(n(483)),d=y(n(423)),f=y(n(486)),h=y(n(485)),m=n(134),g=n(394),v=n(391);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(e){n.div=e},n.scaleFreetext=function(e){var t=n.div.clientWidth*e/m.DEFAULT_SCALE/n.div.clientWidth;n.setState(function(e){return r({},e,{scaleModifier:t})})},n.handleFocusOut=function(e){var t=(0,g.getRelatedTargetOrEquivalent)(e);return n.div&&n.div.contains(t)||n.props.commentsContainerRef&&n.props.commentsContainerRef.current&&n.props.commentsContainerRef.current.contains(t)},n.handleCommentGroupBlur=function(e){var t=e.relatedTarget;!1===(n.div&&n.div.contains(t)||n.props.commentsContainerRef&&n.props.commentsContainerRef.current&&n.props.commentsContainerRef.current.contains(t))&&n.props.onDeselectAnnotation(n.props.annotation.id)},n.handleFreetextGroupBlur=function(e){var t=n.state.isTabPressed,o=t&&n.props.isShiftPressed,r=n.handleFocusOut(e);!1===r&&n.props.onDeselectAnnotation(n.props.annotation.id),t&&!1===o&&!1===r&&(0,g.focusOnNextAnnotation)(n.props.ySortedStagedRootAnnotations,n.props.annotation.id);var i=n.props.ySortedStagedRootAnnotations[n.props.ySortedStagedRootAnnotations.length-1].id===n.props.annotation.id&&t&&!1===n.props.isShiftPressed&&!1===r,a=n.props.ySortedStagedRootAnnotations[0].id===n.props.annotation.id&&o&&(e.target.className.includes("FreetextGroup")||e.target.className.includes("Freetext-textarea"));if(i)return e.preventDefault(),e.stopPropagation(),n.props.onDeselectAnnotation(n.props.annotation.id),void n.props.handleNextPageFocus();a&&(e.preventDefault(),e.stopPropagation(),n.props.onDeselectAnnotation(n.props.annotation.id),n.props.handlePreviousPageFocus())},n.handleKeyDown=function(e){if(!document.activeElement.className.includes("FreetextGroup")||!n.props.canDelete||"Delete"!==e.key&&"Backspace"!==e.key){if(document.activeElement.className.includes("FreetextGroup")&&n.props.canEdit)switch(e.key){case"Escape":n.div.blur();break;case"ArrowRight":return n.handleKeyPressMove(e.shiftKey?1:5,0),void e.preventDefault();case"ArrowLeft":return n.handleKeyPressMove(e.shiftKey?-1:-5,0),void e.preventDefault();case"ArrowUp":return n.handleKeyPressMove(0,e.shiftKey?-1:-5),void e.preventDefault();case"ArrowDown":return n.handleKeyPressMove(0,e.shiftKey?1:5),void e.preventDefault()}"Tab"===e.key&&(e.persist&&e.persist(),n.setState({isTabPressed:!0},function(){var t=n.div.querySelector(".Delete-annotation-button"),o=document.activeElement.className.includes("Freetext-textarea")||document.activeElement.className.includes("FreetextGroup")||n.props.canDelete&&!1===n.props.canEdit&&document.activeElement===t;if(n.props.isShiftPressed&&n.div.contains(document.activeElement)&&o){var r=n.props.ySortedStagedRootAnnotations.findIndex(function(e){return e.id===n.props.annotation.id})-1;if(r>=0){var i=n.props.ySortedStagedRootAnnotations[r],a="freetext"===i.type&&i.deleted;if("freetext"===i.type&&n.props.canEdit)e.preventDefault(),document.querySelector("#Annotation-"+i.id).focus();else if(a){var s=document.querySelector("#Annotation-"+i.id+"-comment-group .Acknowledge-remove-deleted-comment-button");e.preventDefault(),s.focus()}else if("freetext"!==i.type){var l=document.querySelector("#Annotation-"+i.id+"-comment-group");if(l){e.preventDefault();var u=l.querySelectorAll("textarea"),c=u[u.length-1];c?c.focus():document.querySelector("#Annotation-"+i.id+" .Annotation-svg-container ").focus()}}return}}if(n.props.annotation.deleted){e.persist&&e.persist();var p=n.props.commentsContainerRef.current.querySelector(".Acknowledge-remove-deleted-comment-button"),d=document.activeElement===p,f=document.activeElement.className.includes("FreetextGroup")||document.activeElement.className.includes("Freetext-textarea"),h=n.props.ySortedStagedRootAnnotations[n.props.ySortedStagedRootAnnotations.length-1].id!==n.props.annotation.id;f&&!1===n.props.isShiftPressed?n.props.commentsContainerRef.current.querySelector(".CommentGroup").focus():d&&h&&!1===n.props.isShiftPressed?(e.preventDefault(),(0,g.focusOnNextAnnotation)(n.props.ySortedStagedRootAnnotations,n.props.annotation.id)):d&&n.props.isShiftPressed&&(e.preventDefault(),n.props.onSelectAnnotation(n.props.annotation.id),n.div.querySelector(".FreetextGroup").focus())}else;}))}else n.handleDelete()},n.handleKeyPressMove=function(e,t){n.moveAnnotation(n.state.translateX+e,n.state.translateY+t)},n.handleMouseDown=function(e){!n.state.isMouseInTextarea&&n.props.canEdit&&n.div.contains(e.target)&&((0,v.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!0),(0,v.isTouchEvent)(e)||(n.props.onTextSelectionDisable(),n.originalPageX=e.pageX,n.originalPageY=e.clientY,n.originalTranslateX=n.state.translateX,n.originalTranslateY=n.state.translateY,n.setState(function(e){return r({},e,{isDragging:!0,isSelected:!0})}),n.props.onDraggingStart(n.props.annotation.id),document.addEventListener("pointerup",n.handleDocumentMouseUp),document.addEventListener("pointermove",n.handleDocumentMouseMove)))},n.handleOnClick=function(e){n.props.isSelected||n.props.onSelectAnnotation(n.props.annotation.id)},n.handleDocumentMouseMove=function(e){if(n.state.isDragging&&n.props.annotation.contents){e.preventDefault();var t=(0,g.getTranslatedCordinates)({pageX:e.pageX,pageY:e.pageY,originalPageX:n.originalPageX,originalPageY:n.originalPageY,viewportHeight:n.props.viewportHeight,viewportWidth:n.props.viewportWidth,x:n.props.x,y:n.props.y}),o=t.translateX,r=t.translateY;n.moveAnnotation(o,r)}},n.handlePointerMove=function(e){(0,v.isPenEvent)(e)&&n.props.onIsPenAnnotatingChange(!0)},n.moveAnnotation=function(e,t){var o=n.props.annotation.rect[0][0]+e,i=n.props.annotation.rect[0][1]+t,a=n.props.annotation.rect[1][1]+t,s=o+40*n.props.viewportScale<n.props.viewportWidth&&o>0?e:n.state.translateX,l=i+10<n.props.viewportHeight&&a>0?t:n.state.translateY;n.setState(function(e){return r({},e,{translateX:s,translateY:l,isDragging:!0})})},n.handleCommentDelete=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.props.onDeleteAnnotation(n.props.annotation.page,e,t)},n.handleDocumentMouseUp=function(e){n.props.onIsPenAnnotatingChange(!1),e.key&&"Tab"===e.key&&n.setState({isTabPressed:!1}),n.state.isDragging&&(n.props.onTextSelectionEnable(),n.state.isDragging&&(n.setState(function(e){return r({},e,{isDragging:!1})},function(){0===n.state.translateX&&0===n.state.translateY||(n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY),n.setState(function(e){return r({},e,{translateX:0,translateY:0})}))}),n.props.onDraggingEnd()),document.removeEventListener("pointerup",n.handleDocumentMouseUp),document.removeEventListener("pointermove",n.handleDocumentMouseMove))},n.handleAnnotationSave=function(e,t){var r=t.clientHeight,i=t.clientWidth,a=n.props.annotation,s=o(a.rect,2),l=o(s[0],2),u=l[0],c=(l[1],o(s[1],2)),p=(c[0],c[1]);n.handleCommentSave(n.props.annotation.id,e,[[u,p+r],[u+i,p]])},n.handleCommentSave=function(e,t,o){var i=n.props.annotation,a=[].concat([],[i]).find(function(t){return t.id===e});t&&t.trim().length&&("string"==typeof i.created_at?n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},a,{contents:t,rect:o})):n.props.onCreateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},i,{contents:t,rect:o})))},n.handleDelete=function(){n.props.canDelete&&n.setState(function(e){return r({},e,{isDeletePopupVisible:!0})})},n.handleDeletePopupConfirm=function(){n.setState(function(e){return r({},e,{isDeletePopupVisible:!1})});var e=n.props.annotation;n.props.canDelete&&n.props.onDeleteAnnotation(e.page,e.id)},n.handleDeletePopupCancel=function(){n.setState(function(e){return r({},e,{isDeletePopupVisible:!1})}),n.div.focus(),n.props.onHoverAnnotation(null)},n.handleisMouseInTextarea=function(e){n.setState(function(t){return r({},t,{isMouseInTextarea:e})})},n.handleMouseEnter=function(e){n.setState(function(e){return r({},e,{isHovered:!0})}),n.props.onHoverAnnotation(n.props.annotation.id)},n.handleMouseLeave=function(e){n.setState(function(e){return r({},e,{isHovered:!1})}),n.props.onHoverAnnotation(null)},n.handleAnnotationFocus=function(e){e.persist(),e.preventDefault(),e.stopPropagation(),n.props.onSelectAnnotation(n.props.annotation.id)},n.scaleRect=function(e,t,n){var o=t.split(" ")[0].replace(/\D/g,""),r=n.split(" ")[0].replace(/\D/g,"")/o,i=(e[1][0]-e[0][0])*r,a=(e[1][1]-e[0][1])*r,s=e[0][0]+i,l=e[0][1]+a;return[e[0],[s,l]]},n.updateColor=function(e){n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{color:e})),n.props.onCurrentColorChange(e,"freetext")},n.updateBgColor=function(e){n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{bgColor:e})),n.props.onCurrentBgColorChange(e,"freetext")},n.updateTextSize=function(e){var t=n.scaleRect(n.props.annotation.rect,n.props.annotation.font,e);n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{font:e,rect:t})),n.props.onCurrentTextSizeChange(e,"freetext")},n.state={isHovered:!1,isDeletePopupVisible:!1,isDragging:!1,isMouseInTextarea:!1,isTabPressed:!1,translateX:0,translateY:0,scaleModifier:1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"componentDidMount",value:function(){this.scaleFreetext(this.props.viewportScale),this.div.addEventListener("focusout",this.handleFreetextGroupBlur,!0)}},{key:"componentWillUnmount",value:function(){this.div.removeEventListener("focusout",this.handleFreetextGroupBlur,!0)}},{key:"componentWillReceiveProps",value:function(e){e.viewportScale!==this.props.viewportScale&&this.scaleFreetext(e.viewportScale)}},{key:"render",value:function(){var e=this.props.annotation,t=o(this.props.annotation.rect,2),n=o(t[0],2),r=n[0],i=(n[1],o(t[1],2)),g=i[0],v=i[1],y=this.props.isSelected&&this.div&&this.div.contains(document.activeElement)||this.state.isDragging,b=(0,s.default)("FreetextGroup",{"FreetextGroup--active":y,"FreetextGroup--editable":this.props.canEdit}),w=e.font&&e.font.split(" ")[0].replace(/\D/g,"")||"10",C=r+this.state.translateX,E=v+this.state.translateY;if(this.state.hasError)return a.default.createElement("div",{style:{left:C,top:E}},"Error");var _=this.props.isSelected&&this.props.canEdit,A=(0,l.default)("Are you sure you want to delete this annotation?"),x=this.props.annotation.rect.map(function(e){var t=o(e,2);return[t[0]+5,t[1]+5]}),O=this.props.annotation.deleted&&(this.props.isHovered||this.props.isSelected)&&!this.state.isDragging,S=(0,s.default)("Annotation",{"Annotation--selected":this.props.isSelected,"Annotation--is-dragging":this.state.isDragging});return a.default.createElement("div",{key:this.props.annotation.id+"-container",className:S,tabIndex:-1,onClick:this.handleOnClick,onFocus:this.handleAnnotationFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleDocumentMouseUp,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.setDivRef},a.default.createElement("div",{key:"Annotation-"+this.props.annotation.id,id:"Annotation-"+this.props.annotation.id,className:b,style:{left:C,top:E,backgroundColor:this.props.annotation.bgColor,border:"transparent",cursor:"string"==typeof this.props.annotation.contents&&this.props.annotation.contents.length>0?"move":"auto"},tabIndex:-1,onPointerDown:this.handleMouseDown,onPointerMove:this.handlePointerMove},a.default.createElement(u.default,{annotationContents:e.contents,annotationPage:e.page,annotationID:e.id,annotationFontSize:w,annotationColor:e.color,annotationFillColor:e.bgColor,annotationUserName:e.user_name,annotationWidth:g-r,isSelected:this.props.isSelected,isDragging:this.state.isDragging,canEdit:this.props.canEdit,x:C,y:E,scaleModifier:this.state.scaleModifier,viewportWidth:this.props.viewportWidth,viewportHeight:this.props.viewportHeight,onParentBlur:this.handleFocusOut,onSelectAnnotation:this.props.onSelectAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onAnnotationSave:this.handleAnnotationSave,onTextareaMouseEnter:this.handleisMouseInTextarea}),a.default.createElement("div",{className:"FreetextTooltip-container"},y&&a.default.createElement("div",{className:"FreetextTooltip"},a.default.createElement(p.default,{canEdit:this.props.canEdit,canDelete:this.props.canDelete,displayAuthorName:!this.props.canEdit,onDeleteAnnotation:this.handleDelete,authorName:this.props.annotation.user_name})))),O&&a.default.createElement(f.default,{key:this.props.annotation.id,annotationId:this.props.annotation.id,currentScrollTop:this.props.currentScrollTop,isAutomaticallyScrollingComments:this.props.isAutomaticallyScrollingComments,isSelected:this.props.isSelected,onSelectAnnotation:this.props.onSelectAnnotation,managedTop:this.props.managedTop,pageHeight:this.props.pageHeight,rect:x,viewportWidth:this.props.viewportWidth,widthExtension:24}),this.props.annotation.deleted&&this.props.commentsContainerRef&&this.props.commentsContainerRef.current&&a.default.createElement(h.default,{annotation:this.props.annotation,annotationId:this.props.annotation.id,canEdit:!1,iconColor:e.color?e.color:m.DEFAULT_FREETEXT_ANNOTATION_COLOR,commentReplies:this.props.commentReplies,commentsContainerRef:this.props.commentsContainerRef,isAnnotatable:this.props.isAnnotatable,isCommenting:!1,isHovered:this.props.isHovered,isSelected:this.props.isSelected,managedTop:this.props.managedTop,onCommentBlur:null,onCommentGroupBlur:this.handleCommentGroupBlur,onCommentGroupHeightChange:this.props.onCommentGroupHeightChange,onCommentGroupUnmount:this.props.onCommentGroupUnmount,onCommentFocus:this.handleCommentsContainerFocus,onCommentSave:this.props.onCommentSave,onDeleteAnnotation:this.handleCommentDelete,onHoverAnnotation:this.props.onHoverAnnotation,onSelectComment:this.setCommentState,pageHeight:this.props.pageHeight,rect:this.props.annotation.rect,sessionUserObject:this.props.sessionUserObject,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth}),this.state.isDeletePopupVisible&&a.default.createElement(d.default,{message:A,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}),_&&a.default.createElement(c.default,{controlMode:"freetext",currentBgColor:e.bgColor,currentColor:e.color,currentFont:e.font,onCurrentBgColorChange:this.updateBgColor,onCurrentColorChange:this.updateColor,onCurrentTextSizeChange:this.updateTextSize}))}}]),t}();t.default=b},601:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".PointAnnotation{pointer-events:none}.Draw--not-drawing .PointAnnotation path{pointer-events:visiblePainted}.Draw--not-drawing .PointAnnotation--editable path{cursor:move}.Draw--is-pointer-down .PointAnnotation path{pointer-events:none}",""])},602:function(e,t,n){var o=n(601);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=m(n(46)),s=m(n(387)),l=m(n(50)),u=m(n(481)),c=m(n(409)),p=n(410),d=m(n(398)),f=m(n(443)),h=(n(391),n(134));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(602);var v=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"point")},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.selectionBoxPadding,n=this.props.annotation,i=o(this.props.annotation.rect,2),p=o(i[0],2),m=p[0],g=p[1],v=o(i[1],2),y=v[0],b=v[1],w=y-m,C=g-b,E=a.default.createElement(d.default,{controlMode:"point",currentColor:n.color,onCurrentColorChange:this.updateColor}),_=this.props.isHovered||this.props.isSelected,A=(0,s.default)("PointAnnotation",{"PointAnnotation--editable":this.props.canEdit});return a.default.createElement(c.default,r({},this.props,{className:A,iconColor:n.color?n.color:h.DEFAULT_POINT_ANNOTATION_COLOR,height:C,id:n.id,isMovable:!0,onCommentSave:this.handleCommentSave,selectionBoxPadding:t,title:(0,l.default)("Point annotation"),width:w,x:m,y:b,render:function(o){return[a.default.createElement(f.default,{height:C+2*t,isSelected:e.props.isSelected,isSvgContainerFocused:o,isVisible:_,key:"selectionbox",width:w+2*t}),"string"==typeof n.icon&&a.default.createElement(u.default,{color:n.color?n.color:h.DEFAULT_POINT_ANNOTATION_COLOR,height:C,key:"pointIcon",width:w,x:t,y:t})]},secondaryControls:E}))}}]),t}();t.default=v},604:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".StrikeoutAnnotation{pointer-events:none}.Draw--not-drawing .StrikeoutAnnotation rect{pointer-events:visiblePainted;cursor:default}.Draw--is-pointer-down .StrikeoutAnnotation rect{pointer-events:none}.Annotation--selected .Annotation-svg-container:not(:focus) .StrikeoutAnnotation rect{stroke:#bbb;stroke-dasharray:3}.Annotation-svg-container:focus .StrikeoutAnnotation rect{stroke:#38a7e8}.Annotation:hover:not(.Annotation--selected) .StrikeoutAnnotation rect{stroke:#bbb;stroke-dasharray:3}",""])},605:function(e,t,n){var o=n(604);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=m(n(46)),s=m(n(50)),l=m(n(482)),u=m(n(442)),c=m(n(409)),p=n(410),d=m(n(398)),f=(n(391),n(394));n(605);var h=n(134);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"strikeout")},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.annotation,n=o(this.props.annotation.rect,2),i=o(n[0],2),p=i[0],m=i[1],g=o(n[1],2),v=g[0],y=g[1],b=v-p,w=m-y,C=a.default.createElement(d.default,{controlMode:"strikeout",currentColor:this.props.annotation.color,onCurrentColorChange:this.updateColor});if(!(this.props.annotation.coords instanceof Array))throw new Error("coords missing on strikeout annotation");var E=this.props.annotation.coords.map(function(t,n){var o=t.map(function(t){return[t[0]-p+e.props.selectionBoxPadding,t[1]-y+e.props.selectionBoxPadding]});return a.default.createElement(l.default,{key:n,rect:o,viewportHeight:e.props.viewportHeight})}),_=this.props.annotation.coords.map(f.getRectFromCoords).filter(function(e){return e.top!==e.bottom&&e.left!==e.right}).map(function(t,n){var o={left:t.left-p+e.props.selectionBoxPadding,top:t.top-y+e.props.selectionBoxPadding,right:t.right-p+e.props.selectionBoxPadding,bottom:t.bottom-y+e.props.selectionBoxPadding};return a.default.createElement(u.default,{key:n,rect:o})});return a.default.createElement(c.default,r({},this.props,{annotation:t,canEdit:this.props.canEdit,canDelete:this.props.canDelete,className:"StrikeoutAnnotation",iconColor:t.color?t.color:h.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,height:w,id:t.id,isMovable:!1,onCommentSave:this.handleCommentSave,render:function(e){return[a.default.createElement("g",{key:"hitpath",role:"presentation",fillOpacity:.001},_),a.default.createElement("g",{key:"lines",role:"presentation",stroke:"string"==typeof t.color?t.color:h.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,fillOpacity:"number"==typeof t.opacity?t.opacity:1,strokeWidth:"1.5"},E)]},secondaryControls:C,title:(0,s.default)("Strikeout annotation"),width:b,x:p,y:y}))}}]),t}();t.default=v},607:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".HighlightAnnotationContainer{mix-blend-mode:multiply}.HighlightAnnotation{pointer-events:none}.Draw--not-drawing .HighlightAnnotation rect{pointer-events:visible;cursor:default}.Draw--is-pointer-down .HighlightAnnotation rect{pointer-events:none}.Annotation--selected .Annotation-svg-container:not(:focus) .HighlightAnnotation rect{stroke:#bbb;stroke-dasharray:3}.Annotation-svg-container:focus .HighlightAnnotation rect{stroke:#38a7e8}.Annotation:hover:not(.Annotation--selected) .HighlightAnnotation rect{stroke:#bbb;stroke-dasharray:3}",""])},608:function(e,t,n){var o=n(607);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=h(n(46)),s=h(n(50)),l=h(n(442)),u=h(n(409)),c=(n(391),n(394)),p=n(410),d=h(n(398));n(608);var f=n(134);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"highlight")},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.annotation,n=o(this.props.annotation.rect,2),i=o(n[0],2),p=i[0],h=i[1],m=o(n[1],2),g=m[0],v=m[1],y=g-p,b=h-v;if(!(this.props.annotation.coords instanceof Array))throw new Error("coords missing on strikeout annotation");var w=this.props.annotation.coords.map(c.getRectFromCoords).filter(function(e){return e.top!==e.bottom&&e.left!==e.right}).map(function(t,n){var o={left:t.left-p+e.props.selectionBoxPadding,top:t.top-v+e.props.selectionBoxPadding,right:t.right-p+e.props.selectionBoxPadding,bottom:t.bottom-v+e.props.selectionBoxPadding};return a.default.createElement(l.default,{key:n,isHovered:e.props.isHovered,isSelected:e.props.isSelected,rect:o,viewportHeight:e.props.viewportHeight})}),C=(0,c.supportsMixBlendMode)()?1:.25,E=a.default.createElement(d.default,{controlMode:"highlight",currentColor:t.color,onCurrentColorChange:this.updateColor});return a.default.createElement(u.default,r({},this.props,{containerClassName:"HighlightAnnotationContainer",className:"HighlightAnnotation",iconColor:t.color?t.color:f.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,height:b,id:t.id,isMovable:!1,onCommentSave:this.handleCommentSave,rect:this.props.annotation.rect,render:function(e){return a.default.createElement("g",{role:"presentation",fill:"string"==typeof t.color?t.color:f.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,fillOpacity:C},w)},secondaryControls:E,title:(0,s.default)("Highlight annotation"),user_name:this.props.annotation.user_name,width:y,x:p,y:v}))}}]),t}();t.default=g},610:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".SquareAnnotation{pointer-events:none}.Draw--not-drawing .SquareAnnotation-presentation-rect,.Draw--not-drawing .SquareAnnotation-presentation-rect-hitpath{pointer-events:visiblePainted}.Draw--not-drawing .SquareAnnotation--editable .SquareAnnotation-presentation-rect,.Draw--not-drawing .SquareAnnotation--editable .SquareAnnotation-presentation-rect-hitpath{cursor:move}.Draw--is-pointer-down .SquareAnnotation-presentation-rect,.Draw--is-pointer-down .SquareAnnotation-presentation-rect-hitpath{pointer-events:none}",""])},611:function(e,t,n){var o=n(610);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=h(n(46)),s=h(n(387)),l=h(n(50)),u=h(n(409)),c=n(410),p=h(n(398)),d=(n(391),h(n(443))),f=n(134);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(611);var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=c.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"area")},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.selectionBoxPadding+4,n=this.props.annotation,i=o(this.props.annotation.rect,2),c=o(i[0],2),h=c[0],m=c[1],g=o(i[1],2),v=g[0],y=g[1],b=v-h,w=m-y,C=a.default.createElement(p.default,{controlMode:"area",currentColor:this.props.annotation.color,onCurrentColorChange:this.updateColor}),E=this.props.isHovered||this.props.isSelected,_=(0,s.default)("SquareAnnotation",{"SquareAnnotation--editable":this.props.canEdit});return a.default.createElement(u.default,r({},this.props,{className:_,iconColor:n.color?n.color:f.DEFAULT_AREA_ANNOTATION_COLOR,height:w,id:n.id,isMovable:!0,onCommentSave:this.handleCommentSave,render:function(o){return[a.default.createElement(d.default,{height:w+2*t,isSelected:e.props.isSelected,isSvgContainerFocused:o,isVisible:E,key:"selectionbox",width:b+2*t}),a.default.createElement("rect",{className:"SquareAnnotation-presentation-rect",fill:"none",height:w,key:"rect",opacity:"number"==typeof n.opacity?n.opacity:1,role:"presentation",stroke:"string"==typeof n.color?n.color:f.DEFAULT_AREA_ANNOTATION_COLOR,strokeWidth:"number"==typeof n.width?n.width:2,width:b,x:t,y:t}),a.default.createElement("rect",{className:"SquareAnnotation-presentation-rect-hitpath",fill:"none",height:w,key:"hitpath",opacity:.001,role:"presentation",stroke:"string"==typeof n.color?n.color:f.DEFAULT_AREA_ANNOTATION_COLOR,strokeWidth:"number"==typeof n.width?n.width+8:10,width:b,x:t,y:t})]},secondaryControls:C,selectionBoxPadding:t,title:(0,l.default)("Area annotation"),width:b,x:h,y:y}))}}]),t}();t.default=g},613:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".InkAnnotation{pointer-events:none}.Draw--not-drawing .InkAnnotation--saved line,.Draw--not-drawing .InkAnnotation--saved path{pointer-events:visiblePainted}.Draw--not-drawing .InkAnnotation--editable.InkAnnotation--saved line,.Draw--not-drawing .InkAnnotation--editable.InkAnnotation--saved path{cursor:move}.InkStrokeWidthButton{outline:none;color:#556572;border:3px solid #fff;border-radius:21px;background-color:#fff;padding:3px}.InkStrokeWidthButton.selected{border-color:#72818c}.InkStrokeWidthButton:hover{border-color:#dbdbdb}.InkStrokeWidthButton:focus{border-color:#72818c}.InkStrokeWidthButton-outer{display:-webkit-box;display:-ms-flexbox;display:flex;width:21px;height:21px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""])},614:function(e,t,n){var o=n(613);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},615:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".SelectionBox{pointer-events:none;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.3s;animation-duration:.3s}.Annotation-svg-container:focus .SelectionBox-rect{stroke:#38a7e8;stroke-dasharray:0}.PageAnnotations.is-dragging .SelectionBox{display:none}",""])},616:function(e,t,n){var o=n(615);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},624:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".GenericPopup{position:fixed;margin:0 auto;margin-left:50px;margin-top:-25px;background-color:#fff;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;pointer-events:visible;width:600px;left:50%;margin-left:-300px;z-index:3}.GenericPopup:focus{outline:none}@media (min-width:938px){.GenericPopup{top:120px}}@media (max-width:937px){.GenericPopup{top:170px}}.GenericPopup-warning{border:2px solid #fc5d13}.GenericPopup-alert{border:2px solid #008ee1}.GenericPopup-button{font-family:inherit;font-size:inherit;margin:2px;padding:10px 20px 5px}.GenericPopup-confirm-button{background-color:#0291e0;border:2px solid #017bc3;color:#fff}.GenericPopup-confirm-button:hover{background-color:#017bc3;border:2px solid #017bc3}",""])},625:function(e,t,n){var o=n(624);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("div",{style:{backgroundColor:"#008EE1",width:"58px",display:"flex",alignItems:"center",justifyContent:"center"}},a.default.createElement("svg",{viewBox:"0 0 2000 2000",width:"20px",height:"20px",style:{margin:"0 auto"}},a.default.createElement("path",{d:"M960 790.588c-124.574 0-225.882-101.308-225.882-225.882S835.426 338.824 960 338.824s225.882 101.308 225.882 225.882S1084.574 790.588 960 790.588zm-169.412 677.647V903.53h338.824v564.706H790.588zM960 0C430.645 0 0 430.645 0 960s430.645 960 960 960 960-430.645 960-960S1489.355 0 960 0z",fill:"#ffffff",fillRule:"evenodd"})))}}]),t}();t.default=s},627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("div",{style:{backgroundColor:"#FC5D13",width:"58px",display:"flex",alignItems:"center",justifyContent:"center"}},a.default.createElement("svg",{viewBox:"0 0 2000 2000",width:"20px",height:"20px",style:{margin:"0 auto"}},a.default.createElement("path",{d:"M960 790.588c-124.574 0-225.882-101.308-225.882-225.882S835.426 338.824 960 338.824s225.882 101.308 225.882 225.882S1084.574 790.588 960 790.588zm-169.412 677.647V903.53h338.824v564.706H790.588zM960 0C430.645 0 0 430.645 0 960s430.645 960 960 960 960-430.645 960-960S1489.355 0 960 0z",fill:"#ffffff",fillRule:"evenodd"})))}}]),t}();t.default=s},628:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".ExpandableIcon{background-color:#fff;border:0 none;bottom:4px;color:#3a8fdd;cursor:pointer;font:inherit;padding-left:10px;padding:6px;pointer-events:none;position:absolute;right:6px}",""])},629:function(e,t,n){var o=n(628);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(46)),i=a(n(50));function a(e){return e&&e.__esModule?e:{default:e}}n(629);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":(0,i.default)("Expand comment"),onClick:this.props.onClick,className:"ExpandableIcon"},"[...]")}}]),t}();t.default=s},631:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".CommentReplyForm{text-align:right}.Comment-reply-button{margin:6px}.Comment-reply-button::-moz-focus-inner{border:0}.CommentReplyForm-inner.hidden{display:none}.CommentReplyForm .CommentReplyForm-inner{border-top:1px solid #b9c0c6;border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-bottom:2px solid #c6ccd0;border-right:2px solid #c6ccd0;border-left:2px solid #c6ccd0}.Comment:not(:first-of-type){border-top:1px solid #b9c0c6}.Comment-title{font-weight:700;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative}.Comment-title-username{margin:8px 12px 6px;-webkit-box-flex:1;-ms-flex:1;flex:1}.Comment-edit-buttons{position:absolute;margin-top:2px;margin-right:2px;right:0;top:0}.Comment-icon{margin-top:8px;margin-left:10px}.Comment-icon svg{width:20px}.Comment-title svg{height:20px;width:16px}.Comment-title-usernameExtraMargin{margin-left:38px}.Comment{border-right:2px solid #c6ccd0;border-left:2px solid #c6ccd0;background-color:#fff}.Comment-root-comment,.Comment:first-of-type{border-top-left-radius:6px;border-top-right-radius:6px;border-top:2px solid #c6ccd0}.Comment-isAtBottom,.Comment-isReplyForm{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-bottom:2px solid #c6ccd0}.CommentsContainer .CommentGroup .Comment-deleted{border:2px solid #ee0512}.Comment-deleteMessage{width:100%;background-color:#ee0512;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex}.Comment-deleteMessage p{color:#fff;padding:10px;margin:0;-webkit-box-flex:1;-ms-flex:1;flex:1}.Comment-deleteMessage button{margin-right:5px}.CommentGroup:focus .Comment{border-right-color:#38a7e8;border-left-color:#38a7e8}.CommentGroup:focus .Comment:first-child{border-top-color:#38a7e8}.CommentGroup:focus .Comment-isReplyForm,.CommentGroup:focus .Comment:not(.Comment-replyFormVisible):nth-last-child(2){border-bottom-color:#38a7e8}.CommentGroup:focus .CommentReplyForm-inner{border-bottom-color:#38a7e8;border-left-color:#38a7e8;border-right-color:#38a7e8;outline:none}.Comment-reply-number{margin-left:30px;padding-bottom:12px;padding-top:2px;font-size:14px;color:#38a7e8;font-weight:300}",""])},632:function(e,t,n){var o=n(631);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(632);var r=v(n(46)),i=v(n(444)),a=v(n(387)),s=v(n(50)),l=n(484),u=v(n(630)),c=v(n(423)),p=v(n(507)),d=v(n(510)),f=v(n(506)),h=v(n(509)),m=v(n(508)),g=v(n(505));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={isDeletePopupVisible:!1,isFocused:!1,isExpanded:o.props.isSelected,isShowMoreButtonVisible:!1},o.updateShowMoreButtonVisibility=function(){if(null!=o.textarea){var e=o.textarea instanceof HTMLTextAreaElement&&!1===o.state.isExpanded&&o.textarea.scrollHeight>o.textarea.offsetHeight;e!==o.state.isShowMoreButtonVisible&&o.setState({isShowMoreButtonVisible:e})}},o.handleDeleteComment=function(){o.props.onCommentHandlingDelete(!0),o.setState({isDeletePopupVisible:!0})},o.handleDeletePopupConfirm=function(){o.setState({isDeletePopupVisible:!1}),o.props.onDeleteAnnotation(o.props.annotationId,o.props.isRootComment),o.props.onDeletePopupConfirm(),o.props.onCommentHandlingDelete(!1)},o.handleDeletePopupCancel=function(){o.setState({isDeletePopupVisible:!1}),o.div.focus(),o.props.onDeletePopupCancel(),o.props.onCommentHandlingDelete(!1)},o.expandAndFocus=function(e){o.setState({isExpanded:!0,isFocused:!0},function(){return o.textarea&&o.textarea.focus()})},o.handleTextareaFocus=function(e){o.setState({isExpanded:!0,isFocused:!0})},o.handleTextareaBlur=function(){if(o.setState({isFocused:!1}),o.textarea instanceof HTMLElement!=!1){var e=o.props.contents!==o.textarea.value&&o.lastSavedValue!==o.textarea.value;o.textarea.value&&e?(o.props.onCommentSave({contents:o.textarea.value||"",annotationId:o.props.annotationId}),o.lastSavedValue=o.textarea.value||""):o.textarea.value.trim()||(o.textarea.value=o.props.contents||""),o.updateShowMoreButtonVisibility(),o.textarea.blur()}},o.handleAcknowledgeDeletion=function(){o.props.onAcknowledgeDeletion(o.props.annotationId,o.props.isRootComment)},o.handleKeyDown=function(e){if(e.shiftKey||"Enter"!==e.key)"Escape"===e.key&&0===o.textarea.value.length&&(o.props.contents.length>0?o.handleDeleteComment():(o.handleDeletePopupConfirm(),o.props.onCommentEscape()));else{e.preventDefault();var t=o.div.closest(".CommentGroup");if(!(t instanceof HTMLElement))return;if(t.focus(),""===o.textarea.value.trim())return;var n=t.querySelector(".Comment-reply-button");if(n)return void setTimeout(function(){n&&n.focus()},0)}},o.updateTextareaHeight=function(){if(null!=o.textarea)if(o.textarea.style.height="",o.state.isExpanded)o.textarea.style.height=o.textarea.scrollHeight+"px";else{var e=Math.min(o.textarea.scrollHeight,80)+"px";o.textarea.style.height=e,o.textarea.scrollTop=0}},o.setTextareaRef=function(e){o.textarea=e},o.setDivRef=function(e){o.div=e},o.generateRemovedMessage=function(){return o.props.deletedAt&&o.props.deletedBy?(0,s.default)("Removed {d,date} by {name}",{d:new Date(o.props.deletedAt),name:o.props.deletedBy}):o.props.deletedBy?(0,s.default)("Removed by {name}",{name:o.props.deletedBy}):o.props.deletedAt?(0,s.default)("Removed {d,date}",{d:new Date(o.props.deletedAt)}):(0,s.default)("Removed")},o.handleCommentClick=function(){!1===o.props.canEdit&&o.setState({isExpanded:!0})},o.isTextareaVisible=function(){if(o.textarea){var e=o.textarea.getBoundingClientRect();return e.top>0&&e.bottom>0}return!1},y(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=(0,i.default)(this.props,e),o=(0,i.default)(this.state,t);return!1===n||!1===o}},{key:"componentDidMount",value:function(){var e=this;this.updateTextareaHeight(),"string"!=typeof this.props.contents||0===this.props.contents.length?setTimeout(function(){e.textarea&&!1===e.isTextareaVisible()?e.visiblityInterval=setTimeout(function(){e.textarea&&e.isTextareaVisible()&&(e.textarea.focus(),clearInterval(e.visiblityInterval))},500):null!=e.textarea&&e.textarea.focus()},0):this.updateShowMoreButtonVisibility()}},{key:"componentWillReceiveProps",value:function(e){null!=this.textarea&&e.contents!==this.props.contents&&(this.textarea.value=e.contents)}},{key:"componentDidUpdate",value:function(e){this.updateTextareaHeight(),this.updateShowMoreButtonVisibility();var t=e.isSelected&&!1===this.props.isSelected,n=!1===e.isSelected&&this.props.isSelected;t?this.setState({isExpanded:!1}):n&&this.setState({isExpanded:!0})}},{key:"componentWillUnmount",value:function(){this.visiblityInterval&&clearInterval(this.visiblityInterval),this.handleTextareaBlur()}},{key:"render",value:function(){var e=this.props.isRootComment?(0,s.default)("Are you sure you want to delete this comment and all its replies?"):(0,s.default)("Are you sure you want to delete this comment?"),t=(0,a.default)("Comment-title-username",{"Comment-title-usernameExtraMargin":!this.props.isFirst}),n=(0,a.default)("Comment",{"Comment-deleted":this.props.isDeleted,"Comment-replyFormVisible":this.props.replyFormVisible,"Comment-isReplyForm":this.props.isReplyForm,"Comment-root-comment":this.props.isRootComment,"Comment-isAtBottom":!1===this.props.replyFormVisible&&this.props.isLastVisibleComment}),o=(0,a.default)("CommentGroup-textarea",{"is-selected":this.props.isSelected}),i=void 0;switch(this.props.annotationType){case"ink":i=r.default.createElement(p.default,{color:this.props.iconColor});break;case"text":i=r.default.createElement(d.default,{color:this.props.iconColor});break;case"strikeout":i=r.default.createElement(m.default,{color:this.props.iconColor});break;case"square":i=r.default.createElement(f.default,{color:this.props.iconColor});break;case"highlight":i=r.default.createElement(h.default,{color:this.props.iconColor});break;case"freetext":i=r.default.createElement(g.default,{color:this.props.iconColor})}return r.default.createElement("li",{className:n,onClick:this.handleCommentClick,ref:this.setDivRef},this.props.isDeleted&&r.default.createElement("div",{className:"Comment-deleteMessage"},r.default.createElement("p",null,this.generateRemovedMessage()),r.default.createElement("button",{"aria-label":(0,s.default)("Acknowledge and remove deleted comment"),className:"Comment-button inst-button inst-button--flat Acknowledge-remove-deleted-comment-button",onClick:this.handleAcknowledgeDeletion},r.default.createElement("svg",{label:"Acknowledge delete icon",height:"13",width:"13",viewBox:"0 0 2000 2000"},r.default.createElement("path",{d:"M1743.858.012L959.869 783.877 176.005.012 0 176.142l783.74 783.989L0 1743.87 176.005 1920l783.864-783.74L1743.858 1920l176.13-176.13-783.865-783.74 783.865-783.988z",strokeWidth:"1",fillRule:"evenodd",fill:"#FFFFFF"})))),r.default.createElement("div",{className:"Comment-title"},this.props.isFirst&&r.default.createElement("div",{className:"Comment-icon",role:"presentation"},i),r.default.createElement("div",{className:t},this.props.user_name),this.props.isSelected&&r.default.createElement("div",{className:"Comment-edit-buttons"},!1,this.props.canDelete&&!this.props.isDeleted&&r.default.createElement("button",{"aria-label":(0,s.default)("delete comment entry"),className:"Comment-button inst-button inst-button--flat Delete-comment-entry-button",onClick:this.handleDeleteComment},r.default.createElement(l.DeleteSVG,null)))),this.props.shouldShowContent&&r.default.createElement("div",{className:"Comment-content",ref:this.setContentDiv},r.default.createElement("textarea",{className:o,defaultValue:this.props.contents,readOnly:!this.props.canEdit,onBlur:this.handleTextareaBlur,onFocus:this.handleTextareaFocus,onInput:this.updateTextareaHeight,onKeyDown:this.handleKeyDown,placeholder:this.props.placeholder,"aria-label":this.props.placeholder,ref:this.setTextareaRef,rows:"1",spellCheck:this.props.isSelected&&this.state.isFocused,style:{overflowY:this.state.isFocused||this.state.isExpanded?"inherit":"hidden"},tabIndex:this.props.canEdit||this.state.isExpanded?0:-1}),this.state.isShowMoreButtonVisible&&r.default.createElement(u.default,{onClick:this.expandAndFocus})),this.props.isCommentGroupStacked&&this.props.numberOfReplies>0&&r.default.createElement("div",{className:"Comment-reply-number"},1===this.props.numberOfReplies?(0,s.default)("1 Reply"):(0,s.default)("{numberOfReplies} Replies",{numberOfReplies:this.props.numberOfReplies})),this.state.isDeletePopupVisible&&r.default.createElement(c.default,{message:e,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}))}}]),t}();t.default=b},634:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,'.CommentGroup{border:none;border-radius:6px;pointer-events:all;background-color:#fff;margin-bottom:12px;font-size:.9rem;position:absolute;width:290px;-webkit-box-sizing:content-box;box-sizing:content-box;left:34px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:top .3s ease-out;transition:top .3s ease-out;margin-top:0;list-style-type:none;padding:0}.CommentGroup .Comment2{z-index:-2;top:4px;left:4px;right:-4px;bottom:-4px}.CommentGroup .Comment2,.CommentGroup .Comment3{content:" ";position:absolute;border:2px solid #c6ccd0;background-color:#fff;border-radius:6px}.CommentGroup .Comment3{z-index:-3;top:8px;left:8px;right:-8px;bottom:-8px}.Page.selection-disabled .CommentGroup{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.CommentGroup:focus{outline:none}.CommentGroup--active{-webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.14);box-shadow:0 0 10px 0 rgba(0,0,0,.14);z-index:3}.Comment-content{padding-left:6px;padding-right:6px;position:relative}.CommentGroup-textarea,.CommentGroup-textarea[disabled]{-webkit-opacity:1;-webkit-text-fill-color:#000;color:#000;background-color:#fff;border:1px solid transparent;width:235px;height:16px;margin:2px 6px 6px 29px;font-size:.9rem;resize:none;-webkit-box-sizing:content-box;box-sizing:content-box}.CommentGroup-textarea:focus{border:1px solid #31a4e7;outline:none;-webkit-transition:border .3s;transition:border .3s}.CommentGroup-hr{background-color:#b9c0c6;margin:10px 0;height:1px;border:0 none}.CommentGroup-aria-notify{font-size:0;height:0}',""])},635:function(e,t,n){var o=n(634);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(635);f(n(512));var r=f(n(46)),i=f(n(387)),a=f(n(50)),s=f(n(449)),l=f(n(633)),u=f(n(444)),c=n(623),p=n(618),d=n(134);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t){return!1===e&&!0===t},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTextareaClick=function(e){e.stopPropagation()},n.setDivRef=function(e){n.div=e},n.setAriaNotifyRef=function(e){n.ariaNotify=e},n.updateClientHeight=function(){if(!window.ResizeObserver&&n.div){var e=h(n.props.isSelected,n.props.shouldCommentGroupStack);n.props.onCommentGroupHeightChange(n.props.annotation.id,n.div.clientHeight,e?d.STACKED_COMMENT_GROUP:d.UNSTACKED_COMMENT_GROUP)}},n.handleReplyButtonClick=function(){n.setState({isReplying:!0})},n.handleCancelReply=function(){n.setState({isReplying:!1}),n.props.onDeleteAnnotation()},n.handleReplySave=function(e){var t=e.contents,o=e.annotationId;n.props.onCommentSave({annotationPayload:{contents:t},inreplyto:n.props.annotationId,annotationId:o}).then(function(){n.ariaNotify.textContent=(0,a.default)("Comment saved successfully"),setTimeout(function(){n.ariaNotify.textContent=""},500)}).catch(function(e){console.error(e),n.props.onSelectComment(!1)}),n.setState({isReplying:!1})},n.handleCommentHandlingDeleteChange=function(e){n.setState({isCommentHandlingDelete:e})},n.onAcknowledgeBaseAnnotationDeletion=function(){n.props.onDeleteAnnotation(n.props.annotation.id)},n.handleMouseEnter=function(e){n.props.onHoverAnnotation(n.props.annotationId)},n.handleMouseLeave=function(e){n.props.onHoverAnnotation(null)},n.handleCommentGroupBlur=function(e){n.props.onCommentGroupBlur(e)},n.state={isReplying:e.isCommenting,clientHeight:0,preventCommentGroupTopAnimation:!0,isCommentHandlingDelete:!1},n.height=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){if(!1===e.isVisible&&null!=this.props.managedTop)return!1;var n=e.isSelected!==this.props.isSelected||e.isVisible!==this.props.isVisible||t.isReplying!==this.state.isReplying||e.managedTop!==this.props.managedTop||e.annotation.modified_at!==this.props.annotation.modified_at||!1===(0,u.default)(e.commentReplies,this.props.commentReplies)||e.shouldCommentGroupStack!==this.props.shouldCommentGroupStack||t.preventCommentGroupTopAnimation!==this.state.preventCommentGroupTopAnimation;return n}},{key:"componentDidMount",value:function(){var e=this;this.div.addEventListener("blur",this.handleCommentGroupBlur,!0),this.setState({clientHeight:this.div.clientHeight}),setTimeout(function(){return e.updateClientHeight()},25),!1===(0===this.props.commentReplies.length)?setTimeout(function(){e.setState({preventCommentGroupTopAnimation:!1})},300):this.setState({preventCommentGroupTopAnimation:!1}),window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(t){var n=h(e.props.isSelected,e.props.shouldCommentGroupStack),o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var l=a.value;if(e.height!==l.contentRect.height){var u=l.contentRect.height;e.props.commentReplies.length>1&&u<d.MINIMAL_PREDICTED_COMMENT_WITH_REPLIES_HEIGHT&&(u=d.MINIMAL_PREDICTED_COMMENT_WITH_REPLIES_HEIGHT),e.props.onCommentGroupHeightChange(e.props.annotation.id,u,n?d.STACKED_COMMENT_GROUP:d.UNSTACKED_COMMENT_GROUP),e.height=u}}}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}}),this.resizeObserver.observe(this.div))}},{key:"componentWillUnmount",value:function(){this.div.removeEventListener("blur",this.handleCommentGroupBlur,!0),this.resizeObserver&&this.resizeObserver.disconnect(),this.props.onCommentGroupUnmount(this.props.annotation.id)}},{key:"componentDidUpdate",value:function(e,t){(e.isSelected&&!1===this.props.isSelected&&this.setState({isReplying:!1}),window.ResizeObserver)||this.div.clientHeight!==this.state.clientHeight&&(this.setState({clientHeight:this.div.clientHeight}),this.updateClientHeight())}},{key:"generatePlaceholder",value:function(e,t){return e&&t?(0,a.default)("Leave anonymous comment"):e?(0,a.default)("Leave a comment"):t?(0,a.default)("Leave anonymous reply"):(0,a.default)("Leave a reply")}},{key:"render",value:function(){var e=this,t=this.props.commentReplies.sort(g),n=t.map(function(n,o){var i=!e.props.annotation.deleted&&e.props.commentReplies[0].id===n.id,a=h(e.props.isSelected,e.props.shouldCommentGroupStack),s=!1===e.state.isReplying&&(t.length-1===o||a&&0===o),u=e.props.isAnnotatable&&e.props.sessionUserObject.user_id===n.user_id&&!n.deleted;return r.default.createElement(l.default,{annotationId:n.id,annotationType:e.props.annotation.type,canEdit:u,canDelete:e.props.isAnnotatable&&(e.props.sessionUserObject.permissions.includes("manage")||e.props.sessionUserObject.user_id===n.user_id),deletedAt:n.deleted_at,deletedBy:n.deleted_by,contents:n.contents,iconColor:e.props.iconColor,isCommentGroupStacked:a,isDeleted:n.deleted,isFirst:i,isLastVisibleComment:s,isSelected:e.props.isSelected,key:n.id,numberOfReplies:t.length-1,onAcknowledgeDeletion:e.props.onDeleteAnnotation,onCommentHandlingDelete:e.handleCommentHandlingDeleteChange,onCommentSave:e.handleReplySave,onDeleteAnnotation:e.props.onDeleteAnnotation,onDeletePopupCancel:e.props.onDeletePopupCancel,onDeletePopupConfirm:e.props.onDeletePopupConfirm,placeholder:e.generatePlaceholder(i,e.props.sessionUserObject.anonymous),replyFormVisible:e.props.isSelected&&!e.state.isReplying&&e.props.isAnnotatable&&!e.props.annotation.deleted,isRootComment:i,shouldShowContent:!0,user_name:n.user_name})}),o=n.length>0&&this.props.isSelected&&!this.state.isReplying&&this.props.isAnnotatable&&!this.props.annotation.deleted,u=null!=this.props.managedTop?this.props.managedTop:this.props.top;return r.default.createElement(c.Spring,{to:{top:u+"px"},impl:p.TimingAnimation,config:{duration:150,easing:p.Easing.C}},function(t){return r.default.createElement("ul",{className:(0,i.default)("CommentGroup",{"CommentGroup--active":e.props.isSelected}),"data-annotation-id":e.props.annotationId,id:"CommentGroup-"+e.props.annotationId,ref:e.setDivRef,tabIndex:-1,style:e.state.preventCommentGroupTopAnimation?{top:e.props.top}:t,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave},e.props.annotation.deleted&&r.default.createElement(l.default,{annotationId:s.default.v4(),annotationType:e.props.annotation.type,canEdit:!1,deletedAt:e.props.annotation.deleted_at,deletedBy:e.props.annotation.deleted_by,contents:"",iconColor:e.props.iconColor,isDeleted:!0,isFirst:!0,isLastVisibleComment:!0,isReplyForm:!1,isRootComment:!0,isSelected:e.props.isSelected,key:"deleted",onAcknowledgeDeletion:e.onAcknowledgeBaseAnnotationDeletion,onCommentHandlingDelete:e.handleCommentHandlingDeleteChange,onCommentSave:null,onDeleteAnnotation:null,onDeletePopupCancel:e.props.onDeletePopupCancel,onDeletePopupConfirm:e.props.onDeletePopupConfirm,placeholder:"",replyFormVisible:!1,shouldShowContent:!1,user_name:e.props.annotation.user_name}),e.props.isSelected||!1===e.props.shouldCommentGroupStack||e.state.isCommentHandlingDelete?n:n.slice(0,1),e.props.isSelected&&e.state.isReplying&&r.default.createElement(l.default,{annotationId:s.default.v4(),annotationType:e.props.annotation.type,canDelete:e.props.isAnnotatable,canEdit:e.props.isAnnotatable,contents:"",iconColor:e.props.iconColor,isDeleted:!1,deletedAt:e.props.annotation.deleted_at,deletedBy:e.props.annotation.deleted_by,isFirst:0===e.props.commentReplies.length,isLastVisibleComment:!1,isReplyForm:!0,isRootComment:!1,isSelected:e.props.isSelected,key:"new",onAcknowledgeDeletion:null,onCommentEscape:e.props.onCommentEscape,onCommentHandlingDelete:e.handleCommentHandlingDeleteChange,onCommentSave:e.handleReplySave,onDeleteAnnotation:e.handleCancelReply,onDeletePopupCancel:e.props.onDeletePopupCancel,onDeletePopupConfirm:e.props.onDeletePopupConfirm,placeholder:e.generatePlaceholder(n.length<=0,e.props.sessionUserObject.anonymous),replyFormVisible:!0,shouldShowContent:!0,user_name:e.props.sessionUserObject.user_name}),!1===e.props.isSelected&&!0===e.props.shouldCommentGroupStack&&r.default.createElement(r.default.Fragment,null,n.length>1&&r.default.createElement("div",{className:"Comment2"}),n.length>2&&r.default.createElement("div",{className:"Comment3"})),r.default.createElement("li",{className:"CommentReplyForm"},r.default.createElement("div",{className:"CommentReplyForm-inner "+(o?"visible":"hidden")},r.default.createElement("button",{className:"Comment-reply-button inst-button","aria-label":(0,a.default)("Reply"),onClick:e.handleReplyButtonClick},(0,a.default)("Reply")))),r.default.createElement("li",{className:"CommentGroup-aria-notify","aria-live":"polite",ref:e.setAriaNotifyRef}))})}}]),t}();function g(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}t.default=m},637:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,"",""])},638:function(e,t,n){var o=n(637);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(46),s=(o=a)&&o.__esModule?o:{default:o},l=n(134);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),i(t,[{key:"render",value:function(){var e=r(this.props.rect,2),t=r(e[0],1)[0],n=r(e[1],2),o=n[0],i=n[1],a=o-t,u=this.props.viewportWidth-t-a+this.props.widthExtension,c="M "+u+", "+(l.DEFAULT_LINE_WIDTH-1)+" C "+(u-.5*u)+", "+(l.DEFAULT_LINE_WIDTH-1)+", "+.5*u+", 1, 0, 1";return s.default.createElement("div",{className:"CommentLine-container",id:"CommentLine-container-"+this.props.annotationId},s.default.createElement("svg",{className:"CommentLine",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+u+" "+l.DEFAULT_LINE_WIDTH,strokeWidth:this.props.isSelected?l.SELECTED_LINE_WIDTH:l.DEFAULT_LINE_WIDTH,style:{left:t+a+6+"px",top:i+6+"px",width:u+"px",height:(this.props.isSelected?Math.max(this.props.height,l.SELECTED_LINE_WIDTH):Math.max(this.props.height,l.DEFAULT_LINE_WIDTH+1))+"px"}},s.default.createElement("path",{d:c,stroke:"#aaaaaa",strokeDasharray:"5, 5",fill:"none"})))}}]),t}();t.default=u},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(46),s=(o=a)&&o.__esModule?o:{default:o},l=n(134);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),i(t,[{key:"render",value:function(){var e=r(this.props.rect,2),t=r(e[0],1)[0],n=r(e[1],2),o=n[0],i=(n[1],o-t),a=this.props.viewportWidth-t-i+this.props.widthExtension,u="M "+a+", 1 C "+(a-.5*a)+", 1, "+.5*a+", "+(Math.abs(this.props.height)-1)+", 0, "+(Math.abs(this.props.height)-1),c=Math.max(Math.abs(this.props.height),l.DEFAULT_LINE_WIDTH+1);return s.default.createElement("div",{className:"CommentLine-container",id:"CommentLine-container-"+this.props.annotationId},s.default.createElement("svg",{className:"CommentLine",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+a+" "+Math.abs(this.props.height),strokeWidth:this.props.isSelected?l.SELECTED_LINE_WIDTH:l.DEFAULT_LINE_WIDTH,style:{left:t+i+6+"px",top:this.props.managedTop+l.COMMENT_LINE_TOP_OFFSET+"px",width:a+"px",height:c+"px"}},s.default.createElement("path",{d:u,stroke:"#aaaaaa",strokeDasharray:"5, 5",fill:"none"})))}}]),t}();t.default=u},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(46),s=(o=a)&&o.__esModule?o:{default:o},l=n(134);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),i(t,[{key:"render",value:function(){var e=r(this.props.rect,2),t=r(e[0],1)[0],n=r(e[1],2),o=n[0],i=n[1],a=o-t,u=this.props.viewportWidth-t-a+this.props.widthExtension,c="M "+u+", "+(this.props.height-1)+" C "+(u-.5*u)+", "+(this.props.height-1)+", "+.5*u+", 1, 0, 1";return s.default.createElement("div",{className:"CommentLine-container",id:"CommentLine-container-"+this.props.annotationId},s.default.createElement("svg",{className:"CommentLine",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+u+" "+this.props.height,strokeWidth:this.props.isSelected?l.SELECTED_LINE_WIDTH:l.DEFAULT_LINE_WIDTH,style:{left:t+a+6+"px",top:i+l.COMMENT_LINE_TOP_OFFSET+"px",width:u+"px",height:(this.props.isSelected?Math.max(this.props.height,l.SELECTED_LINE_WIDTH):Math.max(this.props.height,l.DEFAULT_LINE_WIDTH+1))+"px"}},s.default.createElement("path",{d:c,stroke:"#aaaaaa",strokeDasharray:"5, 5",fill:"none"})))}}]),t}();t.default=u},642:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".Annotation .CommentLine{position:absolute;pointer-events:none;z-index:2}",""])},643:function(e,t,n){var o=n(642);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},644:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".Comment-create{border-radius:50px;background-color:#fff;border:2px solid #b9c0c6;width:50px;height:50px;left:-24px;position:absolute;right:0;pointer-events:all;cursor:pointer;z-index:2}.Comment-create:focus{outline:none;border-color:#38a7e8}.Comment-create::-moz-focus-inner{border:0}",""])},645:function(e,t,n){var o=n(644);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(645);var r=s(n(46)),i=s(n(50)),a=s(n(387));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.setButtonRef=function(e){e instanceof HTMLElement&&(o.button=e)},o.handleClick=function(){o.props.onCreateComment()},o.stopPropagation=function(e){e.stopPropagation()},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=(0,a.default)("Comment-create",{"Comment-create--visible":this.props.isVisible});return r.default.createElement("button",{"aria-label":(0,i.default)("Create comment"),"aria-hidden":!this.props.isVisible,className:e,"data-original-top":this.props.top,onClick:this.handleClick,onTouchStart:this.stopPropagation,style:{top:this.props.top-10+"px",left:this.props.left-24+"px",position:this.props.isVisible?"absolute":"fixed",visibility:this.props.isVisible?"visible":"hidden"},id:this.props.annotationId+"-comment-create-button",ref:this.setButtonRef,tabIndex:this.props.isVisible?0:-1},r.default.createElement("img",{src:"/images/icons/create-comment-icon.svg",style:{width:"24px",height:"24px"},alt:(0,i.default)("Create comment icon")}))}}]),t}();t.default=u},647:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".Annotation{outline:none}.Annotation,.Page.is-multistroke-drawing .Annotation{pointer-events:none}.Annotation--selected{-ms-touch-action:none;touch-action:none}.AnnotationToolbar-container{position:absolute;bottom:calc(100% - 1px);left:2px;z-index:2}.AnnotationToolbar{pointer-events:all;display:inline-block;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:4px 6px;background-color:#556572;color:#fff}.AnnotationTooltip{margin-left:2px;margin-right:2px;font-size:10pt;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:content-box;box-sizing:content-box;text-align:left;cursor:text}.Annotation-button{cursor:pointer;color:#394b58;border-radius:3px;border:1px solid transparent;padding:2px}.Annotation-button:focus,.Annotation-button:hover{border-color:#dbdbdb}.Annotation-svg{position:absolute}.Annotation-svg.is-dragging{pointer-events:all}.Annotation-svg-container{outline:none;position:absolute}.textLayer>div{color:transparent;position:relative;white-space:pre;cursor:text;-webkit-transform-origin:0 0;transform-origin:0 0;display:block;float:left;margin-bottom:-100%;margin-right:-100%}",""])},648:function(e,t,n){var o=n(647);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("path",{className:"Path",fill:"none",stroke:this.props.strokeColor||"red",d:this.props.d,strokeWidth:this.props.strokeWidth||"1px",strokeOpacity:this.props.strokeOpacity||1,strokeLinecap:"round",strokeLinejoin:"round"})}}]),t}();t.default=s},650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=v(n(46)),l=v(n(387)),u=v(n(50)),c=n(394),p=v(n(487)),d=n(410),f=v(n(409)),h=v(n(398)),m=v(n(443));n(391);n(614);var g=n(134);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=d.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,i({},o.props.annotation,{color:e}),o.props.multiStrokeAnnotationId===o.props.annotation.id),o.props.onCurrentColorChange(e,"ink")},o.scaleInklist=function(e){if(1===e)return o.props.annotation.inklist;var t=o.props.annotation.inklist.gestures.map(function(t){return t.map(function(t){return t.width?i({},t,{width:t.width*e}):t})});return i({},o.props.annotation.inklist,{gestures:t})},o.updateInkStrokeWidth=function(e){var t=e/o.props.annotation.width,n=o.scaleInklist(t);o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,i({},o.props.annotation,{width:e,inklist:n})),o.props.onCurrentInkStrokeWidthChange(e,"ink")},y(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),a(t,[{key:"componentWillReceiveProps",value:function(e){"ink"===this.props.controlMode&&"ink"!==e.controlMode&&this.props.multiStrokeAnnotationId===this.props.annotation.id&&(this.props.onMultiStrokeAnnotation(null),this.props.onCreateAnnotation(this.props.viewportHeight,this.props.viewportScale,this.props.annotation),this.props.onDeselectAnnotation(this.props.annotation.id))}},{key:"render",value:function(){var e=this,t=r(this.props.annotation.rect,2),n=r(t[0],2),a=n[0],d=n[1],v=r(t[1],2),y=v[0],b=v[1],w=y-a,C=d-b,E="string"==typeof this.props.annotation.created_at,_=s.default.createElement(h.default,{controlMode:"ink",currentColor:this.props.annotation.color,currentInkWidth:this.props.annotation.width,onCurrentColorChange:this.updateColor,onCurrentInkStrokeWidthChange:this.updateInkStrokeWidth}),A=this.props.selectionBoxPadding;if("object"!==o(this.props.annotation.inklist))throw new Error("inklist missing on InkAnnotation");if(!(this.props.annotation.inklist.gestures instanceof Array))throw new Error("inklist.gestures missing on InkAnnotation");var x=this.props.annotation.inklist.gestures.map(function(e){return e.map((0,c.applyTranslatePoint)(-a+A,-b+A))}).map(function(t,n){return s.default.createElement(p.default,{annotatation:e.props.annotation,key:n,points:t,isTransparent:!1,selectionBoxPadding:A,strokeColor:e.props.annotation.color||"black",strokeWidth:e.props.annotation.width||2,viewportHeight:e.props.viewportHeight,viewportScale:e.props.viewportScale,viewportWidth:e.props.viewportWidth})}),O=this.props.isHovered||this.props.isSelected,S=(0,l.default)("InkAnnotation",{"InkAnnotation--editable":this.props.canEdit,"InkAnnotation--saved":E});return s.default.createElement(f.default,i({},this.props,{className:S,iconColor:this.props.annotation.color?this.props.annotation.color:g.DEFAULT_INK_ANNOTATION_COLOR,contents:this.props.annotation.contents,height:C,id:this.props.annotation.id,isMovable:!0,onCommentSave:this.handleCommentSave,rect:this.props.annotation.rect,render:function(t){return[s.default.createElement(m.default,{key:"selectionBox",height:C+2*e.props.selectionBoxPadding,isSelected:e.props.isSelected,isVisible:O,width:w+2*e.props.selectionBoxPadding}),x]},secondaryControls:_,selectionBoxPadding:A,title:(0,u.default)("Free draw annotation"),user_name:this.props.annotation.user_name,width:w,x:a,y:b}))}}]),t}();t.default=b},651:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".PageComments{overflow:scroll;position:absolute}.PageAnnotations{position:absolute;top:0;left:0;right:0;bottom:0}.PageAnnotations,.PageAnnotations.is-dragging,.PageAnnotations.is-dragging .Annotation--selected,.PageAnnotations.is-dragging path,.PageAnnotations.is-dragging rect{pointer-events:none}.PageAnnotations.is-dragging .Annotation:not(.Annotation--selected),.PageAnnotations.is-dragging .FreetextGroup:not(.FreetextGroup--active){pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.PageAnnotations.is-dragging,.PageAnnotations.is-dragging .Annotation,.PageAnnotations.is-dragging .FreetextGroup--active{cursor:move!important}.PageAnnotations.is-drawing .Annotation,.PageAnnotations.is-drawing .Annotation-svg,.PageAnnotations.is-drawing .FreetextGroup{pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.PageAnnotations .AnnotationToolbar{-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.3s;animation-duration:.3s}.PageAnnotations.is-drawing .AnnotationToolbar{display:none}.PageAnnotations.is-drawing,.PageAnnotations.is-drawing .FreetextGroup{pointer-events:none}.CommentContainerOffset{position:absolute;width:1px}",""])},652:function(e,t,n){var o=n(651);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(652);var a=E(n(46)),s=E(n(135)),l=E(n(50)),u=E(n(387)),c=E(n(457)),p=E(n(414)),d=E(n(444)),f=E(n(650)),h=E(n(612)),m=E(n(609)),g=E(n(606)),v=E(n(603)),y=E(n(600)),b=n(134),w=n(394),C=n(391);function E(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var A=function(e,t,n,o){return(0,c.default)(Object.keys(t).map(function(r){return[r,!0===e[r]&&o!==r?n[r]:t[r]]}))},x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDraggingStart=function(e){n.setState({draggingAnnotationId:e})},n.handleDraggingEnd=function(e){n.setState({draggingAnnotationId:e})},n.handleMoveAnnotation=function(e,t,o){var r=(0,w.translateAnnotation)(e,t,o);n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r,n.props.multiStrokeAnnotationId===e.id)},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.handleCommentGroupHeightChange=function(e,t,o){void 0===n.commentGroupHeightsCache[e]&&(n.commentGroupHeightsCache[e]=0),void 0===n.stackedCommentGroupHeightsCache[e]&&(n.stackedCommentGroupHeightsCache[e]=0);var i=o===b.UNSTACKED_COMMENT_GROUP,a=i?Object.assign({},n.commentGroupHeightsCache):Object.assign({},n.stackedCommentGroupHeightsCache);a[e]=t,i?n.commentGroupHeightsCache=a:n.stackedCommentGroupHeightsCache=a;var s=n.props.annotations.reduce(C.splitRootAnnotationsAndReplies,[[],[]]),l=r(s,2),u=l[0],c=l[1].filter(function(e){return u.some(function(t){return e.id===t.inreplyto})}),p=Object.keys(a).length>=c.length;p&&n.setState({commentGroupHeights:n.commentGroupHeightsCache,stackedCommentGroupHeights:n.stackedCommentGroupHeightsCache,isReadyForReposition:p},function(){n.repositionCommentGroups__throttled();var e=A(n.state.shouldCommentGroupStack,n.state.commentGroupHeights,n.state.stackedCommentGroupHeights,n.props.selectedAnnotationId);n.props.onCommentGroupHeightsChange(e)})},n.handleCommentGroupUnmount=function(e){var t=n.state.commentGroupHeights,o=(t[e],_(t,[e])),r=n.state.stackedCommentGroupHeights,i=(r[e],_(r,[e])),a=n.state.managedCommentGroupTops,s=(a[e],_(a,[e]));n.commentGroupHeightsCache=o,n.setState({commentGroupHeights:o,managedCommentGroupTops:s,stackedCommentGroupHeights:i},function(){var e=A(n.state.shouldCommentGroupStack,n.state.commentGroupHeights,n.state.stackedCommentGroupHeights,n.props.selectedAnnotationId);n.props.onCommentGroupHeightsChange(e)})},n.repositionCommentGroups=function(){if(!n.props.isVisible||!1!==n.state.isReadyForReposition){var e=(0,w.transformAnnotationView)({height:n.props.viewportHeight,scale:n.props.viewportScale}),t=n.props.annotations.map(e).reduce(C.splitRootAnnotationsAndReplies,[[],[]]),o=r(t,2),i=o[0],a=o[1].filter(function(e){return function(e){return"freetext"===e.type&&e.deleted}(e)||null!=n.state.commentGroupHeights[e.id]&&(e.deleted||n.props.selectedAnnotationId==e.id||i.some(function(t){return e.id===t.inreplyto}))}).slice().sort(C.compareRectYInverse);if(0!==a.length){var s={},l={},u=0,c=null,p=!0,f=!1,h=void 0;try{for(var m,g=a[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;l[v.id]=!1;var y=v.rect[1][1]<=u+b.MARGIN_BETWEEN_COMMENT_GROUPS;if(y&&null!==c){l[c.id]=!0;var E=void 0!==n.state.stackedCommentGroupHeights[c.id]&&0!==n.state.stackedCommentGroupHeights[c.id],_=n.props.selectedAnnotationId!==c.id;E&&_&&(u-=n.state.commentGroupHeights[c.id],u+=n.state.stackedCommentGroupHeights[c.id],y=v.rect[1][1]<=u+b.MARGIN_BETWEEN_COMMENT_GROUPS)}c=v;var A=y?u+b.MARGIN_BETWEEN_COMMENT_GROUPS:v.rect[1][1];s[v.id]=A,u=A+n.state.commentGroupHeights[v.id]}}catch(e){f=!0,h=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw h}}var x=(0,w.getMaxOffset)(s,a);!1===(0,d.default)(s,n.state.managedCommentGroupTops)&&(n.props.onManagedCommentGroupTopsChange(s),n.setState({managedCommentGroupTops:s})),n.state.maxOffset!==x&&n.setState({managedCommentGroupTops:s,maxOffset:x}),!1===(0,d.default)(l,n.state.shouldCommentGroupStack)&&n.setState({shouldCommentGroupStack:l})}}},n.commentGroupHeightsCache={},n.stackedCommentGroupHeightsCache={},n.state={commentGroupHeights:{},stackedCommentGroupHeights:{},shouldCommentGroupStack:(0,c.default)(n.props.annotations.map(function(e){return[e.id,!1]})),draggingAnnotationId:"",hasError:!1,isDrawing:!1,isReadyForReposition:!1,managedCommentGroupTops:{},maxOffset:0},n.repositionCommentGroups__throttled=(0,p.default)(n.repositionCommentGroups,50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"componentDidUpdate",value:function(e,t){var n=this,r=t.commentGroupHeights!==this.state.commentGroupHeights,i=t.managedCommentGroupTops!==this.state.managedCommentGroupTops,a=null!=t.draggingAnnotationId&&null==this.state.draggingAnnotationId,s=!1===e.isCommenting&&this.props.isCommenting,l=e.selectedAnnotationId!==this.props.selectedAnnotationId;(r||i||a||s||l)&&this.repositionCommentGroups__throttled();var u=e.selectedAnnotationId!==this.props.selectedAnnotationId&&this.props.annotations.some(function(e){return e.id===n.props.selectedAnnotationId}),p=this.props.annotations.filter(function(t){return!1===e.annotations.some(function(e){return t.id===e.id})});p.length>0&&this.setState({shouldCommentGroupStack:o({},this.state.shouldCommentGroupStack,(0,c.default)(p.map(function(e){return[e.id,!1]})))});e.annotations.filter(function(e){return!1===n.props.annotations.some(function(t){return t.id===e.id})});var d,f=this.props.annotations.length>e.annotations.length&&"commentReply"!==p[0].type;if(u||a||s||f){var h=function(){var e=(0,w.transformAnnotationView)({height:n.props.viewportHeight,scale:n.props.viewportScale}),t=n.props.annotations.find(function(e){return e.id===n.props.selectedAnnotationId});if(null!=t){var o=e(t);if(setTimeout(function(){n.props.changePagesContainerScrollTop(o)},0),null!=n.state.managedCommentGroupTops[n.props.selectedAnnotationId])return n.state.managedCommentGroupTops[n.props.selectedAnnotationId]-o.rect[1][1]}};d=void 0,setTimeout(function(){var e=h();e!==d&&(d=e,n.props.changeScrollTop(d)),setTimeout(function(){var e=h();e!==d&&(d=e,n.props.changeScrollTop(d)),setTimeout(function(){var e=h();e!==d&&(d=e,n.props.changeScrollTop(d))},500)},200)},25)}}},{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0},function(){console.error("Error caught in PageAnnotations",{error:e,info:t})})}},{key:"render",value:function(){var e=this,t=(0,w.transformAnnotationView)({height:this.props.viewportHeight,scale:this.props.viewportScale}),n=this.props.annotations.map(t).reduce(C.splitRootAnnotationsAndReplies,[[],[]]),i=r(n,2),c=i[0],p=i[1].slice().sort(C.compareRectYInverse),d={isAnnotatable:this.props.isAnnotatable,isShiftPressed:this.props.isShiftPressed,isVisible:this.props.isVisible,currentScrollTop:this.props.currentScrollTop,multiStrokeAnnotationId:this.props.multiStrokeAnnotationId,onCreateAnnotation:this.props.onCreateAnnotation,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.handleDraggingEnd,onDraggingStart:this.handleDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onIsPenAnnotatingChange:this.props.onIsPenAnnotatingChange,onSelectAnnotation:this.props.onSelectAnnotation,onBlockContextMenu:this.props.onBlockContextMenu,onTextSelectionDisable:this.props.onDisableTextSelection,onTextSelectionEnable:this.props.onEnableTextSelection,onUpdateAnnotation:this.props.onUpdateAnnotation,pageNumber:this.props.pageNumber,selectionBoxPadding:b.SELECTION_BOX_PADDING,sessionUserObject:this.props.sessionUserObject,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth},E=p.map(function(t){var n=t.id,r=c.filter(function(e){return t.id===e.inreplyto}).sort(O),i={annotation:t,canEdit:e.props.sessionUserObject.user_id===t.user_id&&e.props.isAnnotatable&&!t.deleted,canDelete:(e.props.sessionUserObject.permissions.includes("manage")||e.props.sessionUserObject.user_id===t.user_id)&&e.props.isAnnotatable&&!t.deleted,commentsContainerRef:e.props.commentContainerRefs[t.id],shouldCommentGroupStack:e.state.shouldCommentGroupStack[t.id],commentReplies:r,controlMode:e.props.controlMode,handlePreviousPageFocus:e.props.handlePreviousPageFocus,handleNextPageFocus:e.props.handleNextPageFocus,isHovered:!1===e.props.isDrawing&&e.props.hoveredAnnotationId===n,isAutomaticallyScrollingComments:e.props.isAutomaticallyScrollingComments,isSelected:e.props.selectedAnnotationId===n,key:t.id,managedTop:e.state.managedCommentGroupTops[t.id],onCommentGroupHeightChange:e.handleCommentGroupHeightChange,onCommentGroupUnmount:e.handleCommentGroupUnmount},s=o({},d,i,{ySortedStagedRootAnnotations:p,pageHeight:e.props.pageHeight});switch(t.type){case"square":return a.default.createElement(h.default,o({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"highlight":return a.default.createElement(m.default,s);case"strikeout":return a.default.createElement(g.default,s);case"text":return a.default.createElement(v.default,o({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"freetext":return a.default.createElement(y.default,o({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"ink":return a.default.createElement(f.default,o({},s,{onMoveAnnotation:e.handleMoveAnnotation,onMultiStrokeAnnotation:e.props.onMultiStrokeAnnotation}));default:return""}}),_=(0,u.default)("PageAnnotations",{"is-drawing":this.props.isDrawing,"is-dragging":this.state.draggingAnnotationId}),A=s.default.createPortal(a.default.createElement("div",{className:"CommentContainerOffset",style:{top:this.props.pageHeight+"px",height:this.state.maxOffset+"px"}}),this.props.commentContainerBottomOffsetRef.current);return a.default.createElement("div",{className:_,ref:this.setDivRef},this.state.hasError&&a.default.createElement("div",{style:{padding:"8px 12px",backgroundColor:"red",color:"white"}},(0,l.default)("There was an error rendering annotations")),!this.state.hasError&&E,A)}}]),t}();function O(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}t.default=x},656:function(e,t){},657:function(e,t){},658:function(e,t){},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=l(n(46)),a=l(n(413)),s=n(707);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=n(501),p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={hasError:!1},o.handleMutations=function(e){window.requestAnimationFrame(function(){setTimeout(function(){for(var e=o.div.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].setAttribute("target","_blank")},1)})},o.renderPDFAnnotationLayer=function(){o.div instanceof HTMLElement?(!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(o.div),new c.AnnotationLayerBuilder({pageDiv:o.div,pdfPage:o.props.pdfPage,renderInteractiveForms:!1,linkService:new s.SimpleLinkService}).render(o.props.viewport)):console.warn("<div> was not ready in PDFAnnotationLayer")},o.setDiv=function(e){e instanceof HTMLElement&&(o.div=e)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.pdfPage!==e.pdfPage||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth}},{key:"componentDidCatch",value:function(e,t){this.setState(function(e){return o({},e,{hasError:!0})},function(){console.error("Error caught in PDFAnnotationLayer",{error:e,info:t})})}},{key:"componentDidUpdate",value:function(){this.renderPDFAnnotationLayerDebounced()}},{key:"componentWillMount",value:function(){var e=this;this.renderPDFAnnotationLayerDebounced=(0,a.default)(function(){e.renderPDFAnnotationLayerRequest=window.requestAnimationFrame(e.renderPDFAnnotationLayer)},200)}},{key:"componentWillUnmount",value:function(){this.mutationObserver.disconnect(),window.cancelAnimationFrame(this.renderPDFAnnotationLayerRequest)}},{key:"componentDidMount",value:function(){this.mutationObserver=new window.MutationObserver(this.handleMutations),this.div instanceof HTMLElement&&this.mutationObserver.observe(this.div,{childList:!0,subtree:!0}),this.renderPDFAnnotationLayerRequest=window.requestAnimationFrame(this.renderPDFAnnotationLayer)}},{key:"render",value:function(){return i.default.createElement("div",{className:"PDFAnnotationLayer-container",style:{position:"absolute",left:0,top:0},ref:this.setDiv})}}]),t}();t.default=p},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(46)),i=a(n(413));function a(e){return e&&e.__esModule?e:{default:e}}var s=n(501),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderTextLayer=function(){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(n.div);var e=new s.TextLayerBuilder({textLayerDiv:n.div,pageIndex:n.props.pageNumber,viewport:n.props.viewport,enhanceTextSelection:n.state.isEnhancedTextSelectionEnabled});e.setTextContent(n.props.textContent),e.eventBus.on("textlayerrendered",function(){Array.from(n.div.children).forEach(function(e,t){n.state.isMSEdgeOrIE?(e.style.marginLeft=e.style.left,e.style.marginTop=e.style.top,e.style.float="left",e.style.marginBottom="-100%",e.style.marginRight="-100%"):e.classList.add("textLayer--absolute")})}),e.render(200)},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)};var o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=Boolean(window.MSInputMethodContext),i=!1===o&&!1===r;return n.state={isEnhancedTextSelectionEnabled:i,isMSEdgeOrIE:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){var e=this;this.renderTextLayerDebounced=(0,i.default)(function(){e.renderTextLayerRequest=window.requestAnimationFrame(e.renderTextLayer)},200)}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.renderTextLayerRequest)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.pageNumber!==e.pageNumber||this.props.textContent!==e.textContent}},{key:"componentDidUpdate",value:function(){this.renderTextLayerDebounced()}},{key:"componentDidMount",value:function(){this.renderTextLayerRequest=window.requestAnimationFrame(this.renderTextLayer)}},{key:"render",value:function(){return r.default.createElement("div",{className:"TextLayer-container",style:{height:this.props.viewportHeight+"px",width:this.props.viewportWidth+"px",position:"absolute",left:0,top:0}},r.default.createElement("div",{className:"textLayer",ref:this.setDiv}))}}]),t}();t.default=l},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=s(n(46)),a=s(n(432));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.setContainer=function(e){r.container=e},r.renderPage=function(){if(!1!==r.props.shouldBeRendered){var e=r.props.page,t=r.container;return t.style.width=r.props.viewportWidth+"px",t.style.height=r.props.viewportHeight+"px",e.getOperatorList().then(function(t){return new a.default.SVGGraphics(e.commonObjs,e.objs).getSVG(t,r.props.viewport).then(function(e){r.setState(function(t){return o({},t,{svg:e})}),r.container.insertBefore(e,r.container.firstChild),r.container.childNodes.length>1&&r.container.removeChild(r.container.lastChild),r.props.onRendered&&r.props.onRendered()})})}},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.page!==e.page||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.shouldBeRendered!==e.shouldBeRendered&&!1===this.props.shouldBeRendered}},{key:"componentWillUnmount",value:function(){this.props.page.cleanup()}},{key:"componentDidMount",value:function(){this.renderPage()}},{key:"componentDidUpdate",value:function(){this.renderPage()}},{key:"render",value:function(){return i.default.createElement("div",{className:"Page-svg-container"},i.default.createElement("div",{className:"pageContainer",style:{boxSizing:"content-box",border:"1px solid #B9C0C6",backgroundColor:"white",height:this.props.viewportHeight,width:this.props.viewportWidth},ref:this.setContainer}))}}]),t}();t.default=u},711:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".Page-canvas-container{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #babfc6;overflow:hidden}",""])},712:function(e,t,n){var o=n(711);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(712);var i=l(n(46)),a=l(n(413)),s=n(134);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPage=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];[].concat(u(n.div.childNodes)).forEach(function(e){e.style.width=n.props.viewportWidth+"px",e.style.height=n.props.viewportHeight+"px"}),[].concat(u(n.div.childNodes)).slice(0,-1).forEach(function(e){e.parentNode.removeChild(e)}),e?n.finishRender():n.finishRenderDebounced()},n.finishRender=function(){if(n.div instanceof HTMLElement&&!1!==n.props.shouldBeRendered){n.canvas=document.createElement("canvas"),n.canvas.className="pageContainer";var e,t,o,r=n.canvas.getContext("2d",{alpha:!1}),i=n.props.page,a=n.props.viewport.clone({scale:n.props.viewport.scale*(e=n.canvas,t=window.devicePixelRatio||1,o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,t/o)});!function(e,t,n){e.dataset.originalHeight=t,e.dataset.originalWidth=n,e.height=t,e.width=n}(n.canvas,a.height,a.width),i.render({canvasContext:r,viewport:a}).then(function(){n.div instanceof HTMLElement&&(n.div.insertBefore(n.canvas,n.div.firstChild),n.div.childNodes.length>1&&n.div.removeChild(n.div.lastChild)),"function"==typeof n.props.onRendered&&n.props.onRendered()})}},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)},n.state={maxViewportHeight:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillMount",value:function(){this.finishRenderDebounced=(0,a.default)(this.finishRender,275)}},{key:"componentWillUnmount",value:function(){this.props.page.cleanup()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.viewportHeight>this.state.maxViewportHeight&&this.setState(function(e){return o({},e,{maxViewportHeight:t.props.viewportHeight})})}},{key:"shouldComponentUpdate",value:function(e){return this.props.page!==e.page||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.customPageRotation!==e.customPageRotation||this.props.shouldBeRendered!==e.shouldBeRendered&&!1===this.props.shouldBeRendered}},{key:"componentDidMount",value:function(){this.renderPage()}},{key:"componentDidUpdate",value:function(e){var t=e.customPageRotation!==this.props.customPageRotation;this.renderPage(t)}},{key:"render",value:function(){return i.default.createElement("div",{className:"Page-canvas-container",ref:this.setDiv,style:{height:this.props.viewportHeight+2*s.PAGE_BORDER_WIDTH,width:this.props.viewportWidth+2*s.PAGE_BORDER_WIDTH}})}}]),t}();t.default=c},717:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,'.textLayer{left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1}.textLayer,.textLayer--absolute{position:absolute}.textLayer>div{color:transparent;white-space:pre;cursor:text;-webkit-transform-origin:0 0;transform-origin:0 0}.textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}.textLayer .highlight.begin{border-radius:4px 0 0 4px}.textLayer .highlight.end{border-radius:0 4px 4px 0}.textLayer .highlight.middle{border-radius:0}.textLayer .highlight.selected{background-color:#006400}.textLayer ::selection{background:#00f}.textLayer ::-moz-selection{background:#00f}.textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none}.textLayer .endOfContent.active{top:0}.annotationLayer section{position:absolute}.annotationLayer .linkAnnotation>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%;background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7") 0 0 repeat}.annotationLayer .linkAnnotation>a:hover{opacity:.2;background:#ff0;-webkit-box-shadow:0 2px 10px #ff0;box-shadow:0 2px 10px #ff0}.annotationLayer .textAnnotation img{position:absolute;cursor:pointer}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input,.annotationLayer .choiceWidgetAnnotation select,.annotationLayer .textWidgetAnnotation input,.annotationLayer .textWidgetAnnotation textarea{background-color:rgba(0,54,255,.13);border:1px solid transparent;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:9px;height:100%;padding:0 3px;vertical-align:top;width:100%}.annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}.annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],.annotationLayer .buttonWidgetAnnotation.radioButton input[disabled],.annotationLayer .choiceWidgetAnnotation select[disabled],.annotationLayer .textWidgetAnnotation input[disabled],.annotationLayer .textWidgetAnnotation textarea[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.annotationLayer .buttonWidgetAnnotation.radioButton input:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .textWidgetAnnotation input:hover,.annotationLayer .textWidgetAnnotation textarea:hover{border:1px solid #000}.annotationLayer .choiceWidgetAnnotation select:focus,.annotationLayer .textWidgetAnnotation input:focus,.annotationLayer .textWidgetAnnotation textarea:focus{background:none;border:1px solid transparent}.annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.annotationLayer .textWidgetAnnotation input.comb:focus{width:115%}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none}.annotationLayer .popupWrapper{position:absolute;width:20em}.annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;-webkit-box-shadow:0 2px 5px #333;box-shadow:0 2px 5px #333;border-radius:2px;padding:.6em;margin-left:5px;cursor:pointer;word-wrap:break-word}.annotationLayer .popup h1{font-size:1em;border-bottom:1px solid #000;padding-bottom:.2em}.annotationLayer .popup p{padding-top:.2em}.annotationLayer .fileAttachmentAnnotation,.annotationLayer .highlightAnnotation,.annotationLayer .squigglyAnnotation,.annotationLayer .strikeoutAnnotation,.annotationLayer .underlineAnnotation{cursor:pointer}.pdfViewer .canvasWrapper{overflow:hidden}.pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:1px auto -8px;position:relative;overflow:visible;border:9px solid transparent;background-clip:content-box;background-color:#fff}.pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}.pdfViewer.singlePageView{display:inline-block}.pdfViewer.singlePageView .page{margin:0;border:none}.pdfViewer .page canvas{margin:0;display:block}.pdfPresentationMode:-webkit-full-screen .pdfViewer .page{margin-bottom:100%;border:0}.pdfPresentationMode:-moz-full-screen .pdfViewer .page{margin-bottom:100%;border:0}.pdfPresentationMode:-ms-fullscreen .pdfViewer .page{margin-bottom:100%!important;border:0}.pdfPresentationMode:fullscreen .pdfViewer .page{margin-bottom:100%;border:0}',""])},718:function(e,t,n){var o=n(717);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},719:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".page-number{margin-top:10px}.Page-container{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex}.PageContainerComments{-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;overflow:auto;width:365px}.Page{margin-top:50px;margin-bottom:50px;position:relative;-webkit-box-sizing:content-box;box-sizing:content-box}.Page:focus{outline:none}.Page:focus .pageContainer{border-color:#7fbaf7}.pageContainer{width:100%;height:100%}.PDFAnnotationLayer-container .textWidgetAnnotation{font-family:auto;font-size:small}.Draw--highlight .PDFAnnotationLayer-container,.Draw--strikeout .PDFAnnotationLayer-container{pointer-events:none}.Page-inner{margin:auto;position:absolute}.Page-show-previous-comments-button{padding:0;margin:0;position:absolute;right:0;top:0;width:334px;background-color:#f2f2f2;color:#3e8bdc;height:32px;border:0 none;border-bottom:1px solid #a7aeb4;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:.9rem;cursor:pointer}.Page-comment-line{-webkit-box-shadow:#000 0 10px 15px -13px inset;box-shadow:inset 0 10px 15px -13px #000;width:90%;margin-left:22px;height:1px}.Page-comment-line-top-margin{margin-top:50px}.Page-comment-shadow{position:relative;z-index:5;height:20px;width:83%}.Page-comment-top-shadow{-webkit-box-shadow:0 10px 15px -13px #000 inset;box-shadow:inset 0 10px 15px -13px #000;margin:0 15px -20px 35px}.Page-comment-bottom-shadow{-webkit-box-shadow:0 -10px 15px -13px #000 inset;box-shadow:inset 0 -10px 15px -13px #000;margin:-20px 15px 0 35px}",""])},720:function(e,t,n){var o=n(719);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(720),n(718);var s=S(n(46)),l=(S(n(135)),S(n(387))),u=S(n(449)),c=S(n(457)),p=S(n(714)),d=S(n(414)),f=S(n(50)),h=S(n(713)),m=S(n(710)),g=S(n(709)),v=S(n(708)),y=S(n(653)),b=S(n(596)),w=S(n(591)),C=S(n(590)),E=S(n(587)),_=S(n(586)),A=n(134),x=n(391),O=n(137);function S(e){return e&&e.__esModule?e:{default:e}}var P=/Edge/.test(navigator.userAgent),T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleManagedCommentGroupTopsChange=function(e){n.setState({managedCommentGroupTops:e})},n.handleCommentGroupHeightsChange=function(e){n.setState({commentGroupHeights:e},function(){n.updateNumberOfCommentsOutOfViewAndCheckIntersection()})},n.handleScrollTopEvent_throttled_wrapper=function(e){e.persist(),n.handleScrollTopEvent_throttled(e)},n.updateRenderOutput=function(){n.setState(function(e){return i({},e,{renderMethod:window.location.hash.includes("svg")?"svg":"canvas"})})},n.enableTextSelection=function(){n.setState(function(e){return i({},e,{isTextSelectionEnabled:!0})})},n.disableTextSelection=function(){n.setState(function(e){return i({},e,{isTextSelectionEnabled:!1})})},n.handleMultiStrokeAnnotation=function(e){n.setState(function(t){return i({},t,{multiStrokeAnnotationId:e})})},n.handleDrawingStart=function(){n.props.onSelectAnnotation(null),n.props.onHoverAnnotation(null),n.setState(function(e){return i({},e,{isDrawing:!0})})},n.handleCreateAnnotation=function(e){var t=n.getPdfViewport(n.state.pdfPage,n.props.viewportScale,n.props.customPageRotation),o=i({},e,{id:"string"==typeof e.id?e.id:u.default.v4(),page:n.props.pageNumber,rotation:t.rotation}),r=n.state.pageViewport?n.state.pageViewport.height:n.props.viewportHeight;"ink"===o.type&&o.inklist&&o.inklist.gestures&&o.inklist.gestures.length>1?n.props.onUpdateAnnotation(r,n.props.viewportScale,i({},o,{user_name:n.props.sessionUserObject.user_name,user_id:n.props.sessionUserObject.user_id}),Boolean(n.state.multiStrokeAnnotationId)):n.props.onCreateAnnotation(r,n.props.viewportScale,i({},o,{user_name:n.props.sessionUserObject.user_name,user_id:n.props.sessionUserObject.user_id}),Boolean(n.state.multiStrokeAnnotationId)),window.getSelection().removeAllRanges()},n.onCreateAnnotation__addRotation=function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.getPdfViewport(n.state.pdfPage,n.props.viewportScale,n.props.customPageRotation),s=i({},o,{rotation:a.rotation});return n.props.onCreateAnnotation(e,t,s,r)},n.handleDrawingEnd=function(){n.setState(function(e){return i({},e,{isDrawing:!1})})},n.ensurePdfPageLoaded=function(){!n.state.pdfPage&&n.props.pdfDocument&&n.props.pdfDocument.getPage(n.props.pageNumber+1).then(function(e){var t=n.getPdfViewport(e,n.props.viewportScale,n.props.customPageRotation);n.setState(function(n){return i({},n,{pdfPage:e,pageViewport:t})},function(){n.loadTextLayer()})}).catch(function(e){console.log("GET_PAGE_ERROR",e)})},n.handleVisiblityChange=function(e){if(n.lastIntersectionRatio!==e){var t=Boolean(e),o=n.state.wasVisibleSinceLastScale||t;n.setState({isVisible:t,wasVisibleSinceLastScale:o},function(){n.props.onVisibilityChange(n.props.pageNumber,e),n.lastIntersectionRatio=e})}},n.loadTextLayer=function(){n.state.pdfPage&&n.state.pdfPage.getTextContent({normalizeWhitespace:!0}).then(function(e){n.setState(function(t){return i({},t,{textContent:e})})}).catch(function(e){console.error("GET_TEXT_CONTENT_ERROR",e)})},n.handleRendered=function(){if(0===n.props.pageNumber&&window.DocViewer&&!1===n.state.isCanvasRendered){var e=Date.now()-window.DocViewer.start;(0,O.sendMetric)("first_page_rendered",e,n.props.sessionId);var t=n.props.pdfDocument&&n.props.pdfDocument.transport&&n.props.pdfDocument.transport._fullReader&&n.props.pdfDocument.transport._fullReader._loaded;if(t){(0,O.sendMetric)("pdf_file_byte_size",t,n.props.sessionId);var o=t/1e6;if(o>=10){var r=e/1e3/o;(0,O.sendMetric)("seconds_until_first_page_rendered_per_pdf_megabyte",r,n.props.sessionId)}}}n.setState(function(e){return i({},e,{isCanvasRendered:!0})})},n.setDiv=function(e){n.pageDiv=e,n.setState({pageDiv:e})},n.handleManageScrollTop=function(e){(0,p.default)(e,{cancelOnUserAction:!1,element:n.commentsDiv,speed:500,minDuration:500,maxDuration:1e3,onComplete:function(){n.setState({currentScrollTop:n.commentsDiv.scrollTop,isAutomaticallyScrollingComments:!1,stagedScrollTop:Number.MAX_SAFE_INTEGER})}})},n.updateNumberOfCommentsOutOfViewAndCheckIntersection=function(){var e=Object.keys(n.state.managedCommentGroupTops).filter(function(e){var t=n.state.managedCommentGroupTops[e],o=n.state.commentGroupHeights[e];return n.state.currentScrollTop>t+o}),t=(n.state.pageViewport?n.state.pageViewport.height:0)+2*A.PAGE_BORDER_WIDTH,o=Object.keys(n.state.managedCommentGroupTops).filter(function(e){var o=n.state.managedCommentGroupTops[e];n.state.commentGroupHeights[e];return n.state.currentScrollTop+t<o}),r=Object.keys(n.state.managedCommentGroupTops).filter(function(e){var t=n.state.commentGroupHeights[e],o=n.state.managedCommentGroupTops[e];return n.state.currentScrollTop>o&&n.state.currentScrollTop<o+t}),i=Object.keys(n.state.managedCommentGroupTops).filter(function(e){var o=n.state.managedCommentGroupTops[e],r=n.state.commentGroupHeights[e];return n.state.currentScrollTop+t>o&&n.state.currentScrollTop+t<o+r});n.setState({numberOfCommentsAboveView:e.length,numberOfCommentsBelowView:o.length,isCommentIntersectingWithTop:r.length>0,isCommentIntersectingWithBottom:i.length>0})},n.handleScrollTopEvent=function(e){e.target?n.setState({currentScrollTop:e.target.scrollTop},n.updateNumberOfCommentsOutOfViewAndCheckIntersection):console.warn("event.target does not exist")},n.setCommentsRef=function(e){n.commentsDiv=e},n.handlePreviousPageFocus=function(){n.props.focusOnPreviousPage(n.props.pageRef)},n.handleNextPageFocus=function(){n.props.focusOnNextPage(n.props.pageRef)},n.updateNumberOfCommentsAboveView=function(e){n.setState({numberOfCommentsAboveView:e})},n.updateNumberOfCommentsBelowView=function(e){n.setState({numberOfCommentsBelowView:e})},n.handleContextMenuBlock=function(e){n.setState({shouldBlockContextMenu:e})},n.commentContainerBottomOffsetRef=s.default.createRef(),n.state={commentContainerRefs:(0,c.default)(n.props.annotations.map(function(e){return[e.id,s.default.createRef()]})),commentGroupHeights:{},currentScrollTop:0,stagedScrollTop:Number.MAX_SAFE_INTEGER,draggingAnnotationId:null,isCommentIntersectingWithTop:!1,isCommentIntersectingWithBottom:!1,isCanvasRendered:!1,isDrawing:!1,isAutomaticallyScrollingComments:!1,isTextSelectionEnabled:!0,isVisible:0===n.props.pageNumber,lowestCommentAboveThreshhold:null,managedCommentGroupTops:{},multiStrokeAnnotationId:null,numberOfCommentsAboveView:0,numberOfCommentsBelowView:0,pageDiv:null,pageViewport:null,pdfPage:null,renderMethod:window.location.hash.includes("svg")?"svg":"canvas",shouldBlockContextMenu:!1,textContent:null,wasVisibleSinceLastScale:!1},n.handleManageScrollTop__throttled__wrapper=function(e){!1!==(e!==n.state.stagedScrollTop)&&void 0!==e&&(n.setState({isAutomaticallyScrollingComments:!0,stagedScrollTop:e}),n.handleManageScrollTop__throttled(e))},n.handleManageScrollTop__throttled=(0,d.default)(n.handleManageScrollTop,100,{leading:!1,trailing:!0}),n.handleScrollTopEvent_throttled=(0,d.default)(n.handleScrollTopEvent,100,{leading:!1,trailing:!0}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.viewportHeight!==this.props.viewportHeight,o=e.viewportWidth!==this.props.viewportWidth;if(this.state.wasVisibleSinceLastScale&&(n||o)&&this.setState(function(e){return i({},e,{wasVisibleSinceLastScale:!1})}),"object"===r(this.state.pdfPage)&&e.viewportScale!==this.props.viewportScale){if(void 0===this.state.pdfPage)return;this.setState(function(n){return i({},n,{pageViewport:null!==n.pdfPage&&"object"===r(n.pdfPage)?t.getPdfViewport(n.pdfPage,e.viewportScale,t.props.customPageRotation):t.state.pageViewport})})}else e.customPageRotation!==this.props.customPageRotation&&this.setState({pageViewport:this.getPdfViewport(this.state.pdfPage,this.props.viewportScale,e.customPageRotation)})}},{key:"componentWillMount",value:function(){var e=0===this.props.pageNumber;this.lastIntersectionRatio=e?.9:0}},{key:"componentDidMount",value:function(){this.ensurePdfPageLoaded(),this.props.currentPageNum===this.props.pageNumber+1&&this.props.onPageResize(),window.addEventListener("hashchange",this.updateRenderOutput),setTimeout(this.updateNumberOfCommentsOutOfViewAndCheckIntersection,1e3),setTimeout(this.updateNumberOfCommentsOutOfViewAndCheckIntersection,1500)}},{key:"componentDidUpdate",value:function(e,t){!1===t.isVisible&&!0===this.state.isVisible&&(setTimeout(this.updateNumberOfCommentsOutOfViewAndCheckIntersection,750),setTimeout(this.updateNumberOfCommentsOutOfViewAndCheckIntersection,1500))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=e.annotations.filter(function(e){return!1===t.props.annotations.some(function(t){return t.id===e.id})});n.length>0&&this.setState({commentContainerRefs:i({},this.state.commentContainerRefs,(0,c.default)(n.map(function(e){return[e.id,s.default.createRef()]})))})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.updateRenderOutput)}},{key:"getPdfViewport",value:function(e,t,n){return"number"==typeof n?e.getViewport(t,n):e.getViewport(t)}},{key:"render",value:function(){var e=this,t=this.state.pageViewport?this.state.pageViewport.width:0,n=this.state.pageViewport?this.state.pageViewport.height:0,r=this.props.currentPageNum-2===this.props.pageNumber,i=this.props.currentPageNum===this.props.pageNumber,a=this.state.isVisible||this.state.wasVisibleSinceLastScale||i||r,u=Math.trunc(t),c=this.props.annotations.reduce(x.splitRootAnnotationsAndReplies,[[],[]]),p=o(c,2),d=(p[0],p[1].slice().sort(x.compareRectY).map(function(t){return s.default.createElement("div",{key:t.id,ref:e.state.commentContainerRefs[t.id],id:"Annotation-"+t.id+"-comment-group"})})),O=(0,x.getPageWidthAfterScaling)(this.props.displayCommentRegion||"selection"!==this.props.controlMode||this.props.documentHasAnnotations,t),S=(0,l.default)("Page-container",{"Pen-is-annotating":P&&"selection"!==this.props.controlMode||this.props.isPenAnnotating});return s.default.createElement("div",{className:S,ref:this.props.pageRef,style:{width:O+"px",borderTop:0!==this.props.pageNumber?"1px dashed #A8A8A8":""}},s.default.createElement("div",{className:(0,l.default)("Page","PageComponent",{"Page--not-rendered":!1===this.state.isCanvasRendered,"selection-disabled":!1===this.state.isTextSelectionEnabled,"is-multistroke-drawing":Boolean(this.state.multiStrokeAnnotationId)}),id:"page-"+this.props.pageNumber,ref:this.setDiv,style:{height:n+2*A.PAGE_BORDER_WIDTH+"px",width:u+2*A.PAGE_BORDER_WIDTH+"px"},tabIndex:"-1"},this.state.pageDiv instanceof HTMLElement&&s.default.createElement(w.default,{onVisibilityChange:this.handleVisiblityChange,pageDiv:this.state.pageDiv,pageNumber:this.props.pageNumber}),this.state.pdfPage&&"svg"===this.state.renderMethod&&s.default.createElement(m.default,{shouldBeRendered:a,page:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:n,viewportWidth:t,viewportScale:this.props.viewportScale,onRendered:this.handleRendered}),this.state.pdfPage&&"canvas"===this.state.renderMethod&&s.default.createElement(h.default,{shouldBeRendered:a,page:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:n,viewportWidth:t,viewportScale:this.props.viewportScale,onRendered:this.handleRendered,customPageRotation:this.props.customPageRotation}),this.state.pdfPage&&this.state.textContent&&s.default.createElement(b.default,{currentBgColor:this.props.currentBgColor,currentColor:this.props.currentColor,currentFont:this.props.currentFont,height:n,isHoveringOverAnnotation:Boolean(this.props.hoveredAnnotationId),multiStrokeAnnotationId:this.state.multiStrokeAnnotationId,onChange:this.handleCreateAnnotation,onDrawingEnd:this.handleDrawingEnd,onDrawingStart:this.handleDrawingStart,onMultiStrokeAnnotation:this.handleMultiStrokeAnnotation,onBlockContextMenu:this.handleContextMenuBlock,onIsPenAnnotatingChange:this.props.onIsPenAnnotatingChange,shouldBeRendered:a,shouldBlockContextMenu:this.state.shouldBlockContextMenu,strokeWidth:this.props.strokeWidth,style:{position:"absolute",height:n+"px",width:t+"px"},type:this.props.controlMode,viewportHeight:n,viewportScale:this.props.viewportScale,viewportWidth:t,width:t},s.default.createElement(g.default,{pageNumber:this.props.pageNumber,textContent:this.state.textContent,viewport:this.state.pageViewport,viewportHeight:n,viewportWidth:t,viewportScale:this.props.viewportScale}),a&&this.state.isCanvasRendered&&null!==this.state.pdfPage&&s.default.createElement(v.default,{pdfPage:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:n,viewportWidth:t,viewportScale:this.props.viewportScale}),a&&this.state.isCanvasRendered&&s.default.createElement(y.default,{annotations:this.props.annotations,changePagesContainerScrollTop:this.props.changePagesContainerScrollTop,changeScrollTop:this.handleManageScrollTop__throttled__wrapper,commentContainerRefs:this.state.commentContainerRefs,commentContainerBottomOffsetRef:this.commentContainerBottomOffsetRef,controlMode:this.props.controlMode,currentScrollTop:this.state.currentScrollTop,handlePreviousPageFocus:this.handlePreviousPageFocus,handleNextPageFocus:this.handleNextPageFocus,hoveredAnnotationId:this.props.hoveredAnnotationId,isAnnotatable:this.props.isAnnotatable,isCommenting:this.props.isCommenting,isDrawing:this.state.isDrawing,isAutomaticallyScrollingComments:this.state.isAutomaticallyScrollingComments,isShiftPressed:this.props.isShiftPressed,isVisible:this.state.isVisible,multiStrokeAnnotationId:this.state.multiStrokeAnnotationId,onCreateAnnotation:this.onCreateAnnotation__addRotation,onCommentGroupHeightsChange:this.handleCommentGroupHeightsChange,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDisableTextSelection:this.disableTextSelection,onEnableTextSelection:this.enableTextSelection,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onIsPenAnnotatingChange:this.props.onIsPenAnnotatingChange,onManagedCommentGroupTopsChange:this.handleManagedCommentGroupTopsChange,onMultiStrokeAnnotation:this.handleMultiStrokeAnnotation,onSelectAnnotation:this.props.onSelectAnnotation,onBlockContextMenu:this.handleContextMenuBlock,onUpdateAnnotation:this.props.onUpdateAnnotation,pageHeight:n,pageNumber:this.props.pageNumber,selectedAnnotationId:this.props.selectedAnnotationId,sessionUserObject:this.props.sessionUserObject,viewportScale:this.props.viewportScale,viewportHeight:n,viewportWidth:t})),this.state.someCommentsAboveThreshhold&&s.default.createElement("button",{className:"Page-show-previous-comments-button",onClick:this.handlePreviousCommentButtonClick},(0,f.default)("See previous comments for page {pageNumber}",{pageNumber:this.props.pageNumber+1}))),s.default.createElement("div",{style:{overflow:"hidden"}},s.default.createElement("div",{style:{position:"relative"}},s.default.createElement(C.default,{numberOfCommentsOutOfView:this.state.numberOfCommentsAboveView},s.default.createElement(_.default,null))),s.default.createElement("div",{className:"Page-comment-line-top-margin"}),(this.state.isCommentIntersectingWithTop||this.state.numberOfCommentsAboveView>0)&&s.default.createElement("div",{className:"Page-comment-line"}),s.default.createElement("div",{className:"PageContainerComments",onScroll:this.handleScrollTopEvent_throttled_wrapper,ref:this.setCommentsRef,style:{height:n+2*A.PAGE_BORDER_WIDTH+"px"}},d,s.default.createElement("div",{ref:this.commentContainerBottomOffsetRef})),(this.state.isCommentIntersectingWithBottom||this.state.numberOfCommentsBelowView>0)&&s.default.createElement("div",{className:"Page-comment-line"}),s.default.createElement("div",{style:{position:"relative"}},s.default.createElement(C.default,{numberOfCommentsOutOfView:this.state.numberOfCommentsBelowView},s.default.createElement(E.default,null)))))}}]),t}();t.default=T},723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(46)),i=u(n(50)),a=u(n(387)),s=u(n(396)),l=u(n(450));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p={Small:r.default.createElement("svg",{width:18,height:18},r.default.createElement("path",{d:"M2.207 17.207L.793 15.793 16.639-.054l1.415 1.415z",fill:"#384A58",fillRule:"nonzero"})),Medium:r.default.createElement("svg",{width:19,height:19},r.default.createElement("path",{d:"M2.914 18.914L.086 16.086 15.932.239l2.829 2.829z",fill:"#384A58",fillRule:"nonzero"})),Large:r.default.createElement("svg",{width:21,height:21},r.default.createElement("path",{d:"M4.975 20.975l-4.95-4.95L15.872.18l4.95 4.95z",fill:"#384A58",fillRule:"nonzero"}))},d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.isSelected||o.props.onCurrentInkStrokeWidthChange(o.props.width)},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.sizeValue?(0,i.default)(this.props.sizeValue):void 0,t=(0,i.default)("Annotation stroke width {strokeWidth}",{strokeWidth:e}),n=(0,a.default)("InkStrokeWidthButton",{selected:this.props.isSelected});return r.default.createElement(l.default,{title:e,ariaLabel:t,onClick:this.handleClick,className:n},function(t){return r.default.createElement("div",{className:"InkStrokeWidthButton-outer"},p[e])})}}]),t}();t.default=d,d.propTypes={width:s.default.number,sizeValue:s.default.string,isSelected:s.default.bool,onCurrentInkStrokeWidthChange:s.default.func}},724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.height,t=this.props.width;return a.default.createElement("svg",{width:t,height:e,viewBox:"0 0 19 18",version:"1.1",preserveAspectRatio:"xMidYMin"},a.default.createElement("g",{"data-id":"Free-Text-02",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-619.000000, -114.000000)"},a.default.createElement("g",{"data-id":"Color-Details",transform:"translate(0.000000, 98.000000)",fill:"currentColor"},a.default.createElement("g",{"data-id":"Sizing",transform:"translate(519.000000, 13.000000)"},a.default.createElement("path",{d:"M105.392613,15.0779754 L104.666211,17.24487 C104.600547,17.4500694 104.532832,17.6901491 104.463064,17.9651163 C104.393297,18.2400835 104.358413,18.4801631 104.358413,18.6853625 C104.358413,18.849522 104.391245,18.9931594 104.456908,19.1162791 C104.522572,19.2393987 104.608755,19.3399449 104.715458,19.4179207 C104.822162,19.4958964 104.943228,19.5554034 105.078659,19.5964432 C105.214091,19.6374831 105.355676,19.6580027 105.50342,19.6580027 L106.562244,19.6580027 L106.562244,21 L100,21 L100,19.6580027 L100.307798,19.6580027 C100.529413,19.6580027 100.732557,19.6333792 100.917237,19.5841313 C101.101916,19.5348835 101.274281,19.4425451 101.434337,19.3071135 C101.594392,19.1716819 101.746237,18.9849533 101.889877,18.746922 C102.033516,18.5088907 102.179206,18.2010963 102.326949,17.8235294 L107.793434,3 L111.253078,3 L116.522572,17.8481532 C116.645691,18.2010962 116.774965,18.4945269 116.910397,18.7284542 C117.045828,18.9623815 117.19357,19.1470581 117.353625,19.2824897 C117.513681,19.4179213 117.683994,19.5143636 117.864569,19.5718194 C118.045145,19.6292753 118.233925,19.6580027 118.430917,19.6580027 L118.886457,19.6580027 L118.886457,21 L110.563611,21 L110.563611,19.6580027 L111.548564,19.6580027 C111.671683,19.6580027 111.798905,19.6395351 111.930233,19.6025992 C112.06156,19.5656633 112.178522,19.5082083 112.281122,19.4302326 C112.383721,19.3522568 112.467852,19.2517106 112.533516,19.128591 C112.59918,19.0054713 112.632011,18.85773 112.632011,18.6853625 C112.632011,18.4801631 112.607387,18.2831747 112.55814,18.0943912 C112.508892,17.9056078 112.459645,17.7414508 112.410397,17.6019152 L111.52394,15.0779754 L105.392613,15.0779754 Z M109.689466,9.40218878 C109.599179,9.11490964 109.50684,8.81327107 109.412449,8.49726402 C109.318057,8.18125697 109.223667,7.85909877 109.129275,7.53077975 C109.034883,7.20246074 108.944597,6.87619861 108.858413,6.55198358 C108.772229,6.22776856 108.696307,5.91792213 108.630643,5.62243502 C108.556771,5.87688226 108.470589,6.15594923 108.372093,6.45964432 C108.273597,6.76333941 108.168947,7.0752378 108.05814,7.39534884 L107.725718,8.35567715 C107.614911,8.67578819 107.51026,8.98358265 107.411765,9.27906977 L105.922025,13.5389877 L111.019152,13.5389877 L109.689466,9.40218878 Z","data-id":"A"})))))}}]),t}();t.default=s},725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(46)),i=c(n(50)),a=c(n(387)),s=c(n(396)),l=c(n(450)),u=c(n(724));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d={Small:10,Medium:15,Large:18},f=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.isSelected||o.props.onCurrentTextSizeChange(o.props.font)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.sizeValue?(0,i.default)(this.props.sizeValue):void 0,t=(0,i.default)("Annotation markup text size {textSize}",{textSize:e}),n=(0,a.default)("TextSizeButton",{selected:this.props.isSelected}),o=d[this.props.sizeValue];return r.default.createElement(l.default,{title:e,ariaLabel:t,onClick:this.handleClick,className:n},function(e){return r.default.createElement("div",{className:"TextSizeButton-outer"},r.default.createElement(u.default,{height:o,width:o}))})}}]),t}();t.default=f,f.propTypes={font:s.default.string,sizeValue:s.default.string,isSelected:s.default.bool,onCurrentTextSizeChange:s.default.func}},726:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".ColorButton{border:0 none;background-color:#fff;padding:0;margin:0;-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ColorButton-inner{display:inline-block;padding:0 2px;margin:8px 0}.ColorButton-selection-circle{r:10.5}.ColorButton:active .ColorButton-selection-circle{r:11}.ColorButton:focus .ColorButton-selection-circle{stroke:#38a7e8}.ColorButton-main-circle{r:8.5}.ColorButton:active .ColorButton-main-circle{r:9.25}.ColorButton:focus{outline:none}.ColorButton:-moz-focusring{outline:none}.ColorButton::-moz-focus-inner{border:0}",""])},727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(504);var r=l(n(46)),i=l(n(50)),a=n(134),s=l(n(450));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.onCurrentColorChange(o.props.colorValue)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t=a.FRIENDLY_COLORS[this.props.colorValue]?(0,i.default)(a.FRIENDLY_COLORS[this.props.colorValue]):void 0,n=r.default.createElement("circle",{className:"ColorButton-main-circle",cx:"12.5",cy:"12.5",r:"8.5",fill:this.props.colorValue});"transparent"===this.props.colorValue&&(n=r.default.createElement("g",{stroke:"red",strokeWidth:"1.5"},r.default.createElement("circle",{cx:"12.5",cy:"12.5",r:"7",stroke:"red",strokeWidth:"1.5",fill:"white"}),r.default.createElement("line",{x1:"7",y1:"7",x2:"18",y2:"18"}))),"#FFFFFF"===this.props.colorValue&&(n=r.default.createElement("circle",{className:"ColorButton-main-circle",cx:"12.5",cy:"12.5",r:"7",stroke:"#595959",fill:"#FFFFFF"}));var o=this.props.isBackground?(0,i.default)("Annotation markup background color {colorName}",{colorName:t}):(0,i.default)("Annotation markup color {colorName}",{colorName:t});return r.default.createElement(s.default,{title:t,ariaLabel:o,onClick:this.handleClick,className:"ColorButton"},function(t){return r.default.createElement("div",{className:"ColorButton-inner"},r.default.createElement("svg",{style:{width:"25px",height:"25px"}},(e.props.isSelected||t.isHovered||t.isFocused)&&r.default.createElement("circle",{className:"ColorButton-selection-circle",cx:"12.5",cy:"12.5",r:"10.5",stroke:t.isHovered?"#aaa":"#717F8A",strokeWidth:"2.5",fill:"none"}),n))})}}]),t}();t.default=c},728:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".SecondaryControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:1px solid #d2d1d1;position:fixed;left:0;right:0;width:inherit;pointer-events:all;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;z-index:10;cursor:auto;-ms-touch-action:none;touch-action:none;overflow-x:auto;-webkit-transform:translateX(0);transform:translateX(0)}.SecondaryControls-label{margin-left:30px;color:#556572;font-size:14px}.SecondaryControls-buttons{margin-left:8px;-ms-flex-negative:0;flex-shrink:0}.SecondaryControls-annotation,.SecondaryControls-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:default;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},729:function(e,t,n){var o=n(728);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M9 0v2c3.859 0 7 3.14 7 7s-3.141 7-7 7-7-3.14-7-7c0-1.847.735-3.586 2-4.882V6.5h2V1H.5v2h1.791A8.992 8.992 0 0 0 0 9c0 4.962 4.037 9 9 9s9-4.038 9-9-4.037-9-9-9",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},731:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".DocumentControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},732:function(e,t,n){var o=n(731);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(732);var r=c(n(50)),i=c(n(46)),a=n(134),s=c(n(579)),l=c(n(511)),u=c(n(730));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=s.default.enabled,f=window&&window.DocViewer&&window.DocViewer.document&&window.DocViewer.document.id&&/(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})/.test(window.DocViewer.document.id),h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.scaleUp=function(){o.props.onPageScale(a.SCALE_MODIFIER)},o.scaleDown=function(){o.props.onPageScale(-a.SCALE_MODIFIER)},o.toggleFullscreen=function(){o.props.toggleFullscreen()},o.rotatePageClockwise=function(){0===o.props.pageNumberToAnnotationNumber[o.props.currentPageNum-1]&&o.props.rotatePageClockwise(o.props.currentPageNum-1)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.currentPageScale<=a.MIN_SCALE+a.SCALE_MODIFIER,t=this.props.currentPageScale>=a.MAX_SCALE-a.SCALE_MODIFIER,n=this.props.isFullscreen?(0,r.default)("Exit Full Screen"):(0,r.default)("Enter Full Screen"),o=this.props.pageNumberToAnnotationNumber[this.props.currentPageNum-1]>0;return i.default.createElement("nav",{className:"DocumentControls",style:{marginRight:"12px"}},i.default.createElement("div",{style:{display:"inline-flex",alignItems:"center",userSelect:"none"}},!1===f&&i.default.createElement("button",{className:"AnnotationControlButton","aria-label":(0,r.default)("Rotate Page Clockwise By 90 Degrees"),title:(0,r.default)("Rotate Page Clockwise By 90 Degrees"),onClick:this.rotatePageClockwise,disabled:o},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},i.default.createElement(u.default,null)))),i.default.createElement(l.default,{style:{marginLeft:"8px",marginRight:"4px"}}),i.default.createElement("button",{className:"AnnotationControlButton","aria-label":(0,r.default)("Zoom Out"),title:(0,r.default)("Zoom Out"),disabled:e,"aria-disabled":e,onClick:this.scaleDown},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},i.default.createElement("svg",{width:"14",height:"2",viewBox:"0 0 14 2"},i.default.createElement("path",{d:"M0 0h14v2H0z",fill:"#F5F5F5",fillRule:"evenodd"}))))),i.default.createElement("span",{style:{textTransform:"uppercase",fontSize:"0.75rem",color:"#EEEEEF",marginLeft:"4px",marginRight:"4px"},"aria-hidden":"true"},(0,r.default)("Zoom")),i.default.createElement("button",{className:"AnnotationControlButton","aria-label":(0,r.default)("Zoom In"),title:(0,r.default)("Zoom In"),disabled:t,"aria-disabled":t,onClick:this.scaleUp},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},i.default.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},i.default.createElement("path",{d:"M8 6V0H6v6H0v2h6v6h2V8h6V6H8z",fill:"#F5F5F5"})))))),i.default.createElement(l.default,{style:{marginLeft:"8px",marginRight:"4px"}}),d&&i.default.createElement("div",{className:"ViewerControls--page-controls"},i.default.createElement("button",{"aria-label":n,className:"AnnotationControlButton full-screen-button",onClick:this.toggleFullscreen,title:n},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},this.props.isFullscreen?i.default.createElement("svg",{width:"17px",height:"17px",viewBox:"0 0 17 17"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"translate(-698.000000, -930.000000)",fill:"#2B3B46"},i.default.createElement("path",{d:"M713.690612,930 L715.000371,931.309759 L710.33285,935.977279 L713.335847,935.977279 L713.335847,937.830763 L707.169607,937.830763 L707.169607,931.663597 L709.023092,931.663597 L709.023092,934.66752 L713.690612,930 Z M699.663597,939.170163 L705.829837,939.170163 L705.829837,945.335476 L703.978205,945.335476 L703.978205,942.33248 L699.309759,947 L698,945.690241 L702.668447,941.022721 L699.663597,941.022721 L699.663597,939.170163 Z",fill:"#F5F5F5"})))):i.default.createElement("svg",{width:"17px",height:"17px",viewBox:"0 0 17 17"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("polygon",{points:"10.1523248 -0.000102881281 10.1523248 2.05752274 13.4887648 2.05752274 2.05762562 13.4876331 2.05762562 10.1522219 0 10.1522219 0 17 6.84983569 17 6.84983569 14.9423744 3.51236694 14.9423744 14.9435061 3.51226405 14.9435061 6.848704 17.0001029 6.848704 17.0001029 -0.000102881281",fill:"#F5F5F5"})))))),i.default.createElement(l.default,{style:{marginLeft:"8px",marginRight:"4px"}})))}}]),t}();t.default=h},734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"12",height:"21",viewBox:"0 0 12 21",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M0 0v15.89l3.604-3.477L6.97 20.42l2.62-1.098-3.237-7.697H11.6",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},735:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".AnnotationControlButton{width:48px;padding:0;border:0 none;color:#fff;background-color:#556572;margin-top:0;margin-bottom:0;cursor:pointer;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.AnnotationControlButton:disabled{opacity:.4}.AnnotationControlButton-outer{width:44px;margin:1px;border:1px solid #556572}.AnnotationControlButton-inner,.AnnotationControlButton-outer{-webkit-box-sizing:content-box;box-sizing:content-box;display:-webkit-box;display:-ms-flexbox;display:flex}.AnnotationControlButton-inner{margin:0;height:44px;width:48px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.AnnotationControlButton-inner img,.AnnotationControlButton-inner svg{fill:red}.AnnotationControlButton:hover:enabled{background-color:#5f707b}.AnnotationControlButton.selected:hover:enabled{background-color:#f5f5f5;border-color:#f5f5f5}.AnnotationControlButton:hover:enabled .AnnotationControlButton-outer{border-color:#5f707b}.AnnotationControlButton:focus{border-color:#b5bcc2;outline:none}.AnnotationControlButton:focus .AnnotationControlButton-outer{border-color:#38a7e8}.AnnotationControlButton:active .AnnotationControlButton-outer{-webkit-box-shadow:inset 0 0 2px #000;box-shadow:inset 0 0 2px #000}.AnnotationControlButton.selected{outline:none;background-color:#fff}.AnnotationControlButton.selected .AnnotationControlButton-outer{border-color:#fff;border:1px solid #fff;color:#556572}.AnnotationControlButton.selected:focus .AnnotationControlButton-outer{border:1px solid #38a7e8}",""])},736:function(e,t,n){var o=n(735);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(736);var r=a(n(46)),i=a(n(387));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=(0,i.default)("AnnotationControlButton",{selected:this.props.currentControlMode===this.props.controlMode});return r.default.createElement("button",{key:"point","aria-label":this.props["aria-label"],className:e,onClick:this.props.onClick,title:this.props.tooltip},r.default.createElement("div",{className:"AnnotationControlButton-outer"},r.default.createElement("div",{className:"AnnotationControlButton-inner"},this.props.children)))}}]),t}();t.default=s},738:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".AnnotationControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},739:function(e,t,n){var o=n(738);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(739);var r=h(n(50)),i=h(n(46)),a=h(n(737)),s=h(n(734)),l=h(n(510)),u=h(n(509)),c=h(n(508)),p=h(n(507)),d=h(n(506)),f=h(n(505));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.toggleAnnotationType=function(e,t){t.stopPropagation(),o.props.onChange(e)},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){return i.default.createElement("nav",{className:"AnnotationControls",style:{marginRight:"12px"}},this.props.isAnnotatable&&[i.default.createElement(a.default,{key:"select","aria-label":(0,r.default)("Enter selection mode"),tooltip:(0,r.default)("Selection"),controlMode:"selection",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"selection")},i.default.createElement(s.default,null)),i.default.createElement(a.default,{key:"point","aria-label":(0,r.default)("point annotation"),tooltip:(0,r.default)("Point annotation"),controlMode:"point",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"point")},i.default.createElement(l.default,null)),i.default.createElement(a.default,{key:"highlight","aria-label":(0,r.default)("highlight annotation"),tooltip:(0,r.default)("Highlight annotation"),controlMode:"highlight",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"highlight")},i.default.createElement(u.default,null)),i.default.createElement(a.default,{key:"freetext","aria-label":(0,r.default)("freetext annotation"),tooltip:(0,r.default)("Freetext annotation"),controlMode:"freetext",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"freetext")},i.default.createElement(f.default,null)),i.default.createElement(a.default,{key:"strikeout","aria-label":(0,r.default)("strikeout annotation"),tooltip:(0,r.default)("Strikeout annotation"),controlMode:"strikeout",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"strikeout")},i.default.createElement(c.default,null)),i.default.createElement(a.default,{key:"draw","aria-label":(0,r.default)("free draw annotation"),tooltip:(0,r.default)("Free draw annotation"),controlMode:"ink",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"ink")},i.default.createElement(p.default,null)),i.default.createElement(a.default,{key:"area","aria-label":(0,r.default)("area annotation"),tooltip:(0,r.default)("Area annotation"),controlMode:"area",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"area")},i.default.createElement(d.default,null))])}}]),t}();t.default=g},741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e="string"==typeof this.props.color?this.props.color:"#FFFFFF";return a.default.createElement("svg",{width:"18px",height:"17px",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.default.createElement("g",{id:"More",transform:"translate(-16.000000, -16.000000)",fillRule:"nonzero",fill:e},a.default.createElement("path",{d:"M23.7071,24.6555864 L23.7071,16 L25.7071,16 L25.7071,24.6155864 L27.9799932,22.3426932 L29.3942068,23.7569068 L24.6871,28.4640136 L19.9799932,23.7569068 L21.3942068,22.3426932 L23.7071,24.6555864 Z M20.1213136,31 L29.2928864,31 L31.9999932,28.2928932 L33.4142068,29.7071068 L30.1213136,33 L19.2928864,33 L15.9999932,29.7071068 L17.4142068,28.2928932 L20.1213136,31 Z",id:"download"}))))}}]),t}();t.default=s},742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(50)),i=s(n(46)),a=s(n(741));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.clickHandler=function(e){return function(t){t.preventDefault(),e()}},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=(0,r.default)("Download with Annotations & Comments");return i.default.createElement("div",null,i.default.createElement("button",{className:"download-button--button",onClick:this.clickHandler(this.props.generateMergedPdf),title:this.props.text||e,"aria-label":this.props.text||e},i.default.createElement(a.default,{color:this.props.color||"#ffffff"})))}}]),t}();t.default=u},743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statuses=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(50)),i=s(n(46)),a=s(n(742));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.statuses=["None","Waiting","Done","Error"];var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.renderWaiting=function(){return i.default.createElement("div",null,(0,r.default)("Please wait..."))},o.renderError=function(){return i.default.createElement(a.default,{generateMergedPdf:o.props.generateMergedPdf,text:(0,r.default)("Download annotated PDF")})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"renderNone",value:function(){return i.default.createElement(a.default,{generateMergedPdf:this.props.generateMergedPdf,text:(0,r.default)("Download annotated PDF")})}},{key:"render",value:function(){switch(this.props.mergedPdfStatus){case"None":return this.renderNone();case"Waiting":return this.renderWaiting();case"Error":return this.renderError();case"Done":return this.renderNone();default:return i.default.createElement("span",null)}}}]),t}();t.default=u},744:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".download-button--icon{color:inherit;display:inline-block;font-size:24px;margin-right:12px;vertical-align:top}.download-button--content{padding:24px}.download-button--list{list-style:none;margin:0;padding:0}.download-button--item{font-size:13px;color:#394b58}.download-button--item+.download-button--item{border-top:1px solid #b9c0c6;margin-top:12px;padding-top:12px}.download-button--button{background-color:transparent;font-size:16px;border:none;height:48px;width:48px}.download-button--button:hover{background-color:#5f707b}",""])},745:function(e,t,n){var o=n(744);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(745);var r=a(n(46)),i=a(n(743));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("div",{style:{minWidth:"50px",paddingLeft:"10px",paddingRight:"10px",textAlign:"center"}},r.default.createElement(i.default,{generateMergedPdf:this.props.generateMergedPdf,annotatedPdfUrl:this.props.annotatedPdfUrl,mergedPdfStatus:this.props.mergedPdfStatus,mergedPdfError:this.props.mergedPdfError}))}}]),t}();t.default=s},747:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(46),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e={},t=[];a.default.Children.forEach(this.props.children,function(n){if("string"==typeof n)t.push(n);else{if(!n.key)throw new Error("ComplexMessage children must have a key, or be a formatted message string with placeholders.");e[n.key]=n}});var n=t.reduce(function(t,n){return t.concat(n.split("\0||\0").map(function(t,n){return n%2==1?e[t]:t}))},[]);return a.default.createElement.apply(a.default,["span",this.props].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)))}}],[{key:"placeholder",value:function(e){return"\0||\0"+e+"\0||\0"}}]),t}();t.default=s},748:function(e,t,n){(e.exports=n(386)(!1)).push([e.i,".ViewerControls{background-color:#556572;color:#fff;font-size:14px;line-height:24px;overflow-x:auto}@media (min-width:938px){.ViewerControls--with-annotations{height:48px}.SecondaryControls{top:48px}}@media (max-width:937px){.ViewerControls--with-annotations{height:98px}.SecondaryControls{top:98px}}.ViewerControls-primary{-ms-touch-action:none;touch-action:none;pointer-events:all;display:-webkit-box;display:-ms-flexbox;display:flex}.ViewerControls--download,.ViewerControls--title{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap}.ViewerControls--current-page{-moz-appearance:textfield;margin-top:10px;border-radius:3px;border:0;height:28px;width:36px;background-color:#fff;color:#596c79;font-size:14px;text-align:center;vertical-align:top}.ViewerControls--current-page::-webkit-inner-spin-button,.ViewerControls--current-page::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.ViewerControls--page-controls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap}",""])},749:function(e,t,n){var o=n(748);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(749);var i=m(n(747)),a=m(n(387)),s=m(n(746)),l=m(n(50)),u=m(n(46)),c=m(n(511)),p=m(n(740)),d=m(n(733)),f=m(n(398)),h=m(n(722));n(391);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return e>0&&e<=t}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPageChange=function(e){g(e,n.props.numPages)?(n.setState(function(t){return o({},t,{pageNumInputValue:e})}),n.props.onPageChange(e-1)):n.setState(function(e){return o({},e,{pageNumInputValue:n.props.currentPageNum})})},n.onInputChange=function(e){var t=e.target&&"string"==typeof e.target.value?parseInt(e.target.value,10):n.state.pageNumInputValue;n.setState(function(e){return o({},e,{pageNumInputValue:t})})},n.resetInputIfInvalid=function(){var e=n.props,t=e.currentPageNum,r=e.numPages;g(n.state.pageNumInputValue,r)||n.setState(function(e){return o({},e,{pageNumInputValue:t})})},n.onKeyPress=function(e){if("Enter"===e.key){var t=n.state.pageNumInputValue;n.onPageChange(t)}},n.nextPage=function(){var e=n.props.currentPageNum;n.onPageChange(e+1)},n.previousPage=function(){var e=n.props.currentPageNum;n.onPageChange(e-1)},n.rotatePageClockwise=function(){n.props.rotatePageClockwise(n.props.currentPageNum-1)},n.state={pageNumInputValue:n.props.currentPageNum},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.PureComponent),r(t,[{key:"componentWillReceiveProps",value:function(e){e.currentPageNum!==this.state.pageNumInputValue&&this.setState(function(t){return o({},t,{pageNumInputValue:parseInt(e.currentPageNum,10)})})}},{key:"render",value:function(){var e=this.props,t=e.numPages,n=e.annotatedPdfUrl,o=e.generateMergedPdf,r=e.mergedPdfStatus,m=e.mergedPdfError,g=(e.isAnnotatable,(0,a.default)("ViewerControls",{"ViewerControls--with-annotations":this.props.isAnnotatable}));return u.default.createElement("nav",{className:g},u.default.createElement("div",{className:"ViewerControls-primary"},n?u.default.createElement("div",{className:"ViewerControls--download"},u.default.createElement(s.default,{annotatedPdfUrl:n,generateMergedPdf:o,mergedPdfStatus:r,mergedPdfError:m}),u.default.createElement(c.default,{style:{marginRight:"18px"}})):"",u.default.createElement("div",{className:"ViewerControls--title"}),t>1&&u.default.createElement("div",{className:"ViewerControls--page-controls"},u.default.createElement(i.default,{className:"ViewerControls--page-number",style:{display:"flex",alignItems:"center"}},(0,l.default)("Page {pageInput} of {totalPages, number}",{pageInput:i.default.placeholder("pageInput"),totalPages:t}),u.default.createElement("div",{key:"pageInput"},u.default.createElement("button",{disabled:1===this.props.currentPageNum,className:"AnnotationControlButton","aria-label":(0,l.default)("Previous Page"),title:(0,l.default)("Previous Page"),onClick:this.previousPage},u.default.createElement("div",{className:"AnnotationControlButton-outer"},u.default.createElement("div",{className:"AnnotationControlButton-inner"},u.default.createElement("svg",{viewBox:"0 0 2000 2000",height:"16",width:"16"},u.default.createElement("path",{d:"M1352.005.012l176.13 176.13L744.27 960.131l783.864 783.74L1352.005 1920 391.887 960.13z",fill:"#F5F5F5",fillRule:"evenodd"}))))),u.default.createElement("input",{"aria-label":(0,l.default)("Current Page Number"),className:"ViewerControls--current-page",value:this.state.pageNumInputValue,onBlur:this.resetInputIfInvalid,onChange:this.onInputChange,onKeyPress:this.onKeyPress,type:"number",min:"1",max:t,step:"1",disabled:1===t}),u.default.createElement("button",{disabled:this.props.currentPageNum===this.props.numPages,className:"AnnotationControlButton","aria-label":(0,l.default)("Next Page"),title:(0,l.default)("Next Page"),onClick:this.nextPage},u.default.createElement("div",{className:"AnnotationControlButton-outer"},u.default.createElement("div",{className:"AnnotationControlButton-inner"},u.default.createElement("svg",{viewBox:"0 0 2000 2000",height:"16",width:"16"},u.default.createElement("path",{d:"M568.13.012L392 176.142l783.864 783.989L392 1743.87 568.13 1920l960.118-959.87z",fill:"#F5F5F5",fillRule:"evenodd"}))))))),u.default.createElement(c.default,{style:{marginLeft:"16px",marginRight:"10px"}})),u.default.createElement(d.default,{currentPageNum:this.props.currentPageNum,currentPageScale:this.props.currentPageScale,isFullscreen:this.props.isFullscreen,onPageScale:this.props.onPageScale,pageNumberToAnnotationNumber:this.props.pageNumberToAnnotationNumber,rotatePageClockwise:this.props.rotatePageClockwise,toggleFullscreen:this.props.toggleFullscreen}),u.default.createElement(h.default,{query:"(min-width: 938px)"},u.default.createElement(p.default,{isAnnotatable:this.props.isAnnotatable,controlMode:this.props.controlMode,onChange:this.props.onControlModeChange}))),u.default.createElement(h.default,{query:"(max-width: 937px)"},this.props.isAnnotatable&&u.default.createElement("div",null,u.default.createElement("hr",{style:{margin:0},"aria-hidden":!0}),u.default.createElement("div",{className:"ViewerControls-primary-overflow",style:{float:"right"}},u.default.createElement(p.default,{isAnnotatable:this.props.isAnnotatable,controlMode:this.props.controlMode,onChange:this.props.onControlModeChange})))),!this.props.selectedAnnotationId&&u.default.createElement(f.default,{controlMode:this.props.controlMode,currentColor:this.props.currentColor,currentBgColor:this.props.currentBgColor,currentInkWidth:this.props.currentInkWidth,currentFont:this.props.currentFont,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange}))}}]),t}();t.default=v},751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(46)),i=s(n(50)),a=n(134);function s(e){return e&&e.__esModule?e:{default:e}}var l={freetext:(0,i.default)("free text"),highlight:(0,i.default)("highlight"),ink:(0,i.default)("drawing"),square:(0,i.default)("area"),strikeout:(0,i.default)("strikeout"),text:(0,i.default)("point")};function u(e){return e.created_at}function c(e){return!e.inreplyto}function p(e){return e.inreplyto}function d(e){return e.deleted_at&&e.deleted_by?(0,i.default)("Removed {d,date} by {name}",{d:new Date(e.deleted_at),name:e.deleted_by}):e.deleted_by?(0,i.default)("Removed by {name}",{name:e.deleted_by}):e.deleted_at?(0,i.default)("Removed {d,date}",{d:new Date(e.deleted_at)}):(0,i.default)("Removed")}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.annotationsByPage).map(function(t){var n=e.props.annotationsByPage[t].filter(u).filter(c).map(function(n){var o=function(e){return a.FRIENDLY_COLORS[e]?(0,i.default)(a.FRIENDLY_COLORS[e]):void 0}(n.color),s=e.props.annotationsByPage[t].filter(u).filter(p).filter(function(e){return n.id===e.inreplyto}).map(function(e){return r.default.createElement("li",{key:e.id},e.deleted&&r.default.createElement("div",{className:"ScreenreaderAnnotation-deleted"},d(e)),r.default.createElement("div",{className:"ScreenreaderAnnotation-author"},(0,i.default)("Author")," :",e.user_name),r.default.createElement("div",{className:"ScreenreaderAnnotation-createdat"},(0,i.default)("Created at { createdAt, time, short }",{createdAt:new Date(e.created_at)})),e.contents&&r.default.createElement("div",{className:"ScreenreaderAnnotation-root-comment"},(0,i.default)("Comment Reply")," :",e.contents))});return r.default.createElement("li",{key:n.id,className:"ScreenreaderAnnotation"},r.default.createElement("h4",null,(0,i.default)("Annotation of type { type }",{type:l[n.type]||n.type})),n.deleted&&r.default.createElement("div",{className:"ScreenreaderAnnotation-deleted"},d(n)),r.default.createElement("div",{className:"ScreenreaderAnnotation-author"},(0,i.default)("Author")," :",n.user_name),o&&r.default.createElement("div",{className:"ScreenreaderAnnotation-color"},(0,i.default)("Color")," :",o),r.default.createElement("div",{className:"ScreenreaderAnnotation-createdat"},(0,i.default)("Created at { createdAt, time, short }",{createdAt:new Date(n.created_at)})),n.contents&&r.default.createElement("div",{className:"ScreenreaderAnnotation-root-comment"},(0,i.default)("Comment")," :",n.contents),Boolean(s.length)&&r.default.createElement("div",{className:"ScreenreaderAnnotation-replies"},r.default.createElement("h5",null,(0,i.default)("Replies")),r.default.createElement("ol",null,s)))});return r.default.createElement("div",{key:t,className:"ScreenreaderAnnotations-page"},r.default.createElement("h3",null,(0,i.default)("Page { pageNumber, number }",{pageNumber:parseInt(t,10)+1})),r.default.createElement("ol",null,n))});return r.default.createElement("div",{className:"ScreenreaderAnnotations screenreader-only"},r.default.createElement("h2",null,(0,i.default)("Annotations")),t)}}]),t}();t.default=f},787:function(e,t,n){(t=e.exports=n(386)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Lato:400,\n  100,\n  100italic,\n  300,\n  300italic,\n  400italic,\n  700,\n  700italic,\n  900,\n  900italic);",""]),t.push([e.i,"body{background-color:#f2f2f2}button{border-radius:0}body,textarea{font-family:Lato,sans-serif}h1{font-size:inherit;font-weight:400}a{color:#008ee2;cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}.selection-disabled{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}#App{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.Pages{padding:32px;padding-top:42px;-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#f2f2f2;overflow:auto}.Pen-is-annotating{-ms-touch-action:none;touch-action:none}.Page--not-rendered .textLayer div{background-color:#ccc}.inst-button{background-color:#f5f5f5;border-radius:3px;border:1px solid #dbdbdb;padding:6px;cursor:pointer;color:#394b58;outline:none}.inst-button::-moz-focus-inner{border:0}.inst-button--flat{background-color:transparent;border-color:transparent}.inst-button:hover{background-color:#dbdbdb;border-color:#dbdbdb}.inst-button--flat:hover{background-color:transparent}.inst-button:focus{border-color:#38a7e8;outline:none}.inst-button:active{-webkit-box-shadow:inset 0 0 2px #000;box-shadow:inset 0 0 2px #000}.screenreader-only{position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);width:1px;overflow:hidden;height:0}.DocViewer--error{border:1px solid red;background-color:#ffe4e1}.Pages-has-secondary-toolbar{padding-top:0;margin-top:42px}",""])},788:function(e,t,n){var o=n(787);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(385)(o,r);o.locals&&(e.exports=o.locals)},789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(788);var i=w(n(46)),a=w(n(785)),s=w(n(387)),l=w(n(457)),u=w(n(528)),c=w(n(414)),p=w(n(50)),d=n(391),f=n(134),h=w(n(143)),m=w(n(751)),g=w(n(750)),v=w(n(721)),y=(w(n(513)),w(n(423))),b=n(137);function w(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=[],_=/Edge/.test(navigator.userAgent),A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDisableAnnotations=function(){n.setState({isAnnotatable:!1,controlMode:"selection"})},n.handlePointerDown=function(e){(0,d.isPenEvent)(e)&&(n.isPenActive=!0)},n.handlePointerUp=function(e){(0,d.isPenEvent)(e)&&(n.isPenActive=!1)},n.handlePointerLeave=function(e){(0,d.isPenEvent)(e)&&(n.isPenActive=!1)},n.handleTouchMove=function(e){n.isPenActive&&"selection"!==n.state.controlMode&&e.preventDefault()},n.listenForFirstInteraction=function(){document.addEventListener("mousedown",n.handleFirstInteraction),document.addEventListener("keydown",n.handleFirstInteraction),document.addEventListener("touchstart",n.handleFirstInteraction),document.addEventListener("pointerdown",n.handleFirstInteraction);var e=document.querySelector(".Pages");null!=e&&e.addEventListener("scroll",n.handleFirstInteraction)},n.stopListeningToFirstInteraction=function(){document.removeEventListener("mousedown",n.handleFirstInteraction),document.removeEventListener("keydown",n.handleFirstInteraction),document.removeEventListener("touchstart",n.handleFirstInteraction),document.removeEventListener("pointerdown",n.handleFirstInteraction),document.querySelector(".Pages").removeEventListener("scroll",n.handleFirstInteraction)},n.handleFirstInteraction=function(){n.stopListeningToFirstInteraction(),window.DocViewer&&(0,b.sendMetric)(n.state.isAnnotatable?"annotatable_first_interaction":"readonly_first_interaction",Date.now()-window.DocViewer.start,n.props.sessionId)},n.handleScaledPosition=function(e,t){if(n.pagesDiv instanceof HTMLElement){var o=e/t*n.pagesDiv.scrollTop;n.pagesDiv.scrollTop=o,setTimeout(function(){(o<n.pagesDiv.scrollTop-50||o>n.pagesDiv.scrollTop+50)&&(n.pagesDiv.scrollTop=o)},0)}},n.handleIsCommenting=function(e){var t=e.isCommenting;n.setState(function(e){return o({},e,{isCommenting:t})})},n.handleAnnotationCommentPresence=function(e,t){var r=e.data?e.data.filter(function(e){return e.contents&&"freetext"!==e.type}):E;n.setState(function(e){return o({},e,{displayCommentRegion:r.length>0||Boolean(t)})})},n.handleControlModeChange=function(e){n.state.controlMode!==e&&"selection"===e&&n.props.selectAnnotation(null),n.setState(function(t){return o({},t,{controlMode:e,isPenAnnotating:!1})})},n.handleCurrentColorChange=function(e,t){var r=o({},n.state.colors,C({},n.state.controlMode,e));n.setState({colors:r,isPenAnnotating:!1},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"Color",e)}catch(e){console.info(e)}})},n.handleCurrentBgColorChange=function(e,t){var r=o({},n.state.bgColors,C({},t||n.state.controlMode,e));n.setState({bgColors:r,isPenAnnotating:!1},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"BgColor",e)}catch(e){console.info(e)}})},n.handleCurrentTextSizeChange=function(e,t){n.setState({freetextFont:e,isPenAnnotating:!1},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"Font",e)}catch(e){console.info(e)}})},n.handleCurrentInkStrokeWidthChange=function(e,t){n.setState({inkStrokeWidth:e,isPenAnnotating:!1},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"StrokeWidth",e)}catch(e){console.info(e)}})},n.handleVisibilityChange=function(e,t){var r=Object.assign({},n.state.visiblePages,C({},String(e),t));n.setState(function(e){return o({},e,{visiblePages:r,currentPageNum:(0,d.getMostVisiblePage)(r)})})},n.handleWindowResize=function(e){if(n.props.isFullscreen||!1===n.isItSafeToHandleWindowResize)n.isItSafeToHandleWindowResize=!0;else{var t=n.props.document.viewport?n.props.document.viewport.width:0,o=(0,d.getPageWidthAfterScaling)(n.state.displayCommentRegion,t);if(document.body instanceof HTMLElement){var r=70+(window.innerWidth-document.body.offsetWidth),i=document.querySelector("#App");n.prevScrolltop=i.scrollTop,n.prevScale=n.props.currentPageScale,n.props.scalePageByRatio(window.innerWidth-r,o)}}},n.updateViewerPage=function(e){n.setState({currentPageNum:e},function(){return n.focusAndScrollToPage(e)})},n.focusAndScrollToPage=function(e){var t=document.querySelector("#page-"+e);if(t instanceof HTMLElement!=!1){var o=document.querySelector(".ViewerControls");if(o instanceof HTMLElement){var r=o.getBoundingClientRect().height;n.pagesDiv instanceof HTMLElement&&(n.pagesDiv.scrollTop=t.offsetTop-r-f.MARGIN_BETWEEN_PAGES)}}},n.setDivRef=function(e){e instanceof HTMLElement&&(n.pagesDiv=e)},n.focusOnPreviousPage=function(e){var t=n.state.pageRefs.indexOf(e),o=0===t?n.state.pageRefs.length-1:t-1;if(null!=n.state.pageRefs[o].current.querySelector("#page-"+o+" .Annotation")){var r=n.state.pageRefs[o].current.querySelectorAll("#page-"+o+" .Annotation"),i=r[r.length-1];(0,d.isElementFreetextAnnotation)(i)?i.querySelector("textarea").focus():i.querySelector(".Annotation-svg-container").focus()}},n.focusOnNextPage=function(e){var t=n.state.pageRefs.indexOf(e),o=t===n.state.pageRefs.length-1?0:t+1;if(null!=n.state.pageRefs[o].current.querySelector("#page-"+o+" .Annotation")){var r=n.state.pageRefs[o].current.querySelector("#page-"+o+" .Annotation");(0,d.isElementFreetextAnnotation)(r)?r.querySelector("textarea").focus():r.querySelector(".Annotation-svg-container").focus()}else n.state.pageRefs[o].current.querySelector("#page-"+o).focus()},n.handleKeyDown=function(e){"Shift"===e.key&&n.setState({isShiftPressed:!0})},n.handleKeyUp=function(e){"Shift"===e.key&&n.setState({isShiftPressed:!1})},n.handleFocusOut=function(e){!1===n.pagesDiv.contains(e.relatedTarget)&&n.setState({isShiftPressed:!1})},n.handleChangePagesContainerScrollTop=function(e){var t=e.rect[0][1]-e.rect[1][1],o=document.querySelector("#Annotation-"+e.id);if(null!=o){var r=document.querySelector(".ViewerControls").getBoundingClientRect().height+(null!=document.querySelector(".SecondaryControls")?document.querySelector(".SecondaryControls").getBoundingClientRect().height:0),i=window.innerHeight,a=void 0,s=void 0;if((0,d.isElementFreetextAnnotation)(o)){var l=o.getBoundingClientRect(),u=l.top;l.bottom;s=(a=u+n.pagesDiv.scrollTop)+t}else{s=(a=o.querySelector(".Annotation-svg-container").getBoundingClientRect().top+n.pagesDiv.scrollTop)+t}!1===(s<=n.pagesDiv.scrollTop+i&&n.pagesDiv.scrollTop+r<=a)&&(n.pagesDiv.scrollTop=a-r)}},n.confirmGraderLimitModal=function(){n.props.dismissGraderLimitModal(),n.handleDisableAnnotations()},n.handleIsPenAnnotatingChange=function(e){n.state.isPenAnnotating!==e&&n.setState({isPenAnnotating:e})},n.isPenActive=!1,n.lastWindowInnerWidth=window.innerWidth,n.isItSafeToHandleWindowResize=!0,n.state={controlMode:"selection",colors:{point:n.props.localStorage.pointColor||f.DEFAULT_POINT_ANNOTATION_COLOR,highlight:n.props.localStorage.highlightColor||f.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,strikeout:n.props.localStorage.strikeoutColor||f.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,ink:n.props.localStorage.inkColor||f.DEFAULT_INK_ANNOTATION_COLOR,area:n.props.localStorage.areaColor||f.DEFAULT_AREA_ANNOTATION_COLOR,freetext:n.props.localStorage.freetextColor||f.DEFAULT_FREETEXT_ANNOTATION_COLOR},bgColors:{freetext:n.props.localStorage.freetextBgColor||f.DEFAULT_FREETEXT_BACKGROUND_COLOR},freetextFont:n.props.localStorage.freetextFont||f.DEFAULT_FONT,currentPageNum:0,hasError:!1,isCommenting:!1,isPenAnnotating:!1,isShiftPressed:!1,displayCommentRegion:!1,visiblePages:{},hasAnyPageLoadedSuccessfully:!1,isAnnotatable:n.props.session.isAnnotatable,inkStrokeWidth:parseInt(n.props.localStorage.inkStrokeWidth)||f.DEFAULT_INK_STROKE_WIDTH,pageRefs:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(e){return o({},e,{hasError:!0})},function(){console.error("Error caught in PDFjsViewer",{error:e,info:t})})}},{key:"shouldComponentUpdate",value:function(e,t){return!1!==this.state.hasAnyPageLoadedSuccessfully||!1!==this.props.document.wasPageLoadedSuccessfully}},{key:"componentDidMount",value:function(){var e=document.querySelector(".Pages");e instanceof HTMLElement&&(this.pagesDiv=e),this.props.loadDocument(this.props.session.data.url),this.props.session.showAnnotations&&this.props.loadAnnotations(this.props.session.data.url),this.handleWindowResizeThrottled=(0,c.default)(this.handleWindowResize,100,{leading:!1}),this.handleAnnotationCommentPresence(this.props.annotations,this.state.isCommenting),window.addEventListener("resize",this.handleWindowResizeThrottled),this.listenForFirstInteraction(),this.pagesDiv.addEventListener("touchmove",this.handleTouchMove),this.pagesDiv.addEventListener("pointerdown",this.handlePointerDown),this.pagesDiv.addEventListener("pointerup",this.handlePointerUp),this.pagesDiv.addEventListener("pointerleave",this.handlePointerLeave)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResizeThrottled),this.pagesDiv.removeEventListener("touchmove",this.handleTouchMove),this.pagesDiv.removeEventListener("pointerdown",this.handlePointerDown),this.pagesDiv.removeEventListener("pointerup",this.handlePointerUp),this.pagesDiv.removeEventListener("pointerleave",this.handlePointerLeave)}},{key:"componentDidUpdate",value:function(e,t){this.state.hasAnyPageLoadedSuccessfully&&t.displayCommentRegion!==this.state.displayCommentRegion&&(this.handleAnnotationCommentPresence(this.props.annotations,this.state.isCommenting),this.handleWindowResizeThrottled());var n=this.props.document&&this.props.document.scale!==e.document.scale,o=this.props.isFullscreen!==e.isFullscreen;o&&!1===this.props.isFullscreen&&(this.isItSafeToHandleWindowResize=!1),(n||o)&&this.handleScaledPosition(this.props.document.scale,e.document.scale),n&&!1===o&&(this.isItSafeToHandleWindowResize=!1)}},{key:"componentWillReceiveProps",value:function(e){if(!this.state.hasAnyPageLoadedSuccessfully&&this.props.document.wasPageLoadedSuccessfully&&this.setState(function(e){return o({},e,{hasAnyPageLoadedSuccessfully:!0})}),this.handleAnnotationCommentPresence(e.annotations,this.state.isCommenting),e.document.numPages!==this.props.document.numPages){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(e.document.numPages))).map(function(){return i.default.createRef()});this.setState({pageRefs:t})}}},{key:"render",value:function(){var e=this,t=this.props.document,n=t.documentLoadError,o=t.pageLoadError,r="selection"!==this.state.controlMode?this.state.colors[this.state.controlMode]:null,c=this.state.bgColors[this.state.controlMode],d=this.props.session.showAnnotations||this.state.isAnnotatable?{user_id:this.props.session&&this.props.session.userId,user_name:this.props.session&&this.props.session.session&&this.props.session.session.annotations&&this.props.session.session.annotations.user_name,permissions:this.props.session&&this.props.session.session&&this.props.session.session.annotations&&this.props.session.session.annotations.permissions,anonymous:this.props.session&&this.props.session.session&&this.props.session.session.annotations&&this.props.session.session.annotations.anonymous_instructor_annotations}:{},f=this.props.annotations.data.length>0,b=void 0,w=(0,u.default)(0,this.props.document.numPages);this.state.hasAnyPageLoadedSuccessfully&&(b=w.map(function(t){var n=e.props.annotations.stagedByPage[t]||E,o=Math.trunc(e.props.document.viewport.height),a=Math.trunc(e.props.document.viewport.width);return i.default.createElement(v.default,{annotations:n,changePagesContainerScrollTop:e.handleChangePagesContainerScrollTop,controlMode:e.state.controlMode,currentBgColor:c,currentColor:r,currentFont:e.state.freetextFont,currentPageNum:e.state.currentPageNum+1,displayCommentRegion:e.state.displayCommentRegion,documentHasAnnotations:f,focusOnNextPage:e.focusOnNextPage,focusOnPreviousPage:e.focusOnPreviousPage,hoveredAnnotationId:e.props.annotations.hoveredAnnotationId,isAnnotatable:e.state.isAnnotatable,isCommenting:e.state.isCommenting,isPenAnnotating:e.state.isPenAnnotating,isShiftPressed:e.state.isShiftPressed,key:t,onCreateAnnotation:e.props.createAnnotation,onCurrentBgColorChange:e.handleCurrentBgColorChange,onCurrentColorChange:e.handleCurrentColorChange,onCurrentInkStrokeWidthChange:e.handleCurrentInkStrokeWidthChange,onCurrentTextSizeChange:e.handleCurrentTextSizeChange,onDeleteAnnotation:e.props.deleteAnnotation,onDeselectAnnotation:e.props.deselectAnnotation,onHoverAnnotation:e.props.hoverAnnotation,onIsCommentingChange:e.handleIsCommenting,onIsPenAnnotatingChange:e.handleIsPenAnnotatingChange,onPageResize:e.handleWindowResizeThrottled,onSelectAnnotation:e.props.selectAnnotation,onUpdateAnnotation:e.props.updateAnnotation,onVisibilityChange:e.handleVisibilityChange,pageNumber:t,pdfDocument:e.props.document.pdfDocument,selectedAnnotationId:e.props.annotations.selectedAnnotationId,sessionId:e.props.sessionId,sessionUserObject:d,pageRef:e.state.pageRefs[t],strokeWidth:"ink"===e.state.controlMode?e.state.inkStrokeWidth:2,customPageRotation:e.props.document.pdfRotationsByPage[t],viewportHeight:o,viewportScale:e.props.document.viewport.scale,viewportWidth:a})}));var C=(0,l.default)(w.map(function(t){return[t,(e.props.annotations.stagedByPage[t]||E).length]})),A="selection"!==this.state.controlMode,x=null!=this.props.annotations.selectedAnnotationId,O=x&&this.props.annotations.data.find(function(t){return t.id===e.props.annotations.selectedAnnotationId}),S=Boolean(this.state.isAnnotatable&&null!=O&&d.user_id===O.user_id&&null==O.deleted),P=x&&S||A,T=(0,s.default)("Pages",{"Pages-annotatable":this.state.isAnnotatable,"Pages-has-secondary-toolbar":P,"Pen-is-annotating":_&&"selection"!==this.state.controlMode||this.state.isPenAnnotating});return(0,a.default)({meta:i.default.createElement("div",{hidden:!0,"aria-hidden":!0},"Locale: "+this.props.locale),screenreaderOnly:i.default.createElement("h1",{className:"screenreader-only"},(0,p.default)("DocViewer")),viewerControls:i.default.createElement(g.default,{annotatedPdfUrl:this.props.session.data.annotatedPdfUrl,controlMode:this.state.controlMode,currentBgColor:c,currentColor:r,currentFont:this.state.freetextFont,currentInkWidth:this.state.inkStrokeWidth,currentPageNum:this.state.currentPageNum+1,currentPageScale:this.props.document.scale,documentId:this.props.session.documentId,generateMergedPdf:this.props.generateMergedPdf,isAnnotatable:this.state.isAnnotatable,isFullscreen:this.props.isFullscreen,mergedPdfError:this.props.annotations.error,mergedPdfStatus:this.props.annotations.mergedPdfStatus,numPages:this.props.document.numPages,onControlModeChange:this.handleControlModeChange,onCurrentBgColorChange:this.handleCurrentBgColorChange,onCurrentColorChange:this.handleCurrentColorChange,onCurrentInkStrokeWidthChange:this.handleCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.handleCurrentTextSizeChange,onPageChange:this.updateViewerPage,onPageScale:this.props.scalePage,pageNumberToAnnotationNumber:C,selectedAnnotationId:this.props.annotations.selectedAnnotationId,rotatePageClockwise:this.props.rotatePageClockwise,toggleFullscreen:this.props.toggleFullscreen}),pages:i.default.createElement("div",{className:T,ref:this.setDivRef,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onBlur:this.handleFocusOut},i.default.createElement("h2",{className:"screenreader-only"},(0,p.default)("Pages")),!1===this.state.hasAnyPageLoadedSuccessfully&&null==n&&i.default.createElement(h.default,null),n&&i.default.createElement("div",null,(0,p.default)("Error loading document")),o&&i.default.createElement("div",null,(0,p.default)("Error loading page")),b,i.default.createElement(m.default,{annotationsByPage:this.props.annotations.stagedByPage}),this.props.annotations.annotationForbidden&&i.default.createElement(y.default,{message:(0,p.default)("Grader limit has been reached. No further feedback is required."),onConfirm:this.confirmGraderLimitModal,severity:"alert"}))})}}]),t}();t.default=A},790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={setItem:function(e,t){o[e]=t},getItem:function(e){return o[e]}};try{o=window.localStorage||window.sessionStorage||{}}catch(e){console.info&&console.info("Unable to access localStorage")}t.default=o},797:function(e,t){},798:function(e,t){},799:function(e,t){},820:function(e,t){},824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadDocument=function(e){return function(t,n){t({type:r.GET_DOCUMENT_PENDING}),u.getDocument({url:e,cMapPacked:!0,cMapUrl:"/cmaps/"}).then(function(n){t({type:r.GET_DOCUMENT_SUCCESS,documentUrl:e,pdfDocument:n});var o=window&&window.DocViewer&&window.DocViewer.document&&window.DocViewer.document.rotations;o&&t({type:r.SET_ALL_PAGE_ROTATIONS,pdfRotationsByPage:window.DocViewer.document.rotations})}).then(function(){p(t,n)}).catch(function(e){console.log("GET_DOCUMENT_ERROR",e),t({type:r.GET_DOCUMENT_ERROR,error:e})})}},t.loadPage=p,t.loadTextLayer=d,t.scalePageByRatio=function(e,t){if("number"!=typeof e)throw new Error("expected browserWidth to be a number");if("number"!=typeof t)throw new Error("expected pageWidth to be a number");var n=1/(t/e);return function(e,t){e({type:r.SET_SCALE,scaleRatio:n}),setTimeout(function(){var n=t().document.pdfDocument;n&&n.getPage&&p(e,t)},15)}},t.scalePage=function(e){return function(t,n){t({type:r.SCALE_PAGE,scaleModifier:e}),p(t,n)}},t.rotatePageClockwise=function(e){if("number"!=typeof e)throw new Error("expected pdfPageNumber to be a number");var t=function(e){return(e+90)%360},n=function(t,n){fetch("/1/sessions/"+c+"/documents/"+window.DocViewer.document.id+"/rotate",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:e,rotationDegrees:t})}).then(function(e){if(e.ok)return e.json();throw new Error("Error changing page rotation")}).catch(function(e){setTimeout(function(){window.alert((0,a.default)("The current page cannot be rotated because it already contains annotations. The current session will now be refreshed.")),location.reload()},0)})};return function(o,i){var a=i().document.pdfRotationsByPage;if(void 0!==a[e]){var s=t(a[e]);o({type:r.SET_PAGE_ROTATION,pdfPageRotation:s,pdfPageNumber:e}),n(s,o)}else{var l=i().document.pdfDocument,u=i().document.viewport.scale;l.getPage(e+1).then(function(i){var a=i.getViewport(u),s=t(a.rotation);o({type:r.SET_PAGE_ROTATION,pdfPageRotation:s,pdfPageNumber:e}),n(s,o)})}}};var o,r=n(544),i=n(50),a=(o=i)&&o.__esModule?o:{default:o},s=n(136);var l=n(432),u=n(432),c=(0,s.sessionIdFromPath)(window.location.pathname);function p(e,t){e({type:r.GET_PAGE_PENDING}),t().document.pdfDocument.getPage(1).then(function(n){e({type:r.GET_PAGE_SUCCESS,page:n}),d(e,t)}).catch(function(t){console.log("GET_PAGE_ERROR",t),e({type:r.GET_PAGE_ERROR,error:t})})}function d(e,t){e({type:r.GET_TEXT_CONTENT_PENDING}),t().document.page.getTextContent({normalizeWhitespace:!0}).then(function(t){e({type:r.GET_TEXT_CONTENT_SUCCESS,textContent:t})}).catch(function(t){console.log("GET_TEXT_CONTENT_ERROR",t),e({type:r.GET_TEXT_CONTENT_ERROR,error:t})})}l.GlobalWorkerOptions.workerSrc=window.DocViewer&&window.DocViewer.cdnPrefix?window.DocViewer.cdnPrefix()+"vendor/pdfjs-dist/pdf.worker.min.js":"/vendor/pdfjs-dist/pdf.worker.min.js"},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pollUntilReady=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=Date.now()+t;return i({url:e,endTime:a,intervalMs:n,timeoutMs:t})};var o=3e4,r=1e3,i=function e(t){var n=t.url,o=t.endTime,r=t.intervalMs,i=t.timeoutMs;return new Promise(function(t,a){Date.now()<o?function(e){return new Promise(function(t,n){fetch(e).then(function(e){t(200===e.status)}).catch(function(){t(!1)})})}(n).then(function(s){s?t():setTimeout(function(){e({url:n,endTime:o,intervalMs:r,timeoutMs:i}).then(function(){return t()}).catch(function(e){return a(e)})},r)}):a(new Error("Timeout of "+i+" ms reached"))})}},829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.selectAnnotation=function(e){return function(t){t({type:i.SELECT_ANNOTATION,annotationId:e})}},t.deselectAnnotation=function(e){return function(t){t({type:i.DESELECT_ANNOTATION,annotationId:e})}},t.hoverAnnotation=function(e){return function(t){t({type:i.HOVER_ANNOTATION,annotationId:e})}},t.createAnnotation=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(0,s.transformAnnotationSave)(e,t,n);return function(e,t){var a=["freetext"].includes(n.type),s=!r.contents&&a;if(!s&&!o)return e({type:i.CREATE_ANNOTATION_PENDING,annotation:r}),fetch(f+"/annotations/"+n.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){if(e.ok)return e.json();if(403===e.status)throw new Error("no longer has permission to annotate");return e.json().then(function(e){throw new Error(e.error)})}).then(function(t){e({type:i.CREATE_ANNOTATION_SUCCESS,annotation:t}),["ink","strikeout","highlight"].includes(t.type)&&document.querySelector("#Annotation-"+t.id+" .Comment-create").focus()}).catch(function(t){throw"commentReply"===r.type?window.alert((0,c.default)("There was an error saving this comment.")):"no longer has permission to annotate"===t.message?e({type:i.CREATE_ANNOTATION_FORBIDDEN,show:!0,error:t}):'supplied "rotation" value does not match the rotation field of the document record'===t.message?(window.alert((0,c.default)("The current page has been rotated by another user and needs to be refreshed before it can be annotated. The current session will now be refreshed.")),location.reload()):window.alert((0,c.default)("There was an error saving this annotation.")),e({type:i.CREATE_ANNOTATION_ERROR,annotation:r,error:t}),console.error(t),t});e({type:i.STAGE_ANNOTATION,annotation:r})}},t.updateAnnotation=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(0,s.transformAnnotationSave)(e,t,n);return function(e,t){var a=["freetext"].includes(n.type),s=!r.contents&&a;if(!s&&!o)return e({type:i.UPDATE_ANNOTATION_PENDING,annotation:r}),fetch(f+"/annotations/"+n.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(t){if(!t.ok)throw new Error("Error updating annotation");e({type:i.UPDATE_ANNOTATION_SUCCESS,annotation:r})}).catch(function(t){throw e({type:i.UPDATE_ANNOTATION_ERROR,annotation:r,error:t}),"commentReply"===r.type?window.alert((0,c.default)("There was an error saving this comment.")):window.alert((0,c.default)("There was an error saving this annotation.")),console.error(t),t});e({type:i.STAGE_ANNOTATION,annotation:r})}},t.deleteAnnotation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,a){var s=a(),l=s.annotations&&s.annotations.data&&s.annotations.data.find(function(e){return e.id===t}),u=n?i.DELETE_ROOT_COMMENT_SUCCESS:i.DELETE_ANNOTATION_SUCCESS,p=n?s.annotations.stagedByPage[e].find(function(e){return e.id===t}).inreplyto:null,f={type:u,annotationId:t,annotationPage:e};if(n&&(f=o({},f,{baseAnnotationId:p})),!l)return r(f);fetch(d+"/annotations/"+t,{method:"DELETE"}).then(function(e){if(e.ok)return r(f);throw new Error("Error deleting annotation")}).catch(function(e){window.alert((0,c.default)("There was an error. It was not deleted.")),r({type:i.DELETE_ANNOTATION_ERROR,error:e})})}},t.loadAnnotations=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){e({type:i.GET_ANNOTATIONS_PENDING}),fetch(h+"/annotations",{headers:{"Cache-control":"no-cache",Pragma:"no-cache",Expires:0}}).then(function(e){if(e.ok)return e.json();throw new Error("Error fetching annotations")}).then(function(t){e({type:i.GET_ANNOTATIONS_SUCCESSFUL,response:t})}).catch(function(t){e({type:i.GET_ANNOTATIONS_ERROR,error:t})})}},t.generateMergedPdf=function(e){return function(e,t){e({type:i.GENERATE_MERGED_PDF_PENDING});var n=d+"/annotated.pdf";fetch(n,{method:"POST"}).then(function(e){return 202===e.status?Promise.resolve():Promise.reject(new Error("Error kicking off merged pdf process"))}).then(function(){return e({type:i.GENERATE_MERGED_PDF_SUCCESSFUL}),Promise.resolve()}).then(function(){return(0,a.pollUntilReady)(d+"/annotated.pdf/is_ready")}).then(function(){e({type:i.GENERATE_MERGED_PDF_DONE}),window.location=n}).catch(function(t){window.alert((0,c.default)("Something went wrong generating the annotated PDF. Please try again later.")),e({type:i.GENERATE_MERGED_PDF_ERROR,error:t})})}},t.dismissGraderLimitModal=function(){return function(e){e({type:i.CREATE_ANNOTATION_FORBIDDEN,show:!1})}};var r,i=n(545),a=n(828),s=n(394),l=n(136),u=n(50),c=(r=u)&&r.__esModule?r:{default:r};var p=(0,l.sessionIdFromPath)(window.location.pathname),d="/1/sessions/"+p,f="/2018-03-07/sessions/"+p,h="/2018-04-06/sessions/"+p},830:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(544),i=n(134);var a={isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!1,documentLoadError:null,documentId:null,pdfDocument:null,isPageLoading:!1,wasPageLoadedSuccessfully:!1,pageLoadError:null,page:null,isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:null,textContent:null,scale:i.DEFAULT_SCALE,numPages:0,pdfRotationsByPage:{}};e.exports=function(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,l=arguments[1];switch(l.type){case r.GET_DOCUMENT_SUCCESS:var u=l.pdfDocument,c=l.documentId;return o({},s,{isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!0,documentLoadError:null,documentId:c,pdfDocument:u,numPages:u.pdfInfo.numPages});case r.SET_SCALE:var p=l.scaleRatio*s.scale;return p===s.scale?s:p>i.DEFAULT_SCALE&&s.scale===i.DEFAULT_SCALE?o({},s,{viewport:s.page&&s.page.getViewport(s.scale)}):(p>i.DEFAULT_SCALE?p=i.DEFAULT_SCALE:p<i.MIN_SCALE&&(p=i.MIN_SCALE),o({},s,{scale:p,viewport:s.page&&s.page.getViewport(s.scale)}));case r.SET_PAGE_ROTATION:return o({},s,{pdfRotationsByPage:o({},s.pdfRotationsByPage,(e={},t=l.pdfPageNumber,n=l.pdfPageRotation,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))});case r.SET_ALL_PAGE_ROTATIONS:return o({},s,{pdfRotationsByPage:o({},s.pdfRotationsByPage,l.pdfRotationsByPage)});case r.SCALE_PAGE:var d=function(e,t){var n=Math.round(100*(e+t))/100;return n>=i.MIN_SCALE&&n<=i.MAX_SCALE?n:e}(s.scale,l.scaleModifier);return d===s.scale?s:o({},s,{scale:d,viewport:s.page&&s.page.getViewport(s.scale)});case r.GET_DOCUMENT_PENDING:return o({},s,{isDocumentLoading:!0,wasDocumentLoadedSuccessfully:!1,documentLoadError:null,pdfDocument:null});case r.GET_DOCUMENT_ERROR:return o({},s,{isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!1,documentLoadError:l.error,pdfDocument:null});case r.GET_PAGE_PENDING:return o({},s,{isPageLoading:!0,wasPageLoadedSuccessfully:!1,pageLoadError:null,page:null});case r.GET_PAGE_SUCCESS:var f=l.page.getViewport(s.scale);return o({},s,{isPageLoading:!1,wasPageLoadedSuccessfully:!0,pageLoadError:null,page:l.page,viewport:f});case r.GET_PAGE_ERROR:return o({},s,{isPageLoading:!1,wasPageLoadedSuccessfully:!1,pageLoadError:l.error,page:null});case r.GET_TEXT_CONTENT_PENDING:return o({},s,{isTextLayerLoading:!0,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:null,textContent:null});case r.GET_TEXT_CONTENT_SUCCESS:return o({},s,{isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!0,textContentLoadError:null,textContent:l.textContent});case r.GET_TEXT_CONTENT_ERROR:return o({},s,{isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:l.error,textContent:null});default:return s}}},931:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case a.SELECT_ANNOTATION:return o({},e,{selectedAnnotationId:t.annotationId});case a.DESELECT_ANNOTATION:var n=e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId;return o({},e,{selectedAnnotationId:n});case a.HOVER_ANNOTATION:return o({},e,{hoveredAnnotationId:t.annotationId});case a.GET_ANNOTATIONS_PENDING:return o({},e,{isLoading:!0,wasLoadSuccessful:!1,error:null});case a.GET_ANNOTATIONS_SUCCESSFUL:var s=t.response.data,c=o({},e,{data:s,stagedByPage:(0,r.default)(s,function(e){return e.page}),isLoading:!1,wasLoadSuccessful:!0,error:null}),p=(0,i.default)(c,["lastVerifiedState"]);return o({},c,{lastVerifiedState:p});case a.GET_ANNOTATIONS_ERROR:return o({},e,{isLoading:!1,wasLoadSuccessful:!1,error:t.error});case a.DELETE_ANNOTATION_SUCCESS:var d=(e.stagedByPage[t.annotationPage]||[]).filter(function(e){return e.id!==t.annotationId}),f=d.some(function(e){return"commentReply"!==e.type}),h=Object.assign({},e.stagedByPage,l({},t.annotationPage,f?d:[]));return o({},e,{stagedByPage:h,data:e.data.filter(function(e){return e.id!==t.annotationId}),selectedAnnotationId:e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.DELETE_ROOT_COMMENT_SUCCESS:var m=Object.assign({},e.stagedByPage,l({},t.annotationPage,(e.stagedByPage[t.annotationPage]||[]).filter(function(e){return e.inreplyto!==t.baseAnnotationId})));return o({},e,{stagedByPage:m,data:e.data.filter(function(e){return e.inreplyto!==t.baseAnnotationId}),selectedAnnotationId:e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.CREATE_ANNOTATION_PENDING:var g=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),v=e.stagedByPage[t.annotation.page]||[],y=Object.assign({},e.stagedByPage,l({},t.annotation.page,v.slice(0,-1===g?v.length:g).concat(t.annotation).concat(-1===g?[]:v.slice(g+1)))),b="freetext"!==t.annotation.type?o({},e,{stagedByPage:y,hoveredAnnotationId:null,selectedAnnotationId:t.annotation.inreplyto||t.annotation.id}):o({},e,{stagedByPage:y,hoveredAnnotationId:null});return b;case a.UPDATE_ANNOTATION_PENDING:var w=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),C=e.stagedByPage[t.annotation.page]||[],E=Object.assign({},e.stagedByPage,l({},t.annotation.page,C.slice(0,-1===w?C.length:w).concat(t.annotation).concat(-1===w?[]:C.slice(w+1))));return o({},e,{stagedByPage:E});case a.CREATE_ANNOTATION_SUCCESS:var _=e.stagedByPage[t.annotation.page]||[],A=Object.assign({},e.stagedByPage,l({},t.annotation.page,_.filter(function(e){return e.id!==t.annotation.id}).concat(t.annotation))),x=o({},e,{data:e.data.concat(t.annotation),stagedByPage:A}),O=(0,i.default)(x,["lastVerifiedState"]);return o({},x,{lastVerifiedState:O});case a.CREATE_ANNOTATION_ERROR:var S=e.stagedByPage[t.annotation.page]||[],P=Object.assign({},e.stagedByPage,l({},t.annotation.page,S.filter(function(e){return e.id!==t.annotation.id})));return o({},e,{stagedByPage:P,data:e.data.filter(function(e){return e.id!==t.annotation.id}),selectedAnnotationId:e.selectedAnnotationId===t.annotation.id?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.CREATE_ANNOTATION_FORBIDDEN:return o({},e,{annotationForbidden:t.show});case a.UPDATE_ANNOTATION_SUCCESS:var T=o({},e,{data:e.data.filter(function(e){return e.id!==t.annotation.id}).concat(t.annotation)}),k=(0,i.default)(T,["lastVerifiedState"]);return o({},T,{lastVerifiedState:k});case a.UPDATE_ANNOTATION_ERROR:return o({},e.lastVerifiedState,{lastVerifiedState:e.lastVerifiedState});case a.STAGE_ANNOTATION:var D=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),N=e.stagedByPage[t.annotation.page]||[],R=Object.assign({},e.stagedByPage,l({},t.annotation.page,N.slice(0,-1===D?N.length:D).concat(t.annotation).concat(-1===D?[]:N.slice(D+1))));return o({},e,{selectedAnnotationId:t.annotation.id,stagedByPage:R});case a.GENERATE_MERGED_PDF_PENDING:return o({},e,{mergedPdfStatus:"Waiting"});case a.GENERATE_MERGED_PDF_ERROR:case a.MERGED_PDF_TIMED_OUT:return o({},e,{mergedPdfStatus:"Error",error:t.error});case a.GENERATE_MERGED_PDF_DONE:return o({},e,{mergedPdfStatus:"Done"});default:return e}};var r=s(n(930)),i=s(n(860)),a=n(545);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={annotationForbidden:!1,data:[],stagedByPage:{},isLoading:!1,selectedAnnotationId:null,hoveredAnnotationId:null,wasLoadSuccessful:!1,error:null,isEditingAnnotation:!1,currentAnnotationType:null,mergedPdfStatus:"None"}},932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(480),r=s(n(931)),i=s(n(831)),a=s(n(830));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.combineReducers)({annotations:r.default,document:a.default});t.default=(0,o.createStore)(l,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),(0,o.compose)((0,o.applyMiddleware)(i.default)))},948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(46),i=n(582);t.default=function(e){var t=e.node,n=e.onToggle,a=(0,r.useRef)(!1),s=(0,i.useToggle)(!1),l=o(s,2),u=l[0],c=l[1],p=(0,i.useFullscreen)({current:t},u,{onClose:function(){return c(!1)}});return(0,r.useEffect)(function(){a.current&&n&&n(),a.current=!0},[u]),[p,c]}}}]);
//# sourceMappingURL=6.726da43f3efb6176ee6d.bundle.js.map