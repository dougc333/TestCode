define("bundles/asset-admin/stores/AssetAdminStore",["require","exports","module","vendor/cnpm/fluxible.v0-4/addons/createStore","underscore","bundles/asset-admin/constants/UploadStatus"],function(require,exports,module){"use strict";var e=require("vendor/cnpm/fluxible.v0-4/addons/createStore"),_=require("underscore"),s=require("bundles/asset-admin/constants/UploadStatus"),t=e({storeName:"AssetAdminStore",uploadStatus:{state:s.IDLE},selectedAssets:[],uploadedAssets:[],uploadAttempts:{success:[],error:[]},assets:null,assetURLMap:{},assetsListReady:!1,noticeMessageDismissed:!1,getCourse:function getCourse(){return this.course},getAssets:function getAssets(){return this.assets},getNextPageIndex:function getNextPageIndex(){return this.nextPageIndex},getSelectedAssets:function getSelectedAssets(){return this.selectedAssets},getUploadedAssets:function getUploadedAssets(){return this.uploadedAssets},getUploadAttempts:function getUploadAttempts(){return this.uploadAttempts},getUploadStatus:function getUploadStatus(){return this.uploadStatus},getAssetURLMap:function getAssetURLMap(){return this.assetURLMap},isAssetsListReady:function isAssetsListReady(){return this.assetsListReady},isNoticeMessageDismissed:function isNoticeMessageDismissed(){return this.noticeMessageDismissed},resetAssets:function resetAssets(){this.selectedAssets=[],this.uploadedAssets=[],this.uploadAttempts.success=[],this.uploadAttempts.error=[],this.uploadStatus.state=s.IDLE}});t.handlers={INITIALIZED:function INITIALIZED(s){this.noticeMessageDismissed=s.noticeDismissed,s.course&&(this.course=s.course),this.resetAssets(),this.emitChange()},RECEIVED_ASSETS_LIST:function RECEIVED_ASSETS_LIST(s){var t=s.assets,e=s.urlMap,i=s.nextPageIndex,a=s.isInitialFetch;a?(this.assets=t,this.resetAssets()):this.assets=this.assets.concat(t),e&&Object.assign(this.assetURLMap,e),this.assetsListReady=!0,this.nextPageIndex=i,this.emitChange()},START_RECEIVING_ASSETS:function START_RECEIVING_ASSETS(){this.assetsListReady=!1,this.emitChange()},SELECT_ASSET:function SELECT_ASSET(t){var s=t.asset,e=!_(this.selectedAssets).chain().where({id:s.id}).isEmpty().value();e?this.selectedAssets=_(this.selectedAssets).without(s):(t.allowMultiple||(this.selectedAssets=[]),this.selectedAssets.push(s)),this.emitChange()},NOTICE_MESSAGE_DISMISSED:function NOTICE_MESSAGE_DISMISSED(){this.noticeMessageDismissed=!0,this.emitChange()},RESET_ASSETS:function RESET_ASSETS(){this.resetAssets(),this.emitChange()},UPLOAD_STATUS_UPDATED:function UPLOAD_STATUS_UPDATED(s){this.uploadStatus.state=s.state,this.uploadStatus.progress=s.progress,s.files&&(this.uploadStatus.files=s.files),s.uploadedAssets&&(this.uploadedAssets=s.uploadedAssets),s.uploadAttempts&&(this.uploadAttempts=s.uploadAttempts),this.emitChange()}},module.exports=t});