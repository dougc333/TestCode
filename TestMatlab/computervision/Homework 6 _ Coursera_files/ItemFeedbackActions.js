define("bundles/content-feedback/actions/ItemFeedbackActions",["require","exports","module","underscore","bundles/content-feedback/constants/FeedbackTypes","bundles/content-feedback/models/FlagFeedback","bundles/content-feedback/models/LikeFeedback","bundles/content-feedback/utils/ItemFeedbackAPIUtils"],function(require,exports,module){"use strict";var _=require("underscore"),n=require("bundles/content-feedback/constants/FeedbackTypes"),c=require("bundles/content-feedback/models/FlagFeedback"),t=require("bundles/content-feedback/models/LikeFeedback"),e=require("bundles/content-feedback/utils/ItemFeedbackAPIUtils");exports.getItemFeedback=function(a,d){var s=d.courseId,i=d.itemId,o=d.subItemId;return e.getMyAll(s,i,o).then(function(s){var e=_(s).find(function(e){return e.feedbackSystem===n.Like}),d=_(s).find(function(e){return e.feedbackSystem===n.Flag}),i=null,o=null;e&&(i=new t(e.rating.value,e.rating.active,e.comments.generic)),d&&(o=new c(d.rating.active,d.comments)),a.dispatch("RECEIVE_FEEDBACK",{likeFeedback:i,flagFeedback:o})})},exports.likeItem=function(d,n){var a=n.courseId,s=n.itemId,i=n.comment,o=n.subItemId,c=new t(1,!0,i);return d.dispatch("RECEIVE_LIKE",{likeFeedback:c}),e.postMyLike(a,s,c,o).done()},exports.cancelLikeItem=function(d,n){var a=n.courseId,s=n.itemId,i=n.comment,o=n.subItemId,c=new t(0,!1,i);return d.dispatch("RECEIVE_LIKE",{likeFeedback:c}),e.postMyLike(a,s,c,o).done()},exports.dislikeItem=function(d,n){var a=n.courseId,s=n.itemId,i=n.comment,o=n.subItemId,c=new t(0,!0,i);return d.dispatch("RECEIVE_LIKE",{likeFeedback:c}),e.postMyLike(a,s,c,o).done()},exports.cancelDislikeItem=function(d,n){var a=n.courseId,s=n.itemId,i=n.comment,o=n.subItemId,c=new t(0,!1,i);return d.dispatch("RECEIVE_LIKE",{likeFeedback:c}),e.postMyLike(a,s,c,o).done()},exports.flagItem=function(d,t){var a=t.courseId,s=t.itemId,i=t.comments,o=t.active,u=t.subItemId,n=new c(o,i);return d.dispatch("RECEIVE_FLAG",{flagFeedback:n}),e.postMyFlag(a,s,n,u).done()}});