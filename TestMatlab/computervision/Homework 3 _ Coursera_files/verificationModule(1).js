define("bundles/verification/views/verificationModule",["require","exports","module","bundles/ondemand/components/assignments/AssignmentHonorCode","bundles/ondemand/utils/assignmentVerificationTest","bundles/phoenix/lib/view","bundles/verification/viewModels/blockedVerification","bundles/verification/viewModels/identityVerification","bundles/verification/viewModels/profileSetup","bundles/verification/views/blockedVerification","bundles/verification/views/identityVerification","bundles/verification/views/profileSetup","bundles/verification/views/verificationModule.html","css!bundles/verification/styl/index.css"],function(require,exports,module){"use strict";var i=require("bundles/ondemand/components/assignments/AssignmentHonorCode"),d=require("bundles/ondemand/utils/assignmentVerificationTest"),l=d.fetchVerifiableIdAndVerifyAssignment,e=require("bundles/phoenix/lib/view"),c=require("bundles/verification/viewModels/blockedVerification"),s=require("bundles/verification/viewModels/identityVerification"),f=require("bundles/verification/viewModels/profileSetup"),t=require("bundles/verification/views/blockedVerification"),o=require("bundles/verification/views/identityVerification"),n=require("bundles/verification/views/profileSetup"),a=require("bundles/verification/views/verificationModule.html");require("css!bundles/verification/styl/index.css");var r=e.extend({template:a,stateModelProperty:"model",initialize:function initialize(i){this.model=i.verificationViewModel,this.initializeEvents()},initializeEvents:function initializeEvents(){this.listenTo(this.model,"change:state",this.renderState),this.listenTo(this.model,"destroy",this.destroyActiveViewModel)},destroyActiveViewModel:function destroyActiveViewModel(){var i=this.model.get("activeViewModel");i&&i.trigger("destroy")},renderVerification:function renderVerification(){this.identityVerificationViewModel=new s({verificationViewModel:this.model}),this.model.set("activeViewModel",this.identityVerificationViewModel),this.region.append(o,{to:this.$$("identity-verification"),initialize:{identityVerificationViewModel:this.identityVerificationViewModel,verificationViewModel:this.model},module:o})},renderRegistration:function renderRegistration(){this.profileSetupViewModel=new f,this.model.set("activeViewModel",this.profileSetupViewModel),this.region.append(n,{to:this.$$("profile-setup"),initialize:{profileSetupViewModel:this.profileSetupViewModel,verificationViewModel:this.model,isProfileComplete:this.model.get("isProfileComplete"),isVerifyingAssessment:this.model.get("isVerifyingAssessment")},module:n})},renderBlockVerification:function renderBlockVerification(){this.blockedVerificationViewModel=new c({optedOutOfVerification:this.model.get("optedOutOfVerification")}),this.model.set("activeViewModel",this.blockedVerificationViewModel),this.region.append(t,{to:this.$$("block-verification"),initialize:{blockedVerificationViewModel:this.blockedVerificationViewModel,verificationViewModel:this.model},module:t})},renderState:function renderState(){e.prototype.renderState.call(this),this.destroyActiveViewModel(),this.model.isState("registration")?this.renderRegistration():this.model.isState("verification")?this.renderVerification():this.model.isState("block-verification")?this.renderBlockVerification():this.model.isState("honor-code")&&this.renderHonorCode()},renderHonorCode:function renderHonorCode(){i.hasAcceptedHonorCode(this.model.metadata.get("id"))?this.onHonorCodeAccept():this.renderReactInto(i,"AssignmentHonorCode",{onHonorCodeAccept:this.onHonorCodeAccept.bind(this),itemId:this.model.metadata.get("id")})},onHonorCodeAccept:function onHonorCodeAccept(){l(this.model)}});module.exports=r});