define("bundles/phoenix/utils/ScribeUtils",["require","exports","module","jquery","underscore","scribe","bundles/phoenix/constants/CMLEditorPlugins"],function(require,exports,module){"use strict";var $=require("jquery"),_=require("underscore"),n=require("scribe"),e=require("bundles/phoenix/constants/CMLEditorPlugins"),s={createInstance:function createInstance(s){var c=s.el,l=s.blocks,h=s.placeholder,a=s.editorContainer,u=s.disabledPlugins,t=s.showToolbarByDefault,i=s.toolbarContainer,d=s.assetAdminOptions,b=s.imageUploadOptions,p=s.onContentChange,r=new n(c,{allowBlockElements:!0}),o={p:{},strike:{},sub:{},sup:{},audio:{controls:!0},source:{src:!0},pre:{},div:{}},f=_(u).indexBy("id");return r.on("content-changed",p),l.forEach(function(e){if(e.plugin){var n=null;switch(e.commandName){case"imageUpload":n=b;break;case"code":n=a;break;case"asset":n=d}r.use(e.plugin(n))}e.tags&&e.tags.forEach(function(e){return o[e.name]=e.value||{}})}),_(e).each(function(n){if(!_(f).has(n.id))switch(n.id){case e.Placeholder.id:a&&r.use(n.run(h,a));break;case e.Toolbar.id:i&&r.use(n.run(i));break;case e.ToolbarVisibility.id:a&&i&&r.use(n.run(a,i,t));break;case e.Sanitizer.id:r.use(n.run({tags:o}));break;default:r.use(n.run())}}),r},destroyInstance:function destroyInstance(e){$(".scribe-marker").remove()}};module.exports=s});