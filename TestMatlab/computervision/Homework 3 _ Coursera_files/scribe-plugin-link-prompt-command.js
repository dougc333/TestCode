define("bundles/scribe-plugins/scribe-plugin-link-prompt-command",["require","exports","module"],function(require,exports,module){"use strict";module.exports=function(e){return function(t){var n=new t.api.Command("createLink");n.nodeName="A",n.execute=function(){var i=new t.api.Selection,r=i.range,o=i.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this)),a=o?o.href:"http://",n=window.prompt("Enter a link.",a);if(o&&(r.selectNode(o),i.selection.removeAllRanges(),i.selection.addRange(r)),n){var d=/^https?\:\/\//,s=/^mailto\:/,l=/@/;if(!d.test(n))if(!s.test(n)&&l.test(n)){var m=window.confirm("The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?");n=m?"mailto:"+n:""}else{var p=window.confirm("The URL you entered appears to be a link. Do you want to add the required “http://” prefix?");n=p?"http://"+n:""}e&&e.filter&&e.filter.regex.test(n)&&(n="",window.alert(e.filter.message)),n&&t.api.SimpleCommand.prototype.execute.call(this,n)}},n.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=n}}});