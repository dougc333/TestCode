define("bundles/assess/questionTypes/reflect/student/view",["require","exports","module","bundles/phoenix/lib/view","bundles/assess/questionTypes/reflect/student/template.html","bundles/phoenix/lib/renderContent"],function(require,exports,module){"use strict";var s=require("bundles/phoenix/lib/view"),t=require("bundles/assess/questionTypes/reflect/student/template.html"),e=require("bundles/phoenix/lib/renderContent"),n=s.extend({template:t,className:"coursera-assess-question-reflective",supportedStyles:["coursera-assess-style-question-default","coursera-assess-style-question-in-video"],events:{"keyup [data-reflective-response]":"onChangeInput","keydown [data-reflective-response]":"stopPropagation","keypress [data-reflective-response]":"stopPropagation","click [data-retry]":"retryQuestion"},initialize:function initialize(e){this.options=this.options||e||{}},render:function render(){var e=this.options.instance.feedback,s=this.options.instance.weightedScoring,t=e&&e.definition&&e.definition.isCorrect;if(this.$el.html(this.template({index:this.options.index,instance:this.options.instance,feedback:e,isCorrect:t,showFeedbackIcon:this.options.showFeedbackIcon,score:s?s.score:null,maxScore:s?s.maxScore:null})),this.options.instance.localResponse){var n=this.options.instance.localResponse.answer;this.$("[data-reflective-response]").val(n)}t?(this.$el.removeClass("c-incorrect"),this.$el.addClass("c-correct")):(this.$el.removeClass("c-correct"),this.$el.addClass("c-incorrect")),this.renderReactViews()},renderReactViews:function renderReactViews(){var t=this.options.instance,s=t.feedback,n=s&&"Explained"===s.feedbackLevel;e(t.variant.definition.prompt,this.$$("prompt")),e(n&&s.definition.display,this.$$("feedback-display"))},retryQuestion:function retryQuestion(){this.options.instance.localResponse=null,this.options.instance.feedback=null,this.render()},disableInput:function disableInput(){this.$("input").attr("disabled",!0)},enableInput:function enableInput(){this.$("input").attr("disabled",!1)},serializeResponse:function serializeResponse(){var e=this.$("[data-reflective-response]").val();return{answer:e}},stopPropagation:function stopPropagation(e){e.stopPropagation()},onChangeInput:function onChangeInput(e){this.stopPropagation(e),this.trigger("change")},isAnswered:function isAnswered(){return this.getResponse()&&this.getResponse().trim().length>0},getResponse:function getResponse(){return this.$("[data-reflective-response]").val()}});module.exports=n});