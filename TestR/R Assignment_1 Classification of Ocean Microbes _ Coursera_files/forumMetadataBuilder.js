define("bundles/discussions/utils/forumMetadataBuilder",["require","exports","module","bundles/discussions/constants","bundles/catalogP/lib/stringifyList","i18n!nls/discussions"],function(require,exports,module){"use strict";var i=require("bundles/discussions/constants"),e=i.naptimeForumTypes,t=require("bundles/catalogP/lib/stringifyList"),s=require("i18n!nls/discussions");exports.forumTypeMapping={course:e.courseForumType,item:e.itemForumType,forum:e.customForumType,group:e.groupForumType,week:e.weekForumType},exports.buildForumFromViewContext=function(e,n){var i=e.get("type"),o={},u=void 0;if("course"===i)o.courseId=e.get("id"),u=s("All discussions in the course.");else if("item"===i)o.itemId=e.get("id"),u=s("Discuss "+e.getDisplayName()+".");else if("forum"===i)o.forumId=e.get("id"),u=e.get("model").get("description");else if("group"===i)o.groupId=e.get("id"),u=s("Discuss with your peers from "+e.getDisplayName()+".");else{if("week"!==i)throw new Error(i+" not supported in forumMetadataBuilder");var r=parseInt(e.get("id"),10);o.weekNumber=r;var d=t(n[r]).replace("&","&amp;");u=s(n[r]?1===n[r].length?"Discuss this week's module: "+d+".":"Discuss this week's modules: "+d+".":"Discuss the material from week "+r+".")}return{id:e.get("id"),title:e.getDisplayName(),description:{typeName:"cml",definition:{dtdId:"discussion/1",value:"<co-content><text>"+u+"</text></co-content>"}},forumType:{typeName:exports.forumTypeMapping[i],definition:o},parentForumId:void 0,discussionsLink:e.get("discussionsLink"),viewContext:e,mostRecentThread:void 0,threadCount:void 0}}});