define("bundles/ondemand/components/endOfCourse/components/LaggingMessage",["require","exports","module","underscore","react-with-addons","i18n!nls/ondemand","bundles/ondemand/utils/onDemandSessionsApi","bundles/ondemand/components/sessions/SessionSwitchModal","pages/open-course/common/constants","vendor/cnpm/fluxible.v0-4/addons/connectToStores","css!./__styles__/LaggingMessage.css"],function(require,exports,module){"use strict";function _defaults(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var o=i[n],s=Object.getOwnPropertyDescriptor(t,o);s&&s.configurable&&void 0===e[o]&&Object.defineProperty(e,o,s)}return e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):_defaults(n,e))}var o=function(){function defineProperties(s,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}return function(e,n,o){return n&&defineProperties(e.prototype,n),o&&defineProperties(e,o),e}}(),s=function get(i,c,l){var o=!0;e:for(;o;){var n=i,r=c,a=l;o=!1,null===n&&(n=Function.prototype);var e=Object.getOwnPropertyDescriptor(n,r);if(void 0===e){var s=Object.getPrototypeOf(n);if(null===s)return void 0;i=s,c=r,l=a,o=!0,e=s=void 0;continue e}if("value"in e)return e.value;var t=e.get;if(void 0===t)return void 0;return t.call(a)}},t=require("underscore"),i=t.compose,e=require("react-with-addons"),n=require("i18n!nls/ondemand"),r=require("bundles/ondemand/utils/onDemandSessionsApi"),a=require("bundles/ondemand/components/sessions/SessionSwitchModal"),c=require("pages/open-course/common/constants"),l=require("vendor/cnpm/fluxible.v0-4/addons/connectToStores");require("css!./__styles__/LaggingMessage.css");var u=function(t){function LaggingMessage(){var e=this;_classCallCheck(this,LaggingMessage),s(Object.getPrototypeOf(LaggingMessage.prototype),"constructor",this).apply(this,arguments),this.state={showSessionSwitchModal:!1},this.showSessionSwitchModal=function(){e.setState({showSessionSwitchModal:!0})},this.hideSessionSwitchModal=function(){e.setState({showSessionSwitchModal:!1})}}return _inherits(LaggingMessage,t),o(LaggingMessage,[{key:"componentDidMount",value:function componentDidMount(){this.props.enrollableSession||r.getFollowingSession(this.props.sessionId).done()}},{key:"render",value:function render(){if(!this.props.enrollableSession||!this.props.enrollableSession.hasStarted())return null;return e.createElement("div",{className:"rc-LaggingMessage card-rich-interaction styleguide"},e.createElement("div",{className:"contents"},e.createElement("h3",{className:"headline-3-text"},n("Get back on track with a new session")),e.createElement("p",{className:"body-1-text"},n("Looks like you've missed a few deadlines in this session. That’s okay -\n              if you switch to the next session, your progress will transfer with you, and you’ll be\n              back on track with new deadlines and a community of peers on the same schedule.")),e.createElement("button",{className:"upcoming-session-button primary",onClick:this.showSessionSwitchModal},n("Join new session"))),this.state.showSessionSwitchModal&&e.createElement(a,{onClose:this.hideSessionSwitchModal,courseId:c.courseId}))}}],[{key:"propTypes",value:{enrollableSession:e.PropTypes.object,sessionId:e.PropTypes.string},enumerable:!0}]),LaggingMessage}(e.Component);module.exports=i(l(["SessionStore"],function(n){var e=n.SessionStore;return{enrollableSession:e.getEnrollableSession(),sessionId:e.getSessionId()}}))(u)});