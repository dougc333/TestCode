define("bundles/ondemand/components/ItemViewHonorsModalContainer",["require","exports","module","react-with-addons","react-router","bundles/phoenix/lib/waitForStores","bundles/ondemand/components/HonorsContentModal","bundles/phoenix/template/models/userIdentity","bundles/ondemand/actions/HonorsUserPreferencesActions","bundles/ondemand/utils/url","pages/open-course/common/models/lesson","pages/open-course/common/models/tracks","pages/open-course/common/constants"],function(require,exports,module){"use strict";var e=require("react-with-addons"),p=require("react-router"),k=p.Navigation,a=require("bundles/phoenix/lib/waitForStores"),t=require("bundles/ondemand/components/HonorsContentModal"),r=require("bundles/phoenix/template/models/userIdentity"),d=require("bundles/ondemand/actions/HonorsUserPreferencesActions"),i=d.setLessonSkipped,n=require("bundles/ondemand/utils/url"),s=n.getModuleUrl,l=require("pages/open-course/common/models/lesson"),c=require("pages/open-course/common/models/tracks"),u=c.HONORS_TRACK,m=require("pages/open-course/common/constants"),h=m.courseId,o=e.createClass({displayName:"ItemViewHonorsModalContainer",propTypes:{lesson:e.PropTypes.instanceOf(l).isRequired,hasUserSkippedHonorsModal:e.PropTypes.bool,hasUserSkippedLesson:e.PropTypes.bool},contextTypes:{router:e.PropTypes.object.isRequired,executeAction:e.PropTypes.func.isRequired},getInitialState:function getInitialState(){return{showHonorsModal:r.get("authenticated")&&!this.props.hasUserSkippedLesson&&!this.props.hasUserSkippedHonorsModal&&this.props.lesson.getTrackId()===u}},onClick:function onClick(){this.context.executeAction(i,{lessonId:this.props.lesson.getId(),skipped:!0}),this.setState({showHonorsModal:!1})},onClickLeave:function onClickLeave(){this.context.router.push(s(this.props.lesson.getModule().getId()))},render:function render(){return this.state.showHonorsModal?e.createElement(t,{onClose:this.onClick,onContinue:this.onClick,onLeave:this.onClickLeave}):null}});module.exports=a(o,["HonorsUserPreferencesStore"],function(o,s){var e=o.HonorsUserPreferencesStore,n=s.lesson;return{hasUserSkippedHonorsModal:e.hasUserSkippedHonorsModalForCourseId(h),hasUserSkippedLesson:e.getLessonSkipped(n.getId())}}),module.exports.BaseComp=o});