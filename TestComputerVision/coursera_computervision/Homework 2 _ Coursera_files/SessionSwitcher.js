define("bundles/discussions/components/sessionSwitcher/SessionSwitcher",["require","exports","module","underscore","classnames","react-with-addons","js/lib/coursera.react-intl","bundles/discussions/actions/SessionFilterActions","bundles/discussions/components/sessionSwitcher/SessionSwitcherDropdown","bundles/discussions/actions/SessionFilterActions","vendor/cnpm/fluxible.v0-4/addons/connectToStores","js/lib/waitFor","i18n!nls/discussions","css!./__styles__/SessionSwitcher"],function(require,exports,module){"use strict";function _defaults(e,o){for(var r=Object.getOwnPropertyNames(o),s=0;s<r.length;s++){var t=r[s],n=Object.getOwnPropertyDescriptor(o,t);n&&n.configurable&&void 0===e[t]&&Object.defineProperty(e,t,n)}return e}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _inherits(s,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):_defaults(s,e))}var t=function(){function defineProperties(n,t){for(var s=0;s<t.length;s++){var e=t[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(e,s,t){return s&&defineProperties(e.prototype,s),t&&defineProperties(e,t),e}}(),d=function get(r,a,l){var t=!0;e:for(;t;){var s=r,i=a,c=l;t=!1,null===s&&(s=Function.prototype);var e=Object.getOwnPropertyDescriptor(s,i);if(void 0===e){var n=Object.getPrototypeOf(s);if(null===n)return void 0;r=n,a=i,l=c,t=!0,e=n=void 0;continue e}if("value"in e)return e.value;var o=e.get;if(void 0===o)return void 0;return o.call(c)}},r=require("underscore"),i=r.compose,n=require("classnames"),e=require("react-with-addons"),c=require("js/lib/coursera.react-intl"),a=c.FormattedMessage,o=require("bundles/discussions/actions/SessionFilterActions"),l=o.loadSessionsForCourse,u=require("bundles/discussions/components/sessionSwitcher/SessionSwitcherDropdown"),s=require("bundles/discussions/actions/SessionFilterActions"),p=s.selectSession,m=s.selectOnDemand,f=s.selectAll,v=require("vendor/cnpm/fluxible.v0-4/addons/connectToStores"),b=require("js/lib/waitFor"),y=require("i18n!nls/discussions");require("css!./__styles__/SessionSwitcher");var h=function(s){function SessionSwitcher(s,t){var e=this;_classCallCheck(this,SessionSwitcher),d(Object.getPrototypeOf(SessionSwitcher.prototype),"constructor",this).call(this,s,t),this.handleDropdownChange=function(s){"ondemand"===s?e.context.executeAction(m):"all"===s?e.context.executeAction(f):e.context.executeAction(p,{sessionId:s})},t.executeAction(l,{courseId:s.courseId})}return _inherits(SessionSwitcher,s),t(SessionSwitcher,null,[{key:"propTypes",value:{courseId:e.PropTypes.string.isRequired,numActiveSessions:e.PropTypes.number,sessions:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,startDate:e.PropTypes.number,endDate:e.PropTypes.number})),loaded:e.PropTypes.bool.isRequired},enumerable:!0},{key:"contextTypes",value:{executeAction:e.PropTypes.func.isRequired},enumerable:!0}]),t(SessionSwitcher,[{key:"render",value:function render(){if(!this.props.loaded)return!1;return e.createElement("div",{className:"rc-SessionSwitcher"},e.createElement("div",{className:n("horizontal-box","align-items-vertical-center","session-switcher-content")},e.createElement("div",{className:"discussions-admin-title flex-6"},e.createElement("h1",{className:"headline-3-text"},"Discussions Admin")),e.createElement("div",{className:"vertical-box flex-6"},e.createElement("div",{className:n("horizontal-box","align-items-spacebetween")},e.createElement("h4",{className:"body-2-text color-secondary-text"},"Filter by session"),e.createElement("h4",{className:"caption-text color-secondary-text"},e.createElement(a,{message:y("{numActiveSessions} sessions active"),numActiveSessions:this.props.numActiveSessions}))),e.createElement("div",null,e.createElement(u,{handleDropdownChange:this.handleDropdownChange})))))}}],[{key:"contextTypes",value:{executeAction:e.PropTypes.func},enumerable:!0}]),SessionSwitcher}(e.Component);module.exports=i(v(["SessionFilterStore"],function(s,t){var e=s.SessionFilterStore;return{numActiveSessions:e.numActiveSessions,loaded:e.filtersLoaded}}),b(function(e){return!!e.courseId}))(h)});