define("bundles/ondemand/components/reportCard/WeekRow",["require","exports","module","classnames","react-router","react-with-addons","underscore","bundles/page/components/TrackedLink2","bundles/ondemand/stores/SessionStore","bundles/ondemand/utils/url","vendor/cnpm/fluxible.v0-4/addons/connectToStores","bundles/ondemand/stores/CourseScheduleStore","js/lib/coursera.react-intl","js/lib/moment.validator","i18n!nls/ondemand","pages/open-course/common/models/module","bundles/ondemand/components/ProgressPill","./WeekExcerpt","css!./__styles__/WeekRow"],function(require,exports,module){"use strict";function _defaults(e,n){for(var s=Object.getOwnPropertyNames(n),r=0;r<s.length;r++){var t=s[r],o=Object.getOwnPropertyDescriptor(n,t);o&&o.configurable&&void 0===e[t]&&Object.defineProperty(e,t,o)}return e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):_defaults(r,e))}var b=function(){function defineProperties(o,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),f=function get(s,l,d){var t=!0;e:for(;t;){var r=s,a=l,i=d;t=!1,null===r&&(r=Function.prototype);var e=Object.getOwnPropertyDescriptor(r,a);if(void 0===e){var o=Object.getPrototypeOf(r);if(null===o)return void 0;s=o,l=a,d=i,t=!0,e=o=void 0;continue e}if("value"in e)return e.value;var n=e.get;if(void 0===n)return void 0;return n.call(i)}},r=require("classnames"),a=require("react-router"),w=a.Link,e=require("react-with-addons"),_=require("underscore"),l=require("bundles/page/components/TrackedLink2"),d=l.TrackedReactLink,c=require("bundles/ondemand/stores/SessionStore"),s=require("bundles/ondemand/utils/url"),u=s.getWeekUrl,p=require("vendor/cnpm/fluxible.v0-4/addons/connectToStores"),m=require("bundles/ondemand/stores/CourseScheduleStore"),t=m.deadlineProgress,k=require("js/lib/coursera.react-intl"),o=k.FormattedMessage,g=require("js/lib/moment.validator"),n=require("i18n!nls/ondemand"),v=require("pages/open-course/common/models/module"),y=require("bundles/ondemand/components/ProgressPill"),i=require("./WeekExcerpt");require("css!./__styles__/WeekRow");var h=function(s){function WeekRow(){_classCallCheck(this,WeekRow),f(Object.getPrototypeOf(WeekRow.prototype),"constructor",this).apply(this,arguments)}return _inherits(WeekRow,s),b(WeekRow,[{key:"render",value:function render(){var s=r("rc-WeekRow","card-one-clicker","item","comfy",{"border-current-week":this.props.isCurrentWeek}),a=r({"weekrow-bottom-border":this.props.isCurrentWeek}),l=!!this.props.deadline&&(this.props.deadlineProgress!==t.UPCOMING||this.props.isCurrentWeek);return e.createElement("div",{className:s},e.createElement("div",{className:a},e.createElement(d,{trackingName:"syllabus_week",data:{ondemandSessionId:c.getSessionId(),weekNumber:this.props.week},href:u(this.props.week),className:"nostyle week-title"},e.createElement("div",{className:"week-padding-container horizontal-box align-items-vertical-center wrap"},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"header horizontal-box align-items-vertical-center"},e.createElement("h4",{className:"label-text color-secondary-text"},e.createElement(o,{message:n("Week {index}"),index:this.props.week})),l&&e.createElement("span",{className:"week-padding"},e.createElement(y,{deadlineProgress:this.props.deadlineProgress,isGradable:this.props.isWeekGradable,isCurrentWeek:this.props.isCurrentWeek,deadline:this.props.deadline}))),e.createElement(i,{modules:this.props.modules,weekNumber:this.props.week,isCurrentWeek:this.props.isCurrentWeek,className:"week-padding"})),this.props.isCurrentWeek&&e.createElement("button",{className:"primary cozy"},e.createElement(o,{message:n("Continue"),week:this.props.week}))))))}}],[{key:"propTypes",value:{modules:e.PropTypes.arrayOf(e.PropTypes.instanceOf(v)).isRequired,week:e.PropTypes.number.isRequired,deadline:g,deadlineProgress:e.PropTypes.oneOf(t.keys).isRequired,isCurrentWeek:e.PropTypes.bool,isWeekGradable:e.PropTypes.bool},enumerable:!0}]),WeekRow}(e.Component);module.exports=p(h,["CourseStore","CourseScheduleStore"],function(t,o){var n=t.CourseStore,e=t.CourseScheduleStore,s=o.moduleIds,r=o.week,a=_(s).chain().map(n.getModule).compact().value();return{deadline:e.getDeadlineForWeek(r),deadlineProgress:e.getDeadlineProgressForWeek(r),modules:a,isWeekGradable:e.isWeekGradable(r)}})});