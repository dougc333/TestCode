define("bundles/CMLConverter/HTMLToCMLConverter/Table",["require","exports","module","underscore","./Element","./InlineElement","bundles/CMLConverter/CMLParser"],function(require,exports,module){"use strict";function _defaults(t,n){for(var i=Object.getOwnPropertyNames(n),e=0;e<i.length;e++){var o=i[e],r=Object.getOwnPropertyDescriptor(n,o);r&&r.configurable&&void 0===t[o]&&Object.defineProperty(t,o,r)}return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=function get(i,l,a){var o=!0;t:for(;o;){var e=i,c=l,s=a;o=!1,null===e&&(e=Function.prototype);var t=Object.getOwnPropertyDescriptor(e,c);if(void 0===t){var r=Object.getPrototypeOf(e);if(null===r)return void 0;i=r,l=c,a=s,o=!0,t=r=void 0;continue t}if("value"in t)return t.value;var n=t.get;if(void 0===n)return void 0;return n.call(s)}},_=require("underscore"),e=require("./Element"),o=require("./InlineElement"),r=require("bundles/CMLConverter/CMLParser"),n=function(e){function TableCellHeader(r,n){var i=this;_classCallCheck(this,TableCellHeader),t(Object.getPrototypeOf(TableCellHeader.prototype),"constructor",this).call(this,r,n,"th","th");var e=this.doc.createElement("text");_(this.childNodes).each(function(t){var r=new o(i.doc,t);e.appendChild(r.block)}),this.block.appendChild(e)}return _inherits(TableCellHeader,e),TableCellHeader}(e),i=function(e){function TableCell(n,i){var c=this;_classCallCheck(this,TableCell),t(Object.getPrototypeOf(TableCell.prototype),"constructor",this).call(this,n,i,"td","td");var e=this.doc.createElement("text");_(this.childNodes).each(function(t){var r=new o(c.doc,t);e.appendChild(r.block)}),r.hasMath(e)&&e.setAttribute("hasMath",!0),this.block.appendChild(e)}return _inherits(TableCell,e),TableCell}(e),c=function(e){function TableRow(o,r){var e=this;_classCallCheck(this,TableRow),t(Object.getPrototypeOf(TableRow.prototype),"constructor",this).call(this,o,r,"tr","tr"),_(this.childNodes).each(function(t){var r=t.tagName.toLowerCase(),o=void 0;o="th"===r?new n(e.doc,t):new i(e.doc,t),e.block.appendChild(o.block)})}return _inherits(TableRow,e),TableRow}(e),s=function(e){function Table(n,i){var o=this;if(_classCallCheck(this,Table),t(Object.getPrototypeOf(Table.prototype),"constructor",this).call(this,n,i,"table","table"),this.childNodes.length>1||"tbody"!==this.childNodes[0].tagName.toLowerCase())throw new Error("Missing or invalid <tbody> for table");var s=this.childNodes[0],e=s.childNodes;_(e).each(function(t){var e=new c(o.doc,t);o.block.appendChild(e.block)});var l=e.length,r=0;e[0]&&(r=e[0].childNodes.length),this.setBlockAttribute("rows",l),this.setBlockAttribute("columns",r)}return _inherits(Table,e),Table}(e);module.exports=s});