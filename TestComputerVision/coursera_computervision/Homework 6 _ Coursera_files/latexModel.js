define("bundles/assess/questionTypes/mathExpression/student/latexModel",["require","exports","module","bundles/assess/questionTypes/mathExpression/student/latexService","js/lib/fsm","js/vendor/backbone.v1-1-2","underscore"],function(require,exports,module){"use strict";var e=require("bundles/assess/questionTypes/mathExpression/student/latexService"),t=require("js/lib/fsm"),Backbone=require("js/vendor/backbone.v1-1-2"),_=require("underscore"),s=Backbone.Model.extend(_.extend({},t.FiniteStateMachine,{defaults:{state:"nothing",warnings:[],error:"",previewExpression:"",updateDelay:500},fsm:{states:["nothing","updating","error","warning","up-to-date"],transitions:{updating:["nothing","error","warning","up-to-date","updating"],error:["updating"],warning:["updating"],"up-to-date":["updating"]}},initialize:function initialize(){this.loadPreviewDebounced=_.debounce(this.loadPreview.bind(this),this.get("updateDelay"))},inputChange:function inputChange(e){this.transitionIfNot("updating"),this.loadPreviewDebounced(e)},loadPreview:function loadPreview(t){this.transitionIfNot("updating"),t&&""!==t.trim()?e.latex(t).done(this.updatePreview.bind(this)):(this.set("previewExpression",""),this.transition("up-to-date"))},updatePreview:function updatePreview(e){if(e.success)if(this.set("previewExpression",e.message),_(e).has("warnings")&&e.warnings.length>0){var t=e.warnings;this.set("warnings",t),this.transition("warning")}else this.transition("up-to-date");else this.set("error",e.message),this.transition("error")}}));module.exports=s});